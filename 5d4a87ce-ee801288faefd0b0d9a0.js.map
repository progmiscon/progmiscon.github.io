{"version":3,"file":"5d4a87ce-ee801288faefd0b0d9a0.js","mappings":"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","sources":["webpack://progmiscon-src/./node_modules/scratchblocks/build/scratchblocks.min.es.js"],"sourcesContent":["/**\n * scratchblocks v3.6.3\n * https://scratchblocks.github.io/\n * Render scratchblocks code to SVG images.\n *\n * Copyright 20132023, Tim Radvan\n * @license MIT\n */\n\n/*\n    When a new extension is added:\n    1) Add it to extensions object\n    2) Add its blocks to commands.js\n    3) Add icon width/height to scratch3/blocks.js IconView\n    4) Add icon to scratch3/style.js\n*/\n\n// Moved extensions: key is scratch3, value is scratch2\nconst movedExtensions = {\n  pen: \"pen\",\n  video: \"sensing\",\n  music: \"sound\"\n};\nconst extensions = {\n  ...movedExtensions,\n  tts: \"tts\",\n  translate: \"translate\",\n  microbit: \"microbit\",\n  wedo: \"wedo\",\n  makeymakey: \"makeymakey\",\n  ev3: \"ev3\",\n  boost: \"boost\",\n  gdxfor: \"gdxfor\"\n};\n\n// Alias extensions: unlike movedExtensions, this is handled for both scratch2 and scratch3.\n// Key is alias, value is real extension name\nconst aliasExtensions = {\n  wedo2: \"wedo\",\n  text2speech: \"tts\"\n};\nvar scratchCommands = [{\n  id: \"MOTION_MOVESTEPS\",\n  selector: \"forward:\",\n  spec: \"move %1 steps\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_TURNRIGHT\",\n  selector: \"turnRight:\",\n  spec: \"turn @turnRight %1 degrees\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_TURNLEFT\",\n  selector: \"turnLeft:\",\n  spec: \"turn @turnLeft %1 degrees\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_POINTINDIRECTION\",\n  selector: \"heading:\",\n  spec: \"point in direction %1\",\n  inputs: [\"%d.direction\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_POINTTOWARDS\",\n  selector: \"pointTowards:\",\n  spec: \"point towards %1\",\n  inputs: [\"%m.spriteOrMouse\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_GOTOXY\",\n  selector: \"gotoX:y:\",\n  spec: \"go to x:%1 y:%2\",\n  inputs: [\"%n\", \"%n\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_GOTO\",\n  selector: \"gotoSpriteOrMouse:\",\n  spec: \"go to %1\",\n  inputs: [\"%m.location\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_GLIDESECSTOXY\",\n  selector: \"glideSecs:toX:y:elapsed:from:\",\n  spec: \"glide %1 secs to x:%2 y:%3\",\n  inputs: [\"%n\", \"%n\", \"%n\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_GLIDETO\",\n  spec: \"glide %1 secs to %2\",\n  inputs: [\"%n\", \"%m.location\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_CHANGEXBY\",\n  selector: \"changeXposBy:\",\n  spec: \"change x by %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_SETX\",\n  selector: \"xpos:\",\n  spec: \"set x to %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_CHANGEYBY\",\n  selector: \"changeYposBy:\",\n  spec: \"change y by %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_SETY\",\n  selector: \"ypos:\",\n  spec: \"set y to %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"MOTION_SETROTATIONSTYLE\",\n  selector: \"setRotationStyle\",\n  spec: \"set rotation style %1\",\n  inputs: [\"%m.rotationStyle\"],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"LOOKS_SAYFORSECS\",\n  selector: \"say:duration:elapsed:from:\",\n  spec: \"say %1 for %2 seconds\",\n  inputs: [\"%s\", \"%n\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_SAY\",\n  selector: \"say:\",\n  spec: \"say %1\",\n  inputs: [\"%s\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_THINKFORSECS\",\n  selector: \"think:duration:elapsed:from:\",\n  spec: \"think %1 for %2 seconds\",\n  inputs: [\"%s\", \"%n\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_THINK\",\n  selector: \"think:\",\n  spec: \"think %1\",\n  inputs: [\"%s\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_SHOW\",\n  selector: \"show\",\n  spec: \"show\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_HIDE\",\n  selector: \"hide\",\n  spec: \"hide\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_SWITCHCOSTUMETO\",\n  selector: \"lookLike:\",\n  spec: \"switch costume to %1\",\n  inputs: [\"%m.costume\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_NEXTCOSTUME\",\n  selector: \"nextCostume\",\n  spec: \"next costume\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_NEXTBACKDROP_BLOCK\",\n  selector: \"nextScene\",\n  spec: \"next backdrop\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_SWITCHBACKDROPTO\",\n  selector: \"startScene\",\n  spec: \"switch backdrop to %1\",\n  inputs: [\"%m.backdrop\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_SWITCHBACKDROPTOANDWAIT\",\n  selector: \"startSceneAndWait\",\n  spec: \"switch backdrop to %1 and wait\",\n  inputs: [\"%m.backdrop\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_CHANGEEFFECTBY\",\n  selector: \"changeGraphicEffect:by:\",\n  spec: \"change %1 effect by %2\",\n  inputs: [\"%m.effect\", \"%n\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_SETEFFECTTO\",\n  selector: \"setGraphicEffect:to:\",\n  spec: \"set %1 effect to %2\",\n  inputs: [\"%m.effect\", \"%n\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_CLEARGRAPHICEFFECTS\",\n  selector: \"filterReset\",\n  spec: \"clear graphic effects\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_CHANGESIZEBY\",\n  selector: \"changeSizeBy:\",\n  spec: \"change size by %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_SETSIZETO\",\n  selector: \"setSizeTo:\",\n  spec: \"set size to %1%\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  selector: \"comeToFront\",\n  spec: \"go to front\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_GOTOFRONTBACK\",\n  spec: \"go to %1 layer\",\n  inputs: [\"%m\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  selector: \"goBackByLayers:\",\n  spec: \"go back %1 layers\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_GOFORWARDBACKWARDLAYERS\",\n  spec: \"go %1 %2 layers\",\n  inputs: [\"%m\", \"%n\"],\n  shape: \"stack\",\n  category: \"looks\"\n}, {\n  id: \"SOUND_PLAY\",\n  selector: \"playSound:\",\n  spec: \"start sound %1\",\n  inputs: [\"%m.sound\"],\n  shape: \"stack\",\n  category: \"sound\"\n}, {\n  id: \"SOUND_CHANGEEFFECTBY\",\n  spec: \"change %1 effect by %2\",\n  inputs: [\"%m\", \"%n\"],\n  shape: \"stack\",\n  category: \"sound\"\n}, {\n  id: \"SOUND_SETEFFECTO\",\n  // sic\n  spec: \"set %1 effect to %2\",\n  inputs: [\"%m\", \"%n\"],\n  shape: \"stack\",\n  category: \"sound\"\n}, {\n  id: \"SOUND_CLEAREFFECTS\",\n  spec: \"clear sound effects\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"sound\"\n}, {\n  id: \"SOUND_PLAYUNTILDONE\",\n  selector: \"doPlaySoundAndWait\",\n  spec: \"play sound %1 until done\",\n  inputs: [\"%m.sound\"],\n  shape: \"stack\",\n  category: \"sound\"\n}, {\n  id: \"SOUND_STOPALLSOUNDS\",\n  selector: \"stopAllSounds\",\n  spec: \"stop all sounds\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"sound\"\n}, {\n  id: \"music.playDrumForBeats\",\n  selector: \"playDrum\",\n  spec: \"play drum %1 for %2 beats\",\n  inputs: [\"%d.drum\", \"%n\"],\n  shape: \"stack\",\n  category: \"music\"\n}, {\n  id: \"music.restForBeats\",\n  selector: \"rest:elapsed:from:\",\n  spec: \"rest for %1 beats\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"music\"\n}, {\n  id: \"music.playNoteForBeats\",\n  selector: \"noteOn:duration:elapsed:from:\",\n  spec: \"play note %1 for %2 beats\",\n  inputs: [\"%d.note\", \"%n\"],\n  shape: \"stack\",\n  category: \"music\"\n}, {\n  id: \"music.setInstrument\",\n  selector: \"instrument:\",\n  spec: \"set instrument to %1\",\n  inputs: [\"%d.instrument\"],\n  shape: \"stack\",\n  category: \"music\"\n}, {\n  id: \"SOUND_CHANGEVOLUMEBY\",\n  selector: \"changeVolumeBy:\",\n  spec: \"change volume by %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"sound\"\n}, {\n  id: \"SOUND_SETVOLUMETO\",\n  selector: \"setVolumeTo:\",\n  spec: \"set volume to %1%\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"sound\"\n}, {\n  id: \"music.changeTempo\",\n  selector: \"changeTempoBy:\",\n  spec: \"change tempo by %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"music\"\n}, {\n  selector: \"setTempoTo:\",\n  spec: \"set tempo to %1 bpm\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"sound\"\n}, {\n  id: \"music.setTempo\",\n  selector: \"setTempoTo:\",\n  spec: \"set tempo to %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"music\"\n}, {\n  id: \"pen.clear\",\n  selector: \"clearPenTrails\",\n  spec: \"erase all\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.stamp\",\n  selector: \"stampCostume\",\n  spec: \"stamp\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.penDown\",\n  selector: \"putPenDown\",\n  spec: \"pen down\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.penUp\",\n  selector: \"putPenUp\",\n  spec: \"pen up\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.setColor\",\n  selector: \"penColor:\",\n  spec: \"set pen color to %1\",\n  inputs: [\"%c\"],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.changeHue\",\n  selector: \"changePenHueBy:\",\n  spec: \"change pen color by %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.setColorParam\",\n  spec: \"set pen %1 to %2\",\n  inputs: [\"%m.color\", \"%c\"],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.changeColorParam\",\n  spec: \"change pen %1 by %2\",\n  inputs: [\"%m.color\", \"%n\"],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.setHue\",\n  selector: \"setPenHueTo:\",\n  spec: \"set pen color to %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.changeShade\",\n  selector: \"changePenShadeBy:\",\n  spec: \"change pen shade by %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.setShade\",\n  selector: \"setPenShadeTo:\",\n  spec: \"set pen shade to %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.changeSize\",\n  selector: \"changePenSizeBy:\",\n  spec: \"change pen size by %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"pen.setSize\",\n  selector: \"penSize:\",\n  spec: \"set pen size to %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"pen\"\n}, {\n  id: \"EVENT_WHENFLAGCLICKED\",\n  selector: \"whenGreenFlag\",\n  spec: \"when @greenFlag clicked\",\n  inputs: [],\n  shape: \"hat\",\n  category: \"events\"\n}, {\n  id: \"EVENT_WHENKEYPRESSED\",\n  selector: \"whenKeyPressed\",\n  spec: \"when %1 key pressed\",\n  inputs: [\"%m.key\"],\n  shape: \"hat\",\n  category: \"events\"\n}, {\n  id: \"EVENT_WHENTHISSPRITECLICKED\",\n  selector: \"whenClicked\",\n  spec: \"when this sprite clicked\",\n  inputs: [],\n  shape: \"hat\",\n  category: \"events\"\n}, {\n  id: \"EVENT_WHENSTAGECLICKED\",\n  spec: \"when stage clicked\",\n  inputs: [],\n  shape: \"hat\",\n  category: \"events\"\n}, {\n  id: \"EVENT_WHENBACKDROPSWITCHESTO\",\n  selector: \"whenSceneStarts\",\n  spec: \"when backdrop switches to %1\",\n  inputs: [\"%m.backdrop\"],\n  shape: \"hat\",\n  category: \"events\"\n}, {\n  id: \"EVENT_WHENGREATERTHAN\",\n  selector: \"whenSensorGreaterThan\",\n  spec: \"when %1 > %2\",\n  inputs: [\"%m.triggerSensor\", \"%n\"],\n  shape: \"hat\",\n  category: \"events\"\n}, {\n  id: \"EVENT_WHENBROADCASTRECEIVED\",\n  selector: \"whenIReceive\",\n  spec: \"when I receive %1\",\n  inputs: [\"%m.broadcast\"],\n  shape: \"hat\",\n  category: \"events\"\n}, {\n  id: \"EVENT_BROADCAST\",\n  selector: \"broadcast:\",\n  spec: \"broadcast %1\",\n  inputs: [\"%m.broadcast\"],\n  shape: \"stack\",\n  category: \"events\"\n}, {\n  id: \"EVENT_BROADCASTANDWAIT\",\n  selector: \"doBroadcastAndWait\",\n  spec: \"broadcast %1 and wait\",\n  inputs: [\"%m.broadcast\"],\n  shape: \"stack\",\n  category: \"events\"\n}, {\n  id: \"CONTROL_WAIT\",\n  selector: \"wait:elapsed:from:\",\n  spec: \"wait %1 seconds\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"control\"\n}, {\n  id: \"CONTROL_REPEAT\",\n  selector: \"doRepeat\",\n  spec: \"repeat %1\",\n  inputs: [\"%n\"],\n  shape: \"c-block\",\n  category: \"control\",\n  hasLoopArrow: true\n}, {\n  id: \"CONTROL_FOREVER\",\n  selector: \"doForever\",\n  spec: \"forever\",\n  inputs: [],\n  shape: \"c-block cap\",\n  category: \"control\",\n  hasLoopArrow: true\n}, {\n  id: \"CONTROL_IF\",\n  selector: \"doIf\",\n  spec: \"if %1 then\",\n  inputs: [\"%b\"],\n  shape: \"c-block\",\n  category: \"control\"\n}, {\n  id: \"CONTROL_WAITUNTIL\",\n  selector: \"doWaitUntil\",\n  spec: \"wait until %1\",\n  inputs: [\"%b\"],\n  shape: \"stack\",\n  category: \"control\"\n}, {\n  id: \"CONTROL_REPEATUNTIL\",\n  selector: \"doUntil\",\n  spec: \"repeat until %1\",\n  inputs: [\"%b\"],\n  shape: \"c-block\",\n  category: \"control\",\n  hasLoopArrow: true\n}, {\n  id: \"CONTROL_STOP\",\n  selector: \"stopScripts\",\n  spec: \"stop %1\",\n  inputs: [\"%m.stop\"],\n  shape: \"cap\",\n  category: \"control\"\n}, {\n  id: \"CONTROL_STARTASCLONE\",\n  selector: \"whenCloned\",\n  spec: \"when I start as a clone\",\n  inputs: [],\n  shape: \"hat\",\n  category: \"control\"\n}, {\n  id: \"CONTROL_CREATECLONEOF\",\n  selector: \"createCloneOf\",\n  spec: \"create clone of %1\",\n  inputs: [\"%m.spriteOnly\"],\n  shape: \"stack\",\n  category: \"control\"\n}, {\n  id: \"CONTROL_DELETETHISCLONE\",\n  selector: \"deleteClone\",\n  spec: \"delete this clone\",\n  inputs: [],\n  shape: \"cap\",\n  category: \"control\"\n}, {\n  id: \"SENSING_ASKANDWAIT\",\n  selector: \"doAsk\",\n  spec: \"ask %1 and wait\",\n  inputs: [\"%s\"],\n  shape: \"stack\",\n  category: \"sensing\"\n}, {\n  id: \"videoSensing.videoToggle\",\n  selector: \"setVideoState\",\n  spec: \"turn video %1\",\n  inputs: [\"%m.videoState\"],\n  shape: \"stack\",\n  category: \"video\"\n}, {\n  id: \"videoSensing.setVideoTransparency\",\n  selector: \"setVideoTransparency\",\n  spec: \"set video transparency to %1%\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"video\"\n}, {\n  id: \"videoSensing.whenMotionGreaterThan\",\n  spec: \"when video motion > %1\",\n  inputs: [\"%n\"],\n  shape: \"hat\",\n  category: \"video\"\n}, {\n  id: \"SENSING_RESETTIMER\",\n  selector: \"timerReset\",\n  spec: \"reset timer\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"sensing\"\n}, {\n  id: \"DATA_SETVARIABLETO\",\n  selector: \"setVar:to:\",\n  spec: \"set %1 to %2\",\n  inputs: [\"%m.var\", \"%s\"],\n  shape: \"stack\",\n  category: \"variables\"\n}, {\n  id: \"DATA_CHANGEVARIABLEBY\",\n  selector: \"changeVar:by:\",\n  spec: \"change %1 by %2\",\n  inputs: [\"%m.var\", \"%n\"],\n  shape: \"stack\",\n  category: \"variables\"\n}, {\n  id: \"DATA_SHOWVARIABLE\",\n  selector: \"showVariable:\",\n  spec: \"show variable %1\",\n  inputs: [\"%m.var\"],\n  shape: \"stack\",\n  category: \"variables\"\n}, {\n  id: \"DATA_HIDEVARIABLE\",\n  selector: \"hideVariable:\",\n  spec: \"hide variable %1\",\n  inputs: [\"%m.var\"],\n  shape: \"stack\",\n  category: \"variables\"\n}, {\n  id: \"DATA_ADDTOLIST\",\n  selector: \"append:toList:\",\n  spec: \"add %1 to %2\",\n  inputs: [\"%s\", \"%m.list\"],\n  shape: \"stack\",\n  category: \"list\"\n}, {\n  id: \"DATA_DELETEOFLIST\",\n  selector: \"deleteLine:ofList:\",\n  spec: \"delete %1 of %2\",\n  inputs: [\"%d.listDeleteItem\", \"%m.list\"],\n  shape: \"stack\",\n  category: \"list\"\n}, {\n  id: \"DATA_DELETEALLOFLIST\",\n  spec: \"delete all of %1\",\n  inputs: [\"%m.list\"],\n  shape: \"stack\",\n  category: \"list\"\n}, {\n  id: \"MOTION_IFONEDGEBOUNCE\",\n  selector: \"bounceOffEdge\",\n  spec: \"if on edge, bounce\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"motion\"\n}, {\n  id: \"DATA_INSERTATLIST\",\n  selector: \"insert:at:ofList:\",\n  spec: \"insert %1 at %2 of %3\",\n  inputs: [\"%s\", \"%d.listItem\", \"%m.list\"],\n  shape: \"stack\",\n  category: \"list\"\n}, {\n  id: \"DATA_REPLACEITEMOFLIST\",\n  selector: \"setLine:ofList:to:\",\n  spec: \"replace item %1 of %2 with %3\",\n  inputs: [\"%d.listItem\", \"%m.list\", \"%s\"],\n  shape: \"stack\",\n  category: \"list\"\n}, {\n  id: \"DATA_SHOWLIST\",\n  selector: \"showList:\",\n  spec: \"show list %1\",\n  inputs: [\"%m.list\"],\n  shape: \"stack\",\n  category: \"list\"\n}, {\n  id: \"DATA_HIDELIST\",\n  selector: \"hideList:\",\n  spec: \"hide list %1\",\n  inputs: [\"%m.list\"],\n  shape: \"stack\",\n  category: \"list\"\n}, {\n  id: \"SENSING_OF_XPOSITION\",\n  selector: \"xpos\",\n  spec: \"x position\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"motion\"\n}, {\n  id: \"SENSING_OF_YPOSITION\",\n  selector: \"ypos\",\n  spec: \"y position\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"motion\"\n}, {\n  id: \"SENSING_OF_DIRECTION\",\n  selector: \"heading\",\n  spec: \"direction\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"motion\"\n}, {\n  id: \"SENSING_OF_COSTUMENUMBER\",\n  selector: \"costumeIndex\",\n  spec: \"costume #\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_COSTUMENUMBERNAME\",\n  selector: \"LOOKS_COSTUMENUMBERNAME\",\n  spec: \"costume %1\",\n  inputs: [\"%m\"],\n  shape: \"reporter\",\n  category: \"looks\"\n}, {\n  id: \"SENSING_OF_SIZE\",\n  selector: \"scale\",\n  spec: \"size\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"looks\"\n}, {\n  id: \"SENSING_OF_BACKDROPNAME\",\n  selector: \"sceneName\",\n  spec: \"backdrop name\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"looks\"\n}, {\n  id: \"LOOKS_BACKDROPNUMBERNAME\",\n  spec: \"backdrop %1\",\n  inputs: [\"%m\"],\n  shape: \"reporter\",\n  category: \"looks\"\n}, {\n  id: \"SENSING_OF_BACKDROPNUMBER\",\n  selector: \"backgroundIndex\",\n  spec: \"backdrop #\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"looks\"\n}, {\n  id: \"SOUND_VOLUME\",\n  selector: \"volume\",\n  spec: \"volume\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"sound\"\n}, {\n  id: \"music.getTempo\",\n  selector: \"tempo\",\n  spec: \"tempo\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"music\"\n}, {\n  id: \"SENSING_TOUCHINGOBJECT\",\n  selector: \"touching:\",\n  spec: \"touching %1?\",\n  inputs: [\"%m.touching\"],\n  shape: \"boolean\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_TOUCHINGCOLOR\",\n  selector: \"touchingColor:\",\n  spec: \"touching color %1?\",\n  inputs: [\"%c\"],\n  shape: \"boolean\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_COLORISTOUCHINGCOLOR\",\n  selector: \"color:sees:\",\n  spec: \"color %1 is touching %2?\",\n  inputs: [\"%c\", \"%c\"],\n  shape: \"boolean\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_DISTANCETO\",\n  selector: \"distanceTo:\",\n  spec: \"distance to %1\",\n  inputs: [\"%m.spriteOrMouse\"],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_ANSWER\",\n  selector: \"answer\",\n  spec: \"answer\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_KEYPRESSED\",\n  selector: \"keyPressed:\",\n  spec: \"key %1 pressed?\",\n  inputs: [\"%m.key\"],\n  shape: \"boolean\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_MOUSEDOWN\",\n  selector: \"mousePressed\",\n  spec: \"mouse down?\",\n  inputs: [],\n  shape: \"boolean\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_MOUSEX\",\n  selector: \"mouseX\",\n  spec: \"mouse x\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_MOUSEY\",\n  selector: \"mouseY\",\n  spec: \"mouse y\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_SETDRAGMODE\",\n  spec: \"set drag mode %1\",\n  inputs: [\"%m\"],\n  shape: \"stack\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_LOUDNESS\",\n  selector: \"soundLevel\",\n  spec: \"loudness\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"videoSensing.videoOn\",\n  selector: \"senseVideoMotion\",\n  spec: \"video %1 on %2\",\n  inputs: [\"%m.videoMotionType\", \"%m.stageOrThis\"],\n  shape: \"reporter\",\n  category: \"video\"\n}, {\n  id: \"SENSING_TIMER\",\n  selector: \"timer\",\n  spec: \"timer\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_OF\",\n  selector: \"getAttribute:of:\",\n  spec: \"%1 of %2\",\n  inputs: [\"%m.attribute\", \"%m.spriteOrStage\"],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_CURRENT\",\n  selector: \"timeAndDate\",\n  spec: \"current %1\",\n  inputs: [\"%m.timeAndDate\"],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_DAYSSINCE2000\",\n  selector: \"timestamp\",\n  spec: \"days since 2000\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"SENSING_USERNAME\",\n  selector: \"getUserName\",\n  spec: \"username\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"sensing\"\n}, {\n  id: \"OPERATORS_ADD\",\n  selector: \"+\",\n  spec: \"%1 + %2\",\n  inputs: [\"%n\", \"%n\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_SUBTRACT\",\n  selector: \"-\",\n  spec: \"%1 - %2\",\n  inputs: [\"%n\", \"%n\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_MULTIPLY\",\n  selector: \"*\",\n  spec: \"%1 * %2\",\n  inputs: [\"%n\", \"%n\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_DIVIDE\",\n  selector: \"/\",\n  spec: \"%1 / %2\",\n  inputs: [\"%n\", \"%n\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_RANDOM\",\n  selector: \"randomFrom:to:\",\n  spec: \"pick random %1 to %2\",\n  inputs: [\"%n\", \"%n\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_LT\",\n  selector: \"<\",\n  spec: \"%1 < %2\",\n  inputs: [\"%s\", \"%s\"],\n  shape: \"boolean\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_EQUALS\",\n  selector: \"=\",\n  spec: \"%1 = %2\",\n  inputs: [\"%s\", \"%s\"],\n  shape: \"boolean\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_GT\",\n  selector: \">\",\n  spec: \"%1 > %2\",\n  inputs: [\"%s\", \"%s\"],\n  shape: \"boolean\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_AND\",\n  selector: \"&\",\n  spec: \"%1 and %2\",\n  inputs: [\"%b\", \"%b\"],\n  shape: \"boolean\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_OR\",\n  selector: \"|\",\n  spec: \"%1 or %2\",\n  inputs: [\"%b\", \"%b\"],\n  shape: \"boolean\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_NOT\",\n  selector: \"not\",\n  spec: \"not %1\",\n  inputs: [\"%b\"],\n  shape: \"boolean\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_JOIN\",\n  selector: \"concatenate:with:\",\n  spec: \"join %1 %2\",\n  inputs: [\"%s\", \"%s\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_LETTEROF\",\n  selector: \"letter:of:\",\n  spec: \"letter %1 of %2\",\n  inputs: [\"%n\", \"%s\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_LENGTH\",\n  selector: \"stringLength:\",\n  spec: \"length of %1\",\n  inputs: [\"%s\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_MOD\",\n  selector: \"%\",\n  spec: \"%1 mod %2\",\n  inputs: [\"%n\", \"%n\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_ROUND\",\n  selector: \"rounded\",\n  spec: \"round %1\",\n  inputs: [\"%n\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_MATHOP\",\n  selector: \"computeFunction:of:\",\n  spec: \"%1 of %2\",\n  inputs: [\"%m.mathOp\", \"%n\"],\n  shape: \"reporter\",\n  category: \"operators\"\n}, {\n  id: \"OPERATORS_CONTAINS\",\n  spec: \"%1 contains %2?\",\n  inputs: [\"%s\", \"%s\"],\n  shape: \"boolean\",\n  category: \"operators\"\n}, {\n  id: \"DATA_ITEMOFLIST\",\n  selector: \"getLine:ofList:\",\n  spec: \"item %1 of %2\",\n  inputs: [\"%d.listItem\", \"%m.list\"],\n  shape: \"reporter\",\n  category: \"list\"\n}, {\n  id: \"DATA_ITEMNUMOFLIST\",\n  spec: \"item # of %1 in %2\",\n  inputs: [\"%s\", \"%m.list\"],\n  shape: \"reporter\",\n  category: \"list\"\n}, {\n  id: \"DATA_LENGTHOFLIST\",\n  selector: \"lineCountOfList:\",\n  spec: \"length of %1\",\n  inputs: [\"%m.list\"],\n  shape: \"reporter\",\n  category: \"list\"\n}, {\n  id: \"DATA_LISTCONTAINSITEM\",\n  selector: \"list:contains:\",\n  spec: \"%1 contains %2?\",\n  inputs: [\"%m.list\", \"%s\"],\n  shape: \"boolean\",\n  category: \"list\"\n}, {\n  id: \"CONTROL_ELSE\",\n  spec: \"else\",\n  inputs: [],\n  shape: \"celse\",\n  category: \"control\"\n}, {\n  id: \"scratchblocks:end\",\n  spec: \"end\",\n  inputs: [],\n  shape: \"cend\",\n  category: \"control\"\n}, {\n  id: \"scratchblocks:ellipsis\",\n  spec: \". . .\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"grey\"\n}, {\n  id: \"scratchblocks:addInput\",\n  spec: \"%1 @addInput\",\n  inputs: [\"%n\"],\n  shape: \"ring\",\n  category: \"grey\"\n}, {\n  id: \"SENSING_USERID\",\n  spec: \"user id\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"obsolete\"\n}, {\n  selector: \"doIf\",\n  spec: \"if %1\",\n  inputs: [\"%b\"],\n  shape: \"c-block\",\n  category: \"obsolete\"\n}, {\n  selector: \"doForeverIf\",\n  spec: \"forever if %1\",\n  inputs: [\"%b\"],\n  shape: \"c-block cap\",\n  category: \"obsolete\"\n}, {\n  selector: \"doReturn\",\n  spec: \"stop script\",\n  inputs: [],\n  shape: \"cap\",\n  category: \"obsolete\"\n}, {\n  selector: \"stopAll\",\n  spec: \"stop all\",\n  inputs: [],\n  shape: \"cap\",\n  category: \"obsolete\"\n}, {\n  selector: \"lookLike:\",\n  spec: \"switch to costume %1\",\n  inputs: [\"%m.costume\"],\n  shape: \"stack\",\n  category: \"obsolete\"\n}, {\n  selector: \"nextScene\",\n  spec: \"next background\",\n  inputs: [],\n  shape: \"stack\",\n  category: \"obsolete\"\n}, {\n  selector: \"startScene\",\n  spec: \"switch to background %1\",\n  inputs: [\"%m.backdrop\"],\n  shape: \"stack\",\n  category: \"obsolete\"\n}, {\n  selector: \"backgroundIndex\",\n  spec: \"background #\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"obsolete\"\n}, {\n  id: \"SENSING_LOUD\",\n  selector: \"isLoud\",\n  spec: \"loud?\",\n  inputs: [],\n  shape: \"boolean\",\n  category: \"obsolete\"\n},\n// TODO define\n{\n  id: \"text2speech.speakAndWaitBlock\",\n  spec: \"speak %1\",\n  inputs: [\"%s\"],\n  shape: \"stack\",\n  category: \"tts\"\n}, {\n  id: \"text2speech.setVoiceBlock\",\n  spec: \"set voice to %1\",\n  inputs: [\"%m\"],\n  shape: \"stack\",\n  category: \"tts\"\n}, {\n  id: \"text2speech.setLanguageBlock\",\n  spec: \"set language to %1\",\n  inputs: [\"%m\"],\n  shape: \"stack\",\n  category: \"tts\"\n}, {\n  id: \"translate.translateBlock\",\n  spec: \"translate %1 to %2\",\n  inputs: [\"%s\", \"%m\"],\n  shape: \"reporter\",\n  category: \"translate\"\n}, {\n  id: \"translate.viewerLanguage\",\n  spec: \"language\",\n  shape: \"reporter\",\n  category: \"translate\"\n}, {\n  id: \"makeymakey.whenKeyPressed\",\n  spec: \"when %1 key pressed\",\n  inputs: [\"%m\"],\n  // this is not %m.key\n  shape: \"hat\",\n  category: \"makeymakey\"\n}, {\n  id: \"makeymakey.whenKeysPressedInOrder\",\n  spec: \"when %1 pressed in order\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"makeymakey\"\n}, {\n  id: \"microbit.whenButtonPressed\",\n  spec: \"when %1 button pressed\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"microbit\"\n}, {\n  id: \"microbit.isButtonPressed\",\n  spec: \"%1 button pressed?\",\n  inputs: [\"%m\"],\n  shape: \"boolean\",\n  category: \"microbit\"\n}, {\n  id: \"microbit.whenGesture\",\n  spec: \"when %1\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"microbit\"\n}, {\n  id: \"microbit.displaySymbol\",\n  spec: \"display %1\",\n  inputs: [\"%m\"],\n  // TODO add matrix support\n  shape: \"stack\",\n  category: \"microbit\"\n}, {\n  id: \"microbit.displayText\",\n  spec: \"display text %1\",\n  inputs: [\"%s\"],\n  shape: \"stack\",\n  category: \"microbit\"\n}, {\n  id: \"microbit.clearDisplay\",\n  spec: \"clear display\",\n  shape: \"stack\",\n  category: \"microbit\"\n}, {\n  id: \"microbit.whenTilted\",\n  spec: \"when tilted %1\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"microbit\"\n}, {\n  id: \"microbit.isTilted\",\n  spec: \"tilted %1?\",\n  inputs: [\"%m\"],\n  shape: \"boolean\",\n  category: \"microbit\"\n}, {\n  id: \"microbit.tiltAngle\",\n  spec: \"tilt angle %1\",\n  inputs: [\"%m\"],\n  shape: \"reporter\",\n  category: \"microbit\"\n}, {\n  id: \"microbit.whenPinConnected\",\n  spec: \"when pin %1 connected\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"microbit\"\n}, {\n  id: \"ev3.motorTurnClockwise\",\n  spec: \"motor %1 turn this way for %2 seconds\",\n  inputs: [\"%m\", \"%n\"],\n  shape: \"stack\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.motorTurnCounterClockwise\",\n  spec: \"motor %1 turn that way for %2 seconds\",\n  inputs: [\"%m\", \"%n\"],\n  shape: \"stack\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.motorSetPower\",\n  spec: \"motor %1 set power %2%\",\n  inputs: [\"%m\", \"%n\"],\n  shape: \"stack\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.getMotorPosition\",\n  spec: \"motor %1 position\",\n  inputs: [\"%m\"],\n  shape: \"reporter\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.whenButtonPressed\",\n  spec: \"when button %1 pressed\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.whenDistanceLessThan\",\n  spec: \"when distance < %1\",\n  inputs: [\"%n\"],\n  shape: \"hat\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.whenBrightnessLessThan\",\n  spec: \"when brightness < %1\",\n  inputs: [\"%n\"],\n  shape: \"hat\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.buttonPressed\",\n  spec: \"button %1 pressed?\",\n  inputs: [\"%m\"],\n  shape: \"boolean\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.getDistance\",\n  spec: \"distance\",\n  shape: \"reporter\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.getBrightness\",\n  spec: \"brightness\",\n  shape: \"reporter\",\n  category: \"ev3\"\n}, {\n  id: \"ev3.beepNote\",\n  spec: \"beep note %1 for %2 secs\",\n  inputs: [\"%d.note\", \"%n\"],\n  // we can use %d.note here\n  shape: \"stack\",\n  category: \"ev3\"\n}, {\n  id: \"wedo2.motorOn\",\n  spec: \"turn %1 on\",\n  inputs: [\"%m.motor\"],\n  shape: \"stack\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.motorOff\",\n  spec: \"turn %1 off\",\n  inputs: [\"%m.motor\"],\n  shape: \"stack\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.startMotorPower\",\n  spec: \"set %1 power to %2\",\n  inputs: [\"%m.motor\", \"%n\"],\n  shape: \"stack\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.setMotorDirection\",\n  spec: \"set %1 direction to %2\",\n  inputs: [\"%m.motor2\", \"%m.motorDirection\"],\n  shape: \"stack\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.whenDistance\",\n  spec: \"when distance %1 %2\",\n  inputs: [\"%m.lessMore\", \"%n\"],\n  shape: \"hat\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.getDistance\",\n  spec: \"distance\",\n  inputs: [],\n  shape: \"reporter\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.motorOnFor\",\n  spec: \"turn %1 on for %2 seconds\",\n  inputs: [\"%m.motor\", \"%n\"],\n  shape: \"stack\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.setLightHue\",\n  spec: \"set light color to %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.playNoteFor\",\n  spec: \"play note %1 for %2 seconds\",\n  inputs: [\"%n\", \"%n\"],\n  shape: \"stack\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.whenTilted\",\n  spec: \"when tilted %1\",\n  inputs: [\"%m.xxx\"],\n  shape: \"hat\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.isTilted\",\n  spec: \"tilted %1?\",\n  inputs: [\"%m\"],\n  shape: \"boolean\",\n  category: \"wedo\"\n}, {\n  id: \"wedo2.getTiltAngle\",\n  spec: \"tilt angle %1\",\n  inputs: [\"%m.xxx\"],\n  shape: \"reporter\",\n  category: \"wedo\"\n}, {\n  id: \"gdxfor.whenGesture\",\n  spec: \"when %1\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"gdxfor\"\n}, {\n  id: \"gdxfor.whenForcePushedOrPulled\",\n  spec: \"when force sensor %1\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"gdxfor\"\n}, {\n  id: \"gdxfor.getForce\",\n  spec: \"force\",\n  shape: \"reporter\",\n  category: \"gdxfor\"\n}, {\n  id: \"gdxfor.whenTilted\",\n  spec: \"when tilted %1\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"gdxfor\"\n}, {\n  id: \"gdxfor.isTilted\",\n  spec: \"tilted %1?\",\n  inputs: [\"%m\"],\n  shape: \"boolean\",\n  category: \"gdxfor\"\n}, {\n  id: \"gdxfor.getTilt\",\n  spec: \"tilt angle %1\",\n  inputs: [\"%m\"],\n  shape: \"reporter\",\n  category: \"gdxfor\"\n}, {\n  id: \"gdxfor.isFreeFalling\",\n  spec: \"falling?\",\n  shape: \"boolean\",\n  category: \"gdxfor\"\n}, {\n  id: \"gdxfor.getSpin\",\n  spec: \"spin speed %1\",\n  inputs: [\"%m\"],\n  shape: \"reporter\",\n  category: \"gdxfor\"\n}, {\n  id: \"gdxfor.getAcceleration\",\n  spec: \"acceleration %1\",\n  inputs: [\"%m\"],\n  shape: \"reporter\",\n  category: \"gdxfor\"\n}, {\n  id: \"boost.motorOnFor\",\n  spec: \"turn motor %1 for %2 seconds\",\n  inputs: [\"%m\", \"%n\"],\n  shape: \"stack\",\n  category: \"boost\"\n}, {\n  id: \"boost.motorOnForRotation\",\n  spec: \"turn motor %1 for %2 rotations\",\n  inputs: [\"%m\", \"%n\"],\n  shape: \"stack\",\n  category: \"boost\"\n}, {\n  id: \"boost.motorOn\",\n  spec: \"turn motor %1 on\",\n  inputs: [\"%m\"],\n  shape: \"stack\",\n  category: \"boost\"\n}, {\n  id: \"boost.motorOff\",\n  spec: \"turn motor %1 off\",\n  inputs: [\"%m\"],\n  shape: \"stack\",\n  category: \"boost\"\n}, {\n  id: \"boost.setMotorPower\",\n  spec: \"set motor %1 speed to %2%\",\n  inputs: [\"%m\", \"%n\"],\n  shape: \"stack\",\n  category: \"boost\"\n}, {\n  id: \"boost.setMotorDirection\",\n  spec: \"set motor %1 direction %2\",\n  inputs: [\"%m\", \"%m\"],\n  shape: \"stack\",\n  category: \"boost\"\n}, {\n  id: \"boost.getMotorPosition\",\n  spec: \"motor %1 position\",\n  inputs: [\"%m\"],\n  shape: \"reporter\",\n  category: \"boost\"\n}, {\n  id: \"boost.whenColor\",\n  spec: \"when %1 brick seen\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"boost\"\n}, {\n  id: \"boost.seeingColor\",\n  spec: \"seeing %1 brick?\",\n  inputs: [\"%m\"],\n  shape: \"boolean\",\n  category: \"boost\"\n}, {\n  id: \"boost.whenTilted\",\n  spec: \"when tilted %1\",\n  inputs: [\"%m\"],\n  shape: \"hat\",\n  category: \"boost\"\n}, {\n  id: \"boost.getTiltAngle\",\n  spec: \"tilt angle %1\",\n  inputs: [\"%m\"],\n  shape: \"reporter\",\n  category: \"boost\"\n}, {\n  id: \"boost.setLightHue\",\n  spec: \"set light color to %1\",\n  inputs: [\"%n\"],\n  shape: \"stack\",\n  category: \"boost\"\n}];\n\n// List of classes we're allowed to override.\n\nconst overrideCategories = [\"motion\", \"looks\", \"sound\", \"variables\", \"list\", \"events\", \"control\", \"sensing\", \"operators\", \"custom\", \"custom-arg\", \"extension\", \"grey\", \"obsolete\", ...Object.keys(extensions), ...Object.keys(aliasExtensions)];\nconst overrideShapes = [\"hat\", \"cap\", \"stack\", \"boolean\", \"reporter\", \"ring\", \"cat\"];\n\n// languages that should be displayed right to left\nconst rtlLanguages = [\"ar\", \"ckb\", \"fa\", \"he\"];\nconst inputNumberPat = /%([0-9]+)/;\nconst inputPat = /(%[a-zA-Z0-9](?:\\.[a-zA-Z0-9]+)?)/;\nconst inputPatGlobal = new RegExp(inputPat.source, \"g\");\nconst iconPat = /(@[a-zA-Z]+)/;\nconst splitPat = new RegExp(`${inputPat.source}|${iconPat.source}| +`, \"g\");\nconst hexColorPat = /^#(?:[0-9a-fA-F]{3}){1,2}?$/;\nfunction parseInputNumber(part) {\n  const m = inputNumberPat.exec(part);\n  return m ? +m[1] : 0;\n}\n\n// used for procDefs\nfunction parseSpec(spec) {\n  const parts = spec.split(splitPat).filter(x => x);\n  const inputs = parts.filter(p => inputPat.test(p));\n  return {\n    spec: spec,\n    parts: parts,\n    inputs: inputs,\n    hash: hashSpec(spec)\n  };\n}\nfunction hashSpec(spec) {\n  return minifyHash(spec.replace(inputPatGlobal, \" _ \"));\n}\nfunction minifyHash(hash) {\n  return hash.replace(/_/g, \" _ \").replace(/ +/g, \" \").replace(/[,%?:]/g, \"\").replace(//g, \"ss\").replace(//g, \"a\").replace(//g, \"o\").replace(//g, \"u\").replace(\". . .\", \"...\").replace(/^$/, \"...\").trim().toLowerCase();\n}\nconst blocksById = {};\nconst allBlocks = scratchCommands.map(def => {\n  if (!def.id) {\n    if (!def.selector) {\n      throw new Error(`Missing ID: ${def.spec}`);\n    }\n    def.id = `sb2:${def.selector}`;\n  }\n  if (!def.spec) {\n    throw new Error(`Missing spec: ${def.id}`);\n  }\n  const info = {\n    id: def.id,\n    // Used for Scratch 3 translations\n    spec: def.spec,\n    // Used for Scratch 2 translations\n    parts: def.spec.split(splitPat).filter(x => x),\n    selector: def.selector || `sb3:${def.id}`,\n    // Used for JSON marshalling\n    inputs: def.inputs == null ? [] : def.inputs,\n    shape: def.shape,\n    category: def.category,\n    hasLoopArrow: !!def.hasLoopArrow\n  };\n  if (blocksById[info.id]) {\n    throw new Error(`Duplicate ID: ${info.id}`);\n  }\n  blocksById[info.id] = info;\n  return info;\n});\nconst unicodeIcons = {\n  \"@greenFlag\": \"\",\n  \"@turnRight\": \"\",\n  \"@turnLeft\": \"\",\n  \"@addInput\": \"\",\n  \"@delInput\": \"\"\n};\nconst allLanguages = {};\nfunction loadLanguage(code, language) {\n  const blocksByHash = language.blocksByHash = {};\n  Object.keys(language.commands).forEach(blockId => {\n    const nativeSpec = language.commands[blockId];\n    const block = blocksById[blockId];\n    const nativeHash = hashSpec(nativeSpec);\n    if (!blocksByHash[nativeHash]) {\n      blocksByHash[nativeHash] = [];\n    }\n    blocksByHash[nativeHash].push(block);\n\n    // fallback image replacement, for languages without aliases\n    const m = iconPat.exec(block.spec);\n    if (m) {\n      const image = m[0];\n      const hash = nativeHash.replace(hashSpec(image), unicodeIcons[image]);\n      if (!blocksByHash[hash]) {\n        blocksByHash[hash] = [];\n      }\n      blocksByHash[hash].push(block);\n    }\n  });\n  language.nativeAliases = {};\n  Object.keys(language.aliases).forEach(alias => {\n    const blockId = language.aliases[alias];\n    const block = blocksById[blockId];\n    if (block === undefined) {\n      throw new Error(`Invalid alias '${blockId}'`);\n    }\n    const aliasHash = hashSpec(alias);\n    if (!blocksByHash[aliasHash]) {\n      blocksByHash[aliasHash] = [];\n    }\n    blocksByHash[aliasHash].push(block);\n    if (!language.nativeAliases[blockId]) {\n      language.nativeAliases[blockId] = [];\n    }\n    language.nativeAliases[blockId].push(alias);\n  });\n\n  // Some English blocks were renamed between Scratch 2 and Scratch 3. Wire them\n  // into language.blocksByHash\n  Object.keys(language.renamedBlocks || {}).forEach(alt => {\n    const id = language.renamedBlocks[alt];\n    if (!blocksById[id]) {\n      throw new Error(`Unknown ID: ${id}`);\n    }\n    const block = blocksById[id];\n    const hash = hashSpec(alt);\n    if (!english.blocksByHash[hash]) {\n      english.blocksByHash[hash] = [];\n    }\n    english.blocksByHash[hash].push(block);\n  });\n  language.nativeDropdowns = {};\n  Object.keys(language.dropdowns).forEach(name => {\n    const nativeName = language.dropdowns[name];\n    language.nativeDropdowns[nativeName] = name;\n  });\n  language.code = code;\n  allLanguages[code] = language;\n}\nfunction loadLanguages(languages) {\n  Object.keys(languages).forEach(code => loadLanguage(code, languages[code]));\n}\nconst english = {\n  aliases: {\n    \"turn ccw %1 degrees\": \"MOTION_TURNLEFT\",\n    \"turn left %1 degrees\": \"MOTION_TURNLEFT\",\n    \"turn cw %1 degrees\": \"MOTION_TURNRIGHT\",\n    \"turn right %1 degrees\": \"MOTION_TURNRIGHT\",\n    \"when flag clicked\": \"EVENT_WHENFLAGCLICKED\",\n    \"when gf clicked\": \"EVENT_WHENFLAGCLICKED\",\n    \"when green flag clicked\": \"EVENT_WHENFLAGCLICKED\"\n  },\n  renamedBlocks: {\n    \"say %1 for %2 secs\": \"LOOKS_SAYFORSECS\",\n    \"think %1 for %2 secs\": \"LOOKS_THINKFORSECS\",\n    \"play sound %1\": \"SOUND_PLAY\",\n    \"wait %1 secs\": \"CONTROL_WAIT\",\n    clear: \"pen.clear\"\n  },\n  definePrefix: [\"define\"],\n  defineSuffix: [],\n  // For ignoring the lt sign in the \"when distance < _\" block\n  ignorelt: [\"when distance\"],\n  // Valid arguments to \"of\" dropdown, for resolving ambiguous situations\n  math: [\"abs\", \"floor\", \"ceiling\", \"sqrt\", \"sin\", \"cos\", \"tan\", \"asin\", \"acos\", \"atan\", \"ln\", \"log\", \"e ^\", \"10 ^\"],\n  // Valid arguments to \"sound effect\" dropdown, for resolving ambiguous situations\n  soundEffects: [\"pitch\", \"pan left/right\"],\n  // Valid arguments to \"microbit when\" dropdown\n  microbitWhen: [\"moved\", \"shaken\", \"jumped\"],\n  // For detecting the \"stop\" cap / stack block\n  osis: [\"other scripts in sprite\", \"other scripts in stage\"],\n  dropdowns: {},\n  commands: {}\n};\nallBlocks.forEach(info => {\n  english.commands[info.id] = info.spec;\n});\nloadLanguages({\n  en: english\n});\n\n/*****************************************************************************/\n\nfunction registerCheck(id, func) {\n  if (!blocksById[id]) {\n    throw new Error(`Unknown ID: ${id}`);\n  }\n  blocksById[id].accepts = func;\n}\nfunction specialCase(id, func) {\n  if (!blocksById[id]) {\n    throw new Error(`Unknown ID: ${id}`);\n  }\n  blocksById[id].specialCase = func;\n}\nfunction disambig(id1, id2, test) {\n  registerCheck(id1, (_, children, lang) => {\n    return test(children, lang);\n  });\n  registerCheck(id2, (_, children, lang) => {\n    return !test(children, lang);\n  });\n}\ndisambig(\"OPERATORS_MATHOP\", \"SENSING_OF\", (children, lang) => {\n  // Operators if math function, otherwise sensing \"attribute of\" block\n  const first = children[0];\n  if (!first.isInput) {\n    return;\n  }\n  const name = first.value;\n  return lang.math.includes(name);\n});\ndisambig(\"SOUND_CHANGEEFFECTBY\", \"LOOKS_CHANGEEFFECTBY\", (children, lang) => {\n  // Sound if sound effect, otherwise default to graphic effect\n  for (const child of children) {\n    if (child.shape === \"dropdown\") {\n      const name = child.value;\n      for (const effect of lang.soundEffects) {\n        if (minifyHash(effect) === minifyHash(name)) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n});\ndisambig(\"SOUND_SETEFFECTO\", \"LOOKS_SETEFFECTTO\", (children, lang) => {\n  // Sound if sound effect, otherwise default to graphic effect\n  for (const child of children) {\n    if (child.shape === \"dropdown\") {\n      const name = child.value;\n      for (const effect of lang.soundEffects) {\n        if (minifyHash(effect) === minifyHash(name)) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n});\ndisambig(\"DATA_LENGTHOFLIST\", \"OPERATORS_LENGTH\", (children, _lang) => {\n  // List block if dropdown, otherwise operators\n  const last = children[children.length - 1];\n  if (!last.isInput) {\n    return;\n  }\n  return last.shape === \"dropdown\";\n});\ndisambig(\"DATA_LISTCONTAINSITEM\", \"OPERATORS_CONTAINS\", (children, _lang) => {\n  // List block if dropdown, otherwise operators\n  const first = children[0];\n  if (!first.isInput) {\n    return;\n  }\n  return first.shape === \"dropdown\";\n});\ndisambig(\"pen.setColor\", \"pen.setHue\", (children, _lang) => {\n  // Color block if color input, otherwise numeric\n  const last = children[children.length - 1];\n  // If variable, assume color input, since the RGBA hack is common.\n  // TODO fix Scratch :P\n  return last.isInput && last.isColor || last.isBlock;\n});\ndisambig(\"microbit.whenGesture\", \"gdxfor.whenGesture\", (children, lang) => {\n  for (const child of children) {\n    if (child.shape === \"dropdown\") {\n      const name = child.value;\n      // Yes, \"when shaken\" gdxfor block exists. But microbit is more common.\n      for (const effect of lang.microbitWhen) {\n        if (minifyHash(effect) === minifyHash(name)) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n});\n\n// This block does not need disambiguation in English;\n// however, many other languages do require that.\ndisambig(\"ev3.buttonPressed\", \"microbit.isButtonPressed\", (children, _lang) => {\n  for (const child of children) {\n    if (child.shape === \"dropdown\") {\n      // EV3 \"button pressed\" block uses numeric identifier\n      // and does not support \"any\".\n      switch (minifyHash(child.value)) {\n        case \"1\":\n        case \"2\":\n        case \"3\":\n        case \"4\":\n          return true;\n      }\n    }\n  }\n  return false;\n});\nspecialCase(\"CONTROL_STOP\", (_, children, lang) => {\n  // Cap block unless argument is \"other scripts in sprite\"\n  const last = children[children.length - 1];\n  if (!last.isInput) {\n    return;\n  }\n  const value = last.value;\n  if (lang.osis.includes(value)) {\n    return {\n      ...blocksById.CONTROL_STOP,\n      shape: \"stack\"\n    };\n  }\n});\nfunction lookupHash(hash, info, children, languages) {\n  for (const lang of languages) {\n    if (Object.prototype.hasOwnProperty.call(lang.blocksByHash, hash)) {\n      const collisions = lang.blocksByHash[hash];\n      for (let block of collisions) {\n        if (info.shape === \"reporter\" && block.shape !== \"reporter\" && block.shape !== \"ring\") {\n          continue;\n        }\n        if (info.shape === \"boolean\" && block.shape !== \"boolean\") {\n          continue;\n        }\n        if (collisions.length > 1) {\n          // Only check in case of collision;\n          // perform \"disambiguation\"\n          if (block.accepts && !block.accepts(info, children, lang)) {\n            continue;\n          }\n        }\n        if (block.specialCase) {\n          block = block.specialCase(info, children, lang) || block;\n        }\n        return {\n          type: block,\n          lang: lang\n        };\n      }\n    }\n  }\n}\nfunction lookupDropdown(name, languages) {\n  for (const lang of languages) {\n    if (Object.prototype.hasOwnProperty.call(lang.nativeDropdowns, name)) {\n      return lang.nativeDropdowns[name];\n    }\n  }\n}\nfunction applyOverrides(info, overrides) {\n  for (const name of overrides) {\n    if (hexColorPat.test(name)) {\n      info.color = name;\n      info.category = \"\";\n      info.categoryIsDefault = false;\n    } else if (overrideCategories.includes(name)) {\n      info.category = name;\n      info.categoryIsDefault = false;\n    } else if (overrideShapes.includes(name)) {\n      info.shape = name;\n    } else if (name === \"loop\") {\n      info.hasLoopArrow = true;\n    } else if (name === \"+\" || name === \"-\") {\n      info.diff = name;\n    }\n  }\n}\nfunction blockName(block) {\n  const words = [];\n  for (const child of block.children) {\n    if (!child.isLabel) {\n      return;\n    }\n    words.push(child.value);\n  }\n  return words.join(\" \");\n}\nfunction assert$2(bool, message) {\n  if (!bool) {\n    throw new Error(`Assertion failed! ${message || \"\"}`);\n  }\n}\nfunction indent(text) {\n  return text.split(\"\\n\").map(line => {\n    return `  ${line}`;\n  }).join(\"\\n\");\n}\nclass Label {\n  constructor(value, cls) {\n    this.value = value;\n    this.cls = cls || \"\";\n    this.el = null;\n    this.height = 12;\n    this.metrics = null;\n    this.x = 0;\n  }\n  get isLabel() {\n    return true;\n  }\n  stringify() {\n    if (this.value === \"<\" || this.value === \">\") {\n      return this.value;\n    }\n    return this.value.replace(/([<>[\\](){}])/g, \"\\\\$1\");\n  }\n}\nclass Icon {\n  constructor(name) {\n    this.name = name;\n    this.isArrow = name === \"loopArrow\";\n    assert$2(Icon.icons[name], `no info for icon ${name}`);\n  }\n  get isIcon() {\n    return true;\n  }\n  static get icons() {\n    return {\n      greenFlag: true,\n      stopSign: true,\n      turnLeft: true,\n      turnRight: true,\n      loopArrow: true,\n      addInput: true,\n      delInput: true,\n      list: true\n    };\n  }\n  stringify() {\n    return unicodeIcons[`@${this.name}`] || \"\";\n  }\n}\nclass Input {\n  constructor(shape, value, menu) {\n    this.shape = shape;\n    this.value = value;\n    this.menu = menu || null;\n    this.isRound = shape === \"number\" || shape === \"number-dropdown\";\n    this.isBoolean = shape === \"boolean\";\n    this.isStack = shape === \"stack\";\n    this.isInset = shape === \"boolean\" || shape === \"stack\" || shape === \"reporter\";\n    this.isColor = shape === \"color\";\n    this.hasArrow = shape === \"dropdown\" || shape === \"number-dropdown\";\n    this.isDarker = shape === \"boolean\" || shape === \"stack\" || shape === \"dropdown\";\n    this.isSquare = shape === \"string\" || shape === \"color\" || shape === \"dropdown\";\n    this.hasLabel = !(this.isColor || this.isInset);\n    this.label = this.hasLabel ? new Label(value, `literal-${this.shape}`) : null;\n    this.x = 0;\n  }\n  get isInput() {\n    return true;\n  }\n  stringify() {\n    if (this.isColor) {\n      assert$2(this.value[0] === \"#\");\n      return `[${this.value}]`;\n    }\n    // Order sensitive; see #439\n    let text = (this.value ? String(this.value) : \"\").replace(/([\\]\\\\])/g, \"\\\\$1\").replace(/ v$/, \" \\\\v\");\n    if (this.hasArrow) {\n      text += \" v\";\n    }\n    return this.isRound ? `(${text})` : this.isSquare ? `[${text}]` : this.isBoolean ? \"<>\" : this.isStack ? \"{}\" : text;\n  }\n  translate(_lang) {\n    if (this.hasArrow) {\n      const value = this.menu || this.value;\n      this.value = value; // TODO translate dropdown value\n      this.label = new Label(this.value, `literal-${this.shape}`);\n    }\n  }\n}\nclass Block {\n  constructor(info, children, comment) {\n    assert$2(info);\n    this.info = {\n      ...info\n    };\n    this.children = children;\n    this.comment = comment || null;\n    this.diff = null;\n    const shape = this.info.shape;\n    this.isHat = shape === \"hat\" || shape === \"cat\" || shape === \"define-hat\";\n    this.hasPuzzle = shape === \"stack\" || shape === \"hat\" || shape === \"cat\" || shape === \"c-block\";\n    this.isFinal = /cap/.test(shape);\n    this.isCommand = shape === \"stack\" || shape === \"cap\" || /block/.test(shape);\n    this.isOutline = shape === \"outline\";\n    this.isReporter = shape === \"reporter\";\n    this.isBoolean = shape === \"boolean\";\n    this.isRing = shape === \"ring\";\n    this.hasScript = /block/.test(shape);\n    this.isElse = shape === \"celse\";\n    this.isEnd = shape === \"cend\";\n  }\n  get isBlock() {\n    return true;\n  }\n  stringify(extras) {\n    let firstInput = null;\n    let checkAlias = false;\n    let text = this.children.map(child => {\n      if (child.isIcon) {\n        checkAlias = true;\n      }\n      if (!firstInput && !(child.isLabel || child.isIcon)) {\n        firstInput = child;\n      }\n      return child.isScript ? `\\n${indent(child.stringify())}\\n` : child.stringify().trim() + \" \";\n    }).join(\"\").trim();\n    const lang = this.info.language;\n    if (checkAlias && lang && this.info.selector) {\n      const aliases = lang.nativeAliases[this.info.id];\n      if (aliases && aliases.length) {\n        let alias = aliases[0];\n        // TODO make translate() not in-place, and use that\n        if (inputPat.test(alias) && firstInput) {\n          alias = alias.replace(inputPat, firstInput.stringify());\n        }\n        return alias;\n      }\n    }\n    let overrides = extras || \"\";\n    if (this.info.categoryIsDefault === false || this.info.category === \"custom-arg\" && (this.isReporter || this.isBoolean) || this.info.category === \"custom\" && this.info.shape === \"stack\") {\n      if (overrides) {\n        overrides += \" \";\n      }\n      overrides += this.info.category;\n    }\n    if (overrides) {\n      text += ` :: ${overrides}`;\n    }\n    return this.hasScript ? text + \"\\nend\" : this.info.shape === \"reporter\" ? `(${text})` : this.info.shape === \"boolean\" ? `<${text}>` : text;\n  }\n  translate(lang, isShallow) {\n    if (!lang) {\n      throw new Error(\"Missing language\");\n    }\n    const id = this.info.id;\n    if (!id) {\n      return;\n    }\n    if (id === \"PROCEDURES_DEFINITION\") {\n      // Find the first 'outline' child (there should be exactly one).\n      const outline = this.children.find(child => child.isOutline);\n      this.children = [];\n      for (const word of lang.definePrefix) {\n        this.children.push(new Label(word));\n      }\n      this.children.push(outline);\n      for (const word of lang.defineSuffix) {\n        this.children.push(new Label(word));\n      }\n      return;\n    }\n    const oldSpec = this.info.language.commands[id];\n    const nativeSpec = lang.commands[id];\n    if (!nativeSpec) {\n      return;\n    }\n    const nativeInfo = parseSpec(nativeSpec);\n    const rawArgs = this.children.filter(child => !child.isLabel && !child.isIcon);\n    if (!isShallow) {\n      rawArgs.forEach(child => child.translate(lang));\n    }\n\n    // Work out indexes of existing children\n    const oldParts = parseSpec(oldSpec).parts;\n    const oldInputOrder = oldParts.map(part => parseInputNumber(part)).filter(x => x);\n    let highestNumber = 0;\n    const args = oldInputOrder.map(number => {\n      highestNumber = Math.max(highestNumber, number);\n      return rawArgs[number - 1];\n    });\n    const remainingArgs = rawArgs.slice(highestNumber);\n\n    // Get new children by index\n    this.children = nativeInfo.parts.map(part => {\n      part = part.trim();\n      if (!part) {\n        return;\n      }\n      const number = parseInputNumber(part);\n      if (number) {\n        return args[number - 1];\n      }\n      return iconPat.test(part) ? new Icon(part.slice(1)) : new Label(part);\n    }).filter(x => x);\n\n    // Push any remaining children, so we pick up C block bodies\n    remainingArgs.forEach((arg, index) => {\n      if (index === 1 && this.info.id === \"CONTROL_IF\") {\n        this.children.push(new Label(lang.commands.CONTROL_ELSE));\n      }\n      this.children.push(arg);\n    });\n    this.info.language = lang;\n    this.info.isRTL = rtlLanguages.includes(lang.code);\n    this.info.categoryIsDefault = true;\n  }\n}\nclass Comment {\n  constructor(value, hasBlock) {\n    this.label = new Label(value, \"comment-label\");\n    this.width = null;\n    this.hasBlock = hasBlock;\n  }\n  get isComment() {\n    return true;\n  }\n  stringify() {\n    return `// ${this.label.value}`;\n  }\n}\nclass Glow {\n  constructor(child) {\n    assert$2(child);\n    this.child = child;\n    if (child.isBlock) {\n      this.shape = child.info.shape;\n      this.info = child.info;\n    } else {\n      this.shape = \"stack\";\n    }\n  }\n  get isGlow() {\n    return true;\n  }\n  stringify() {\n    if (this.child.isBlock) {\n      return this.child.stringify(\"+\");\n    }\n    const lines = this.child.stringify().split(\"\\n\");\n    return lines.map(line => `+ ${line}`).join(\"\\n\");\n  }\n  translate(lang) {\n    this.child.translate(lang);\n  }\n}\nclass Script {\n  constructor(blocks) {\n    this.blocks = blocks;\n    this.isEmpty = !blocks.length;\n    this.isFinal = !this.isEmpty && blocks[blocks.length - 1].isFinal;\n  }\n  get isScript() {\n    return true;\n  }\n  stringify() {\n    return this.blocks.map(block => {\n      let line = block.stringify();\n      if (block.comment) {\n        line += ` ${block.comment.stringify()}`;\n      }\n      return line;\n    }).join(\"\\n\");\n  }\n  translate(lang) {\n    this.blocks.forEach(block => block.translate(lang));\n  }\n}\nclass Document {\n  constructor(scripts) {\n    this.scripts = scripts;\n  }\n  stringify() {\n    return this.scripts.map(script => script.stringify()).join(\"\\n\\n\");\n  }\n  translate(lang) {\n    this.scripts.forEach(script => script.translate(lang));\n  }\n}\nfunction assert$1(bool, message) {\n  if (!bool) {\n    throw new Error(`Assertion failed! ${message || \"\"}`);\n  }\n}\nfunction paintBlock(info, children, languages) {\n  let overrides = [];\n  if (Array.isArray(children[children.length - 1])) {\n    overrides = children.pop();\n  }\n\n  // build hash\n  const words = [];\n  for (const child of children) {\n    if (child.isLabel) {\n      words.push(child.value);\n    } else if (child.isIcon) {\n      words.push(`@${child.name}`);\n    } else {\n      words.push(\"_\");\n    }\n  }\n  const string = words.join(\" \");\n  const shortHash = info.hash = minifyHash(string);\n\n  // paint\n  const o = lookupHash(shortHash, info, children, languages);\n  let lang;\n  let type;\n  if (o) {\n    lang = o.lang;\n    type = o.type;\n    info.language = lang;\n    info.isRTL = rtlLanguages.includes(lang.code);\n    if (type.shape === \"ring\" ? info.shape === \"reporter\" : info.shape === \"stack\") {\n      info.shape = type.shape;\n    }\n    info.category = type.category;\n    info.categoryIsDefault = true;\n    // store selector, used for translation among other things\n    if (type.selector) {\n      info.selector = type.selector;\n    }\n    if (type.id) {\n      info.id = type.id;\n    }\n    info.hasLoopArrow = type.hasLoopArrow;\n\n    // ellipsis block\n    if (type.spec === \". . .\") {\n      children = [new Label(\". . .\")];\n    }\n  } else {\n    // The block was not recognised, so we check if it's a define block.\n    //\n    // We check for built-in blocks first to avoid ambiguity, e.g. the\n    // `defina o tamanho como (100) %` block in pt_BR.\n    for (const lang of languages) {\n      if (!isDefineBlock(children, lang)) {\n        continue;\n      }\n\n      // Setting the shape also triggers some logic in recogniseStuff.\n      info.shape = \"define-hat\";\n      info.category = \"custom\";\n\n      // Move the children of the define block into an \"outline\", transforming\n      // () and [] shapes as we go.\n      const outlineChildren = children.splice(lang.definePrefix.length, children.length - lang.defineSuffix.length).map(child => {\n        if (child.isInput && child.isBoolean) {\n          // Convert empty boolean slot to empty boolean argument.\n          child = paintBlock({\n            shape: \"boolean\",\n            argument: \"boolean\",\n            category: \"custom-arg\"\n          }, [new Label(\"\")], languages);\n        } else if (child.isInput && (child.shape === \"string\" || child.shape === \"number\")) {\n          // Convert string inputs to string arguments, number inputs to number arguments.\n          const labels = child.value.split(/ +/g).map(word => new Label(word));\n          child = paintBlock({\n            shape: \"reporter\",\n            argument: child.shape === \"string\" ? \"string\" : \"number\",\n            category: \"custom-arg\"\n          }, labels, languages);\n        } else if (child.isReporter || child.isBoolean) {\n          // Convert variables to number arguments, predicates to boolean arguments.\n          if (child.info.categoryIsDefault) {\n            child.info.category = \"custom-arg\";\n            child.info.argument = child.isBoolean ? \"boolean\" : \"number\";\n          }\n        }\n        return child;\n      });\n      const outlineInfo = {\n        shape: \"outline\",\n        category: \"custom\",\n        categoryIsDefault: true,\n        hasLoopArrow: false\n      };\n      const outline = new Block(outlineInfo, outlineChildren);\n      children.splice(lang.definePrefix.length, 0, outline);\n      break;\n    }\n  }\n\n  // Apply overrides.\n  applyOverrides(info, overrides);\n\n  // loop arrows\n  if (info.hasLoopArrow) {\n    children.push(new Icon(\"loopArrow\"));\n  }\n  const block = new Block(info, children);\n\n  // image replacement\n  if (type && iconPat.test(type.spec)) {\n    block.translate(lang, true);\n  }\n\n  // diffs\n  if (info.diff === \"+\") {\n    return new Glow(block);\n  }\n  block.diff = info.diff;\n  return block;\n}\nfunction isDefineBlock(children, lang) {\n  if (children.length < lang.definePrefix.length) {\n    return false;\n  }\n  if (children.length < lang.defineSuffix.length) {\n    return false;\n  }\n  for (let i = 0; i < lang.definePrefix.length; i++) {\n    const defineWord = lang.definePrefix[i];\n    const child = children[i];\n    if (!child.isLabel || minifyHash(child.value) !== minifyHash(defineWord)) {\n      return false;\n    }\n  }\n  for (let i = 1; i <= lang.defineSuffix.length; i++) {\n    const defineWord = lang.defineSuffix[lang.defineSuffix.length - i];\n    const child = children[children.length - i];\n    if (!child.isLabel || minifyHash(child.value) !== minifyHash(defineWord)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction parseLines(code, languages) {\n  let tok = code[0];\n  let index = 0;\n  function next() {\n    tok = code[++index];\n  }\n  function peek() {\n    return code[index + 1];\n  }\n  function peekNonWs() {\n    for (let i = index + 1; i < code.length; i++) {\n      if (code[i] !== \" \") {\n        return code[i];\n      }\n    }\n  }\n  let sawNL;\n  let define = [];\n  languages.map(lang => {\n    define = define.concat(lang.define);\n  });\n  function makeBlock(shape, children) {\n    const hasInputs = children.filter(x => !x.isLabel).length;\n    const info = {\n      shape: shape,\n      category: shape === \"reporter\" && !hasInputs ? \"variables\" : \"obsolete\",\n      categoryIsDefault: true,\n      hasLoopArrow: false\n    };\n    return paintBlock(info, children, languages);\n  }\n  function makeMenu(shape, value) {\n    const menu = lookupDropdown(value, languages) || value;\n    return new Input(shape, value, menu);\n  }\n  function pParts(end) {\n    const children = [];\n    let label;\n    while (tok && tok !== \"\\n\") {\n      // So that comparison operators `<()<()>` and `<()>()>` don't need the\n      // central <> escaped, we interpret it as a label if particular\n      // conditions are met.\n      if ((tok === \"<\" || tok === \">\") && end === \">\" &&\n      // We're parsing a predicate.\n      children.length === 1 &&\n      // There's exactly one AST node behind us.\n      !children[children.length - 1].isLabel // That node is not a label.\n      ) {\n        const c = peekNonWs();\n        // The next token starts some kind of input.\n        if (c === \"[\" || c === \"(\" || c === \"<\" || c === \"{\") {\n          label = null;\n          children.push(new Label(tok));\n          next();\n          continue;\n        }\n      }\n      if (tok === end) {\n        break;\n      }\n      if (tok === \"/\" && peek() === \"/\" && !end) {\n        break;\n      }\n      switch (tok) {\n        case \"[\":\n          label = null;\n          children.push(pString());\n          break;\n        case \"(\":\n          label = null;\n          children.push(pReporter());\n          break;\n        case \"<\":\n          label = null;\n          children.push(pPredicate());\n          break;\n        case \"{\":\n          label = null;\n          children.push(pEmbedded());\n          break;\n        case \" \":\n        case \"\\t\":\n          next(); // Skip over whitespace.\n          label = null;\n          break;\n        case \"\":\n        case \"\":\n          children.push(pIcon());\n          label = null;\n          break;\n        case \"@\":\n          {\n            next();\n            let name = \"\";\n            while (tok && /[a-zA-Z]/.test(tok)) {\n              name += tok;\n              next();\n            }\n            if (name === \"cloud\") {\n              children.push(new Label(\"\"));\n            } else {\n              children.push(Object.prototype.hasOwnProperty.call(Icon.icons, name) ? new Icon(name) : new Label(`@${name}`));\n            }\n            label = null;\n            break;\n          }\n        case \"\\\\\":\n          next();\n        // escape character\n        // fallthrough\n        case \":\":\n          if (tok === \":\" && peek() === \":\") {\n            children.push(pOverrides(end));\n            return children;\n          }\n        // fallthrough\n        default:\n          if (!label) {\n            children.push(label = new Label(\"\"));\n          }\n          label.value += tok;\n          next();\n      }\n    }\n    return children;\n  }\n  function pString() {\n    next(); // '['\n    let s = \"\";\n    let escapeV = false;\n    while (tok && tok !== \"]\" && tok !== \"\\n\") {\n      if (tok === \"\\\\\") {\n        next();\n        if (tok === \"v\") {\n          escapeV = true;\n        }\n        if (!tok) {\n          break;\n        }\n      } else {\n        escapeV = false;\n      }\n      s += tok;\n      next();\n    }\n    if (tok === \"]\") {\n      next();\n    }\n    if (hexColorPat.test(s)) {\n      return new Input(\"color\", s);\n    }\n    return !escapeV && / v$/.test(s) ? makeMenu(\"dropdown\", s.slice(0, s.length - 2)) : new Input(\"string\", s);\n  }\n  function pBlock(end) {\n    const children = pParts(end);\n    if (tok && tok === \"\\n\") {\n      sawNL = true;\n      next();\n    }\n    if (children.length === 0) {\n      return;\n    }\n\n    // standalone reporters\n    if (children.length === 1) {\n      const child = children[0];\n      if (child.isBlock && (child.isReporter || child.isBoolean || child.isRing)) {\n        return child;\n      }\n    }\n    return makeBlock(\"stack\", children);\n  }\n  function pReporter() {\n    next(); // '('\n\n    // empty number-dropdown\n    if (tok === \" \") {\n      next();\n      if (tok === \"v\" && peek() === \")\") {\n        next();\n        next();\n        return new Input(\"number-dropdown\", \"\");\n      }\n    }\n    const children = pParts(\")\");\n    if (tok && tok === \")\") {\n      next();\n    }\n\n    // empty numbers\n    if (children.length === 0) {\n      return new Input(\"number\", \"\");\n    }\n\n    // number\n    if (children.length === 1 && children[0].isLabel) {\n      const value = children[0].value;\n      if (/^[0-9e.-]*$/.test(value)) {\n        return new Input(\"number\", value);\n      }\n      if (hexColorPat.test(value)) {\n        return new Input(\"color\", value);\n      }\n    }\n\n    // number-dropdown\n    if (children.length > 1 && children.every(child => child.isLabel)) {\n      const last = children[children.length - 1];\n      if (last.value === \"v\") {\n        children.pop();\n        const value = children.map(l => l.value).join(\" \");\n        return makeMenu(\"number-dropdown\", value);\n      }\n    }\n    const block = makeBlock(\"reporter\", children);\n\n    // rings\n    if (block.info && block.info.shape === \"ring\") {\n      const first = block.children[0];\n      if (first && first.isInput && first.shape === \"number\" && first.value === \"\") {\n        block.children[0] = new Input(\"reporter\");\n      } else if (first && first.isScript && first.isEmpty || first && first.isBlock && !first.children.length) {\n        block.children[0] = new Input(\"stack\");\n      }\n    }\n    return block;\n  }\n  function pPredicate() {\n    next(); // '<'\n    const children = pParts(\">\");\n    if (tok && tok === \">\") {\n      next();\n    }\n    if (children.length === 0) {\n      return new Input(\"boolean\");\n    }\n    return makeBlock(\"boolean\", children);\n  }\n  function pEmbedded() {\n    next(); // '{'\n\n    sawNL = false;\n    const f = function () {\n      while (tok && tok !== \"}\") {\n        const block = pBlock(\"}\");\n        if (block) {\n          return block;\n        }\n      }\n    };\n    const scripts = parseScripts(f);\n    let blocks = [];\n    scripts.forEach(script => {\n      blocks = blocks.concat(script.blocks);\n    });\n    if (tok === \"}\") {\n      next();\n    }\n    if (!sawNL) {\n      assert$1(blocks.length <= 1);\n      return blocks.length ? blocks[0] : makeBlock(\"stack\", []);\n    }\n    return new Script(blocks);\n  }\n  function pIcon() {\n    const c = tok;\n    next();\n    switch (c) {\n      case \"\":\n        return new Icon(\"addInput\");\n      case \"\":\n        return new Icon(\"delInput\");\n      default:\n        return;\n    }\n  }\n  function pOverrides(end) {\n    next();\n    next();\n    const overrides = [];\n    let override = \"\";\n    while (tok && tok !== \"\\n\" && tok !== end) {\n      if (tok === \" \") {\n        if (override) {\n          overrides.push(override);\n          override = \"\";\n        }\n      } else if (tok === \"/\" && peek() === \"/\") {\n        break;\n      } else {\n        override += tok;\n      }\n      next();\n    }\n    if (override) {\n      overrides.push(override);\n    }\n    return overrides;\n  }\n  function pComment(end) {\n    next();\n    next();\n    let comment = \"\";\n    while (tok && tok !== \"\\n\" && tok !== end) {\n      comment += tok;\n      next();\n    }\n    if (tok && tok === \"\\n\") {\n      next();\n    }\n    return new Comment(comment, true);\n  }\n  function pLine() {\n    let diff;\n    if (tok === \"+\" || tok === \"-\") {\n      diff = tok;\n      next();\n    }\n    const block = pBlock();\n    if (tok === \"/\" && peek() === \"/\") {\n      const comment = pComment();\n      comment.hasBlock = block && block.children.length;\n      if (!comment.hasBlock) {\n        return comment;\n      }\n      block.comment = comment;\n    }\n    if (block) {\n      block.diff = diff;\n    }\n    return block;\n  }\n  return () => {\n    if (!tok) {\n      return undefined;\n    }\n    const line = pLine();\n    return line || \"NL\";\n  };\n}\n\n/* * */\n\nfunction parseScripts(getLine) {\n  let line = getLine();\n  function next() {\n    line = getLine();\n  }\n  function pFile() {\n    while (line === \"NL\") {\n      next();\n    }\n    const scripts = [];\n    while (line) {\n      let blocks = [];\n      while (line && line !== \"NL\") {\n        let b = pLine();\n        const isGlow = b.diff === \"+\";\n        if (isGlow) {\n          b.diff = null;\n        }\n        if (b.isElse || b.isEnd) {\n          b = new Block({\n            ...b.info,\n            shape: \"stack\"\n          }, b.children);\n        }\n        if (isGlow) {\n          const last = blocks[blocks.length - 1];\n          let children = [];\n          if (last && last.isGlow) {\n            blocks.pop();\n            children = last.child.isScript ? last.child.blocks : [last.child];\n          }\n          children.push(b);\n          blocks.push(new Glow(new Script(children)));\n        } else if (b.isHat) {\n          if (blocks.length) {\n            scripts.push(new Script(blocks));\n          }\n          blocks = [b];\n        } else if (b.isFinal) {\n          blocks.push(b);\n          break;\n        } else if (b.isCommand) {\n          blocks.push(b);\n        } else {\n          // reporter or predicate\n          if (blocks.length) {\n            scripts.push(new Script(blocks));\n          }\n          scripts.push(new Script([b]));\n          blocks = [];\n          break;\n        }\n      }\n      if (blocks.length) {\n        scripts.push(new Script(blocks));\n      }\n      while (line === \"NL\") {\n        next();\n      }\n    }\n    return scripts;\n  }\n  function pLine() {\n    const b = line;\n    next();\n    if (b.hasScript) {\n      while (true) {\n        const blocks = pMouth();\n        b.children.push(new Script(blocks));\n        if (line && line.isElse) {\n          for (const child of line.children) {\n            b.children.push(child);\n          }\n          next();\n          continue;\n        }\n        if (line && line.isEnd) {\n          next();\n        }\n        break;\n      }\n    }\n    return b;\n  }\n  function pMouth() {\n    const blocks = [];\n    while (line) {\n      if (line === \"NL\") {\n        next();\n        continue;\n      }\n      if (!line.isCommand) {\n        return blocks;\n      }\n      const b = pLine();\n      const isGlow = b.diff === \"+\";\n      if (isGlow) {\n        b.diff = null;\n      }\n      if (isGlow) {\n        const last = blocks[blocks.length - 1];\n        let children = [];\n        if (last && last.isGlow) {\n          blocks.pop();\n          children = last.child.isScript ? last.child.blocks : [last.child];\n        }\n        children.push(b);\n        blocks.push(new Glow(new Script(children)));\n      } else {\n        blocks.push(b);\n      }\n    }\n    return blocks;\n  }\n  return pFile();\n}\n\n/* * */\n\nfunction eachBlock(x, cb) {\n  if (x.isScript) {\n    x.blocks = x.blocks.map(block => {\n      eachBlock(block, cb);\n      return cb(block) || block;\n    });\n  } else if (x.isBlock) {\n    x.children = x.children.map(child => {\n      eachBlock(child, cb);\n      return cb(child) || child;\n    });\n  } else if (x.isGlow) {\n    eachBlock(x.child, cb);\n  }\n}\nconst listBlocks = {\n  \"append:toList:\": 1,\n  \"deleteLine:ofList:\": 1,\n  \"insert:at:ofList:\": 2,\n  \"setLine:ofList:to:\": 1,\n  \"showList:\": 0,\n  \"hideList:\": 0\n};\nfunction recogniseStuff(scripts) {\n  const customBlocksByHash = Object.create(null);\n  const listNames = new Set();\n  scripts.forEach(script => {\n    const customArgs = new Set();\n    eachBlock(script, block => {\n      if (!block.isBlock) {\n        return;\n      }\n\n      // custom blocks\n      if (block.info.shape === \"define-hat\") {\n        // There should be exactly one `outline` child, added in paintBlock.\n        const outline = block.children.find(child => child.isOutline);\n        if (!outline) {\n          return;\n        }\n        const names = [];\n        const parts = [];\n        for (const child of outline.children) {\n          if (child.isLabel) {\n            parts.push(child.value);\n          } else if (child.isBlock) {\n            if (!child.info.argument) {\n              return;\n            }\n            parts.push({\n              number: \"%n\",\n              string: \"%s\",\n              boolean: \"%b\"\n            }[child.info.argument]);\n            const name = blockName(child);\n            names.push(name);\n            customArgs.add(name);\n          }\n        }\n        const spec = parts.join(\" \");\n        const hash = hashSpec(spec);\n        const info = {\n          spec: spec,\n          names: names\n        };\n        if (!customBlocksByHash[hash]) {\n          customBlocksByHash[hash] = info;\n        }\n        block.info.id = \"PROCEDURES_DEFINITION\";\n        block.info.selector = \"procDef\";\n        block.info.call = info.spec;\n        block.info.names = info.names;\n        block.info.category = \"custom\";\n\n        // custom arguments\n      } else if (block.info.categoryIsDefault && (block.isReporter || block.isBoolean)) {\n        const name = blockName(block);\n        if (customArgs.has(name)) {\n          block.info.category = \"custom-arg\";\n          block.info.categoryIsDefault = false;\n          block.info.selector = \"getParam\";\n        }\n\n        // list names\n      } else if (Object.prototype.hasOwnProperty.call(listBlocks, block.info.selector)) {\n        const argIndex = listBlocks[block.info.selector];\n        const inputs = block.children.filter(child => !child.isLabel);\n        const input = inputs[argIndex];\n        if (input && input.isInput) {\n          listNames.add(input.value);\n        }\n      }\n    });\n  });\n  scripts.forEach(script => {\n    eachBlock(script, block => {\n      if (block.info && block.info.categoryIsDefault && block.info.category === \"obsolete\") {\n        // custom blocks\n        const info = customBlocksByHash[block.info.hash];\n        if (info) {\n          block.info.selector = \"call\";\n          block.info.call = info.spec;\n          block.info.names = info.names;\n          block.info.category = \"custom\";\n        }\n        return;\n      }\n      let name, info;\n      if (block.isReporter && block.info.category === \"variables\" && block.info.categoryIsDefault) {\n        // We set the selector here for some reason\n        block.info.selector = \"readVariable\";\n        name = blockName(block);\n        info = block.info;\n      }\n      if (!name) {\n        return;\n      }\n\n      // list reporters\n      if (listNames.has(name)) {\n        info.category = \"list\";\n        info.categoryIsDefault = false;\n        info.selector = \"contentsOfList:\";\n      }\n      return; // already done\n    });\n  });\n}\nfunction parse(code, options) {\n  options = {\n    inline: false,\n    languages: [\"en\"],\n    ...options\n  };\n  if (options.dialect) {\n    throw new Error(\"Option 'dialect' no longer supported\");\n  }\n  code = code.replace(/&lt;/g, \"<\");\n  code = code.replace(/&gt;/g, \">\");\n  if (options.inline) {\n    code = code.replace(/\\n/g, \" \");\n  }\n  const languages = options.languages.map(code => {\n    const lang = allLanguages[code];\n    if (!lang) {\n      throw new Error(`Unknown language: '${code}'`);\n    }\n    return lang;\n  });\n\n  /* * */\n\n  const f = parseLines(code, languages);\n  const scripts = parseScripts(f);\n  recogniseStuff(scripts);\n  return new Document(scripts);\n}\n\n/* for constructing SVGs */\n\nfunction assert(bool, message) {\n  if (!bool) {\n    throw new Error(`Assertion failed! ${message || \"\"}`);\n  }\n}\n\n// set by SVG.init\nlet document$1;\nlet xml$1;\nconst directProps$1 = {\n  textContent: true\n};\nlet SVG$1 = class SVG {\n  static init(window) {\n    document$1 = window.document;\n    const DOMParser = window.DOMParser;\n    xml$1 = new DOMParser().parseFromString(\"<xml></xml>\", \"application/xml\");\n    SVG.XMLSerializer = window.XMLSerializer;\n  }\n  static makeCanvas() {\n    return document$1.createElement(\"canvas\");\n  }\n  static cdata(content) {\n    return xml$1.createCDATASection(content);\n  }\n  static el(name, props) {\n    const el = document$1.createElementNS(\"http://www.w3.org/2000/svg\", name);\n    return SVG.setProps(el, props);\n  }\n  static setProps(el, props) {\n    for (const key in props) {\n      const value = String(props[key]);\n      if (directProps$1[key]) {\n        el[key] = value;\n      } else if (props[key] != null && Object.prototype.hasOwnProperty.call(props, key)) {\n        el.setAttributeNS(null, key, value);\n      }\n    }\n    return el;\n  }\n  static withChildren(el, children) {\n    for (const child of children) {\n      el.appendChild(child);\n    }\n    return el;\n  }\n  static group(children) {\n    return SVG.withChildren(SVG.el(\"g\"), children);\n  }\n  static newSVG(width, height, scale) {\n    return SVG.el(\"svg\", {\n      version: \"1.1\",\n      width: width * scale,\n      height: height * scale,\n      viewBox: `0 0 ${width} ${height}`\n    });\n  }\n  static polygon(props) {\n    return SVG.el(\"polygon\", {\n      ...props,\n      points: props.points.join(\" \")\n    });\n  }\n  static path(props) {\n    return SVG.el(\"path\", {\n      ...props,\n      path: null,\n      d: props.path.join(\" \")\n    });\n  }\n  static text(x, y, content, props) {\n    const text = SVG.el(\"text\", {\n      ...props,\n      x: x,\n      y: y,\n      textContent: content\n    });\n    return text;\n  }\n  static symbol(href) {\n    return SVG.el(\"use\", {\n      href: href\n    });\n  }\n  static move(dx, dy, el) {\n    SVG.setProps(el, {\n      transform: `translate(${dx} ${dy})`\n    });\n    return el;\n  }\n\n  // translatePath takes a path string such as \"M 0 0 L 0 10 L 10 0 Z\", fins\n  // the individual X/Y components, and translates them by dx/dy, so as to\n  // \"move\" the path.\n  //\n  // This is not a particularly good way of doing this, but given we control\n  // the inputs to it it works well enough I guess?\n  static translatePath(dx, dy, path) {\n    let isX = true;\n    const parts = path.split(/\\s+/);\n    const out = [];\n    for (let i = 0; i < parts.length; i++) {\n      let part = parts[i];\n      if (part === \"A\") {\n        const j = i + 5;\n        out.push(\"A\");\n        while (i < j) {\n          out.push(parts[++i]);\n        }\n        continue;\n      } else if (/[A-Za-z]/.test(part)) {\n        // This assertion means the path was not a valid sequence of\n        // [operation, X coordinate, Y coordinate, ...].\n        //\n        // It could indicate missing whitespace between the coordinates and the\n        // operation.\n        assert(isX, \"translatePath: invalid argument\");\n      } else {\n        part = +part;\n        part += isX ? dx : dy;\n        isX = !isX;\n      }\n      out.push(part);\n    }\n    return out.join(\" \");\n  }\n\n  /* shapes */\n\n  static rect(w, h, props) {\n    return SVG.el(\"rect\", {\n      ...props,\n      x: 0,\n      y: 0,\n      width: w,\n      height: h\n    });\n  }\n  static ellipse(w, h, props) {\n    return SVG.el(\"ellipse\", {\n      ...props,\n      cx: w / 2,\n      cy: h / 2,\n      rx: w / 2,\n      ry: h / 2\n    });\n  }\n  static arc(p1x, p1y, p2x, p2y, rx, ry) {\n    return `L ${p1x} ${p1y} A ${rx} ${ry} 0 0 1 ${p2x} ${p2y}`;\n  }\n  static arcw(p1x, p1y, p2x, p2y, rx, ry) {\n    return `L ${p1x} ${p1y} A ${rx} ${ry} 0 0 0 ${p2x} ${p2y}`;\n  }\n  static roundedPath(w, h) {\n    const r = h / 2;\n    return [\"M\", r, 0, SVG.arc(w - r, 0, w - r, h, r, r), SVG.arc(r, h, r, 0, r, r), \"Z\"];\n  }\n  static roundedRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: SVG.roundedPath(w, h)\n    });\n  }\n  static pointedPath(w, h) {\n    const r = h / 2;\n    return [\"M\", r, 0, \"L\", w - r, 0, w, r, \"L\", w, r, w - r, h, \"L\", r, h, 0, r, \"L\", 0, r, r, 0, \"Z\"];\n  }\n  static pointedRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: SVG.pointedPath(w, h)\n    });\n  }\n  static getTop(w) {\n    return `M 0 3\n      L 3 0\n      L 13 0\n      L 16 3\n      L 24 3\n      L 27 0\n      L ${w - 3} 0\n      L ${w} 3`;\n  }\n  static getRingTop(w) {\n    return `M 0 3\n      L 3 0\n      L 7 0\n      L 10 3\n      L 16 3\n      L 19 0\n      L ${w - 3} 0\n      L ${w} 3`;\n  }\n  static getRightAndBottom(w, y, hasNotch, inset) {\n    if (typeof inset === \"undefined\") {\n      inset = 0;\n    }\n    let arr = [\"L\", w, y - 3, \"L\", w - 3, y];\n    if (hasNotch) {\n      arr = arr.concat([\"L\", inset + 27, y, \"L\", inset + 24, y + 3, \"L\", inset + 16, y + 3, \"L\", inset + 13, y]);\n    }\n    if (inset > 0) {\n      arr = arr.concat([\"L\", inset + 2, y, \"L\", inset, y + 2]);\n    } else {\n      arr = arr.concat([\"L\", inset + 3, y, \"L\", 0, y - 3]);\n    }\n    return arr.join(\" \");\n  }\n  static getArm(w, armTop) {\n    return `L 15 ${armTop - 2}\n      L 17 ${armTop}\n      L ${w - 3} ${armTop}\n      L ${w} ${armTop + 3}`;\n  }\n  static stackRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: [SVG.getTop(w), SVG.getRightAndBottom(w, h, true, 0), \"Z\"]\n    });\n  }\n  static capPath(w, h) {\n    return [SVG.getTop(w), SVG.getRightAndBottom(w, h, false, 0), \"Z\"];\n  }\n  static capRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: SVG.capPath(w, h)\n    });\n  }\n  static hatRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: [\"M\", 0, 12, SVG.arc(0, 12, 80, 10, 80, 80), \"L\", w - 3, 10, \"L\", w, 10 + 3, SVG.getRightAndBottom(w, h, true), \"Z\"]\n    });\n  }\n  static curve(p1x, p1y, p2x, p2y, roundness) {\n    roundness = roundness || 0.42;\n    const midX = (p1x + p2x) / 2.0;\n    const midY = (p1y + p2y) / 2.0;\n    const cx = Math.round(midX + roundness * (p2y - p1y));\n    const cy = Math.round(midY - roundness * (p2x - p1x));\n    return `${cx} ${cy} ${p2x} ${p2y}`;\n  }\n  static procHatBase(w, h, archRoundness, props) {\n    // TODO use arc()\n    archRoundness = Math.min(0.2, 35 / w);\n    return SVG.path({\n      ...props,\n      path: [\"M\", 0, 15, \"Q\", SVG.curve(0, 15, w, 15, archRoundness), SVG.getRightAndBottom(w, h, true), \"M\", -1, 13, \"Q\", SVG.curve(-1, 13, w + 1, 13, archRoundness), \"Q\", SVG.curve(w + 1, 13, w, 16, 0.6), \"Q\", SVG.curve(w, 16, 0, 16, -archRoundness), \"Q\", SVG.curve(0, 16, -1, 13, 0.6), \"Z\"]\n    });\n  }\n  static procHatCap(w, h, archRoundness) {\n    // TODO use arc()\n    // TODO this doesn't look quite right\n    return SVG.path({\n      path: [\"M\", -1, 13, \"Q\", SVG.curve(-1, 13, w + 1, 13, archRoundness), \"Q\", SVG.curve(w + 1, 13, w, 16, 0.6), \"Q\", SVG.curve(w, 16, 0, 16, -archRoundness), \"Q\", SVG.curve(0, 16, -1, 13, 0.6), \"Z\"],\n      class: \"sb-define-hat-cap\"\n    });\n  }\n  static procHatRect(w, h, props) {\n    const q = 52;\n    const y = h - q;\n    const archRoundness = Math.min(0.2, 35 / w);\n    return SVG.move(0, y, SVG.group([SVG.procHatBase(w, q, archRoundness, props), SVG.procHatCap(w, q, archRoundness)]));\n  }\n  static mouthRect(w, h, isFinal, lines, props) {\n    let y = lines[0].height;\n    const p = [SVG.getTop(w), SVG.getRightAndBottom(w, y, true, 15)];\n    for (let i = 1; i < lines.length; i += 2) {\n      const isLast = i + 2 === lines.length;\n      y += lines[i].height - 3;\n      p.push(SVG.getArm(w, y));\n      const hasNotch = !(isLast && isFinal);\n      const inset = isLast ? 0 : 15;\n      y += lines[i + 1].height + 3;\n      p.push(SVG.getRightAndBottom(w, y, hasNotch, inset));\n    }\n    return SVG.path({\n      ...props,\n      path: p\n    });\n  }\n  static ringRect(w, h, cy, cw, ch, shape, props) {\n    const r = 8;\n    const func = shape === \"reporter\" ? SVG.roundedPath : shape === \"boolean\" ? SVG.pointedPath : SVG.capPath;\n    return SVG.path({\n      ...props,\n      path: [\"M\", r, 0, SVG.arcw(r, 0, 0, r, r, r), SVG.arcw(0, h - r, r, h, r, r), SVG.arcw(w - r, h, w, h - r, r, r), SVG.arcw(w, r, w - r, 0, r, r), \"Z\", SVG.translatePath(4, cy || 4, func(cw, ch).join(\" \"))],\n      \"fill-rule\": \"even-odd\"\n    });\n  }\n  static commentRect(w, h, props) {\n    const r = 6;\n    return SVG.path({\n      ...props,\n      class: \"sb-comment\",\n      path: [\"M\", r, 0, SVG.arc(w - r, 0, w, r, r, r), SVG.arc(w, h - r, w - r, h, r, r), SVG.arc(r, h, 0, h - r, r, r), SVG.arc(0, r, r, 0, r, r), \"Z\"]\n    });\n  }\n  static commentLine(width, props) {\n    return SVG.move(-width, 9, SVG.rect(width, 2, {\n      ...props,\n      class: \"sb-comment-line\"\n    }));\n  }\n  static strikethroughLine(w, props) {\n    return SVG.path({\n      ...props,\n      path: [\"M\", 0, 0, \"L\", w, 0],\n      class: \"sb-diff sb-diff-del\"\n    });\n  }\n};\nclass Filter {\n  constructor(id, props) {\n    this.el = SVG$1.el(\"filter\", {\n      ...props,\n      id: id,\n      x0: \"-50%\",\n      y0: \"-50%\",\n      width: \"200%\",\n      height: \"200%\"\n    });\n    this.highestId = 0;\n  }\n  fe(name, props, children) {\n    const shortName = name.toLowerCase().replace(/gaussian|osite/, \"\");\n    const id = `${shortName}-${++this.highestId}`;\n    this.el.appendChild(SVG$1.withChildren(SVG$1.el(`fe${name}`, {\n      ...props,\n      result: id\n    }), children || []));\n    return id;\n  }\n  comp(op, in1, in2, props) {\n    return this.fe(\"Composite\", {\n      ...props,\n      operator: op,\n      in: in1,\n      in2: in2\n    });\n  }\n  subtract(in1, in2) {\n    return this.comp(\"arithmetic\", in1, in2, {\n      k2: +1,\n      k3: -1\n    });\n  }\n  offset(dx, dy, in1) {\n    return this.fe(\"Offset\", {\n      in: in1,\n      dx: dx,\n      dy: dy\n    });\n  }\n  flood(color, opacity, in1) {\n    return this.fe(\"Flood\", {\n      in: in1,\n      \"flood-color\": color,\n      \"flood-opacity\": opacity\n    });\n  }\n  blur(dev, in1) {\n    return this.fe(\"GaussianBlur\", {\n      in: in1,\n      stdDeviation: `${dev} ${dev}`\n    });\n  }\n  colorMatrix(in1, values) {\n    return this.fe(\"ColorMatrix\", {\n      in: in1,\n      type: \"matrix\",\n      values: values.join(\" \")\n    });\n  }\n  merge(children) {\n    this.fe(\"Merge\", {}, children.map(name => SVG$1.el(\"feMergeNode\", {\n      in: name\n    })));\n  }\n}\nvar cssContent$1 = \"\\n.sb-label {\\n  font-family: Lucida Grande, Verdana, Arial, DejaVu Sans, sans-serif;\\n  font-weight: bold;\\n  fill: #fff;\\n  font-size: 10px;\\n  word-spacing: +1px;\\n}\\n\\n.sb-obsolete {\\n  fill: #d42828;\\n}\\n.sb-motion {\\n  fill: #4a6cd4;\\n}\\n.sb-looks {\\n  fill: #8a55d7;\\n}\\n.sb-sound {\\n  fill: #bb42c3;\\n}\\n.sb-pen {\\n  fill: #0e9a6c;\\n}\\n.sb-events {\\n  fill: #c88330;\\n}\\n.sb-control {\\n  fill: #e1a91a;\\n}\\n.sb-sensing {\\n  fill: #2ca5e2;\\n}\\n.sb-operators {\\n  fill: #5cb712;\\n}\\n.sb-variables {\\n  fill: #ee7d16;\\n}\\n.sb-list {\\n  fill: #cc5b22;\\n}\\n.sb-custom {\\n  fill: #632d99;\\n}\\n.sb-custom-arg {\\n  fill: #5947b1;\\n}\\n.sb-extension {\\n  fill: #4b4a60;\\n}\\n.sb-grey {\\n  fill: #969696;\\n}\\n\\n.sb-bevel {\\n  filter: url(#bevelFilter);\\n}\\n\\n.sb-input {\\n  filter: url(#inputBevelFilter);\\n}\\n.sb-input-number,\\n.sb-input-string,\\n.sb-input-number-dropdown {\\n  fill: #fff;\\n}\\n.sb-literal-number,\\n.sb-literal-string,\\n.sb-literal-number-dropdown,\\n.sb-literal-dropdown {\\n  font-weight: normal;\\n  font-size: 9px;\\n  word-spacing: 0;\\n}\\n.sb-literal-number,\\n.sb-literal-string,\\n.sb-literal-number-dropdown {\\n  fill: #000;\\n}\\n\\n.sb-darker {\\n  filter: url(#inputDarkFilter);\\n}\\n\\n.sb-outline {\\n  stroke: #fff;\\n  stroke-opacity: 0.2;\\n  stroke-width: 2;\\n  fill: none;\\n}\\n\\n.sb-define-hat-cap {\\n  stroke: #632d99;\\n  stroke-width: 1;\\n  fill: #8e2ec2;\\n}\\n\\n.sb-comment {\\n  fill: #ffffa5;\\n  stroke: #d0d1d2;\\n  stroke-width: 1;\\n}\\n.sb-comment-line {\\n  fill: #ffff80;\\n}\\n.sb-comment-label {\\n  font-family: Helvetica, Arial, DejaVu Sans, sans-serif;\\n  font-weight: bold;\\n  fill: #5c5d5f;\\n  word-spacing: 0;\\n  font-size: 12px;\\n}\\n\\n.sb-diff {\\n  fill: none;\\n  stroke: #000;\\n}\\n.sb-diff-ins {\\n  stroke-width: 2px;\\n}\\n.sb-diff-del {\\n  stroke-width: 3px;\\n}\\n\";\nlet Style$1 = class Style {\n  static get cssContent() {\n    return cssContent$1;\n  }\n  static makeIcons() {\n    return [SVG$1.el(\"path\", {\n      d: \"M1.504 21L0 19.493 4.567 0h1.948l-.5 2.418s1.002-.502 3.006 0c2.006.503 3.008 2.01 6.517 2.01 3.508 0 4.463-.545 4.463-.545l-.823 9.892s-2.137 1.005-5.144.696c-3.007-.307-3.007-2.007-6.014-2.51-3.008-.502-4.512.503-4.512.503L1.504 21z\",\n      fill: \"#3f8d15\",\n      id: \"greenFlag\"\n    }), SVG$1.el(\"polygon\", {\n      points: \"6.3,0.4725 12.516,0.4725 18.585,6.3 18.585,12.495 12.495,18.585 6.3,18.585 0.483,12.495 0.483,6.3  \",\n      fill: \"#bb0010\",\n      id: \"stopSign\"\n    }), SVG$1.el(\"path\", {\n      d: \"M6.724 0C3.01 0 0 2.91 0 6.5c0 2.316 1.253 4.35 3.14 5.5H5.17v-1.256C3.364 10.126 2.07 8.46 2.07 6.5 2.07 4.015 4.152 2 6.723 2c1.14 0 2.184.396 2.993 1.053L8.31 4.13c-.45.344-.398.826.11 1.08L15 8.5 13.858.992c-.083-.547-.514-.714-.963-.37l-1.532 1.172A6.825 6.825 0 0 0 6.723 0z\",\n      fill: \"#fff\",\n      id: \"turnRight\"\n    }), SVG$1.el(\"path\", {\n      d: \"M3.637 1.794A6.825 6.825 0 0 1 8.277 0C11.99 0 15 2.91 15 6.5c0 2.316-1.253 4.35-3.14 5.5H9.83v-1.256c1.808-.618 3.103-2.285 3.103-4.244 0-2.485-2.083-4.5-4.654-4.5-1.14 0-2.184.396-2.993 1.053L6.69 4.13c.45.344.398.826-.11 1.08L0 8.5 1.142.992c.083-.547.514-.714.963-.37l1.532 1.172z\",\n      fill: \"#fff\",\n      id: \"turnLeft\"\n    }), SVG$1.el(\"path\", {\n      d: \"M0 0L4 4L0 8Z\",\n      fill: \"#111\",\n      id: \"addInput\"\n    }), SVG$1.el(\"path\", {\n      d: \"M4 0L4 8L0 4Z\",\n      fill: \"#111\",\n      id: \"delInput\"\n    }), SVG$1.setProps(SVG$1.group([SVG$1.el(\"path\", {\n      d: \"M8 0l2 -2l0 -3l3 0l-4 -5l-4 5l3 0l0 3l-8 0l0 2\",\n      fill: \"#000\",\n      opacity: \"0.3\"\n    }), SVG$1.move(-1, -1, SVG$1.el(\"path\", {\n      d: \"M8 0l2 -2l0 -3l3 0l-4 -5l-4 5l3 0l0 3l-8 0l0 2\",\n      fill: \"#fff\",\n      opacity: \"0.9\"\n    }))]), {\n      id: \"loopArrow\"\n    }), SVG$1.setProps(SVG$1.group([SVG$1.el(\"rect\", {\n      x: \"0\",\n      y: \"0\",\n      width: \"12\",\n      height: \"14\",\n      fill: \"#000\",\n      opacity: \"0.25\"\n    }), SVG$1.el(\"rect\", {\n      x: \"1\",\n      y: \"1\",\n      width: \"1\",\n      height: \"13\",\n      fill: \"#fff\"\n    }), SVG$1.el(\"rect\", {\n      x: \"11\",\n      y: \"1\",\n      width: \"1\",\n      height: \"13\",\n      fill: \"#fff\"\n    }), SVG$1.el(\"rect\", {\n      x: \"2\",\n      y: \"1\",\n      width: \"9\",\n      height: \"1\",\n      fill: \"#fff\"\n    }), SVG$1.el(\"rect\", {\n      x: \"2\",\n      y: \"5\",\n      width: \"9\",\n      height: \"1\",\n      fill: \"#fff\"\n    }), SVG$1.el(\"rect\", {\n      x: \"2\",\n      y: \"9\",\n      width: \"9\",\n      height: \"1\",\n      fill: \"#fff\"\n    }), SVG$1.el(\"rect\", {\n      x: \"2\",\n      y: \"13\",\n      width: \"9\",\n      height: \"1\",\n      fill: \"#fff\"\n    }), SVG$1.el(\"rect\", {\n      x: \"2\",\n      y: \"2\",\n      width: \"9\",\n      height: \"2\",\n      fill: \"#ea8d1c\"\n    }), SVG$1.el(\"rect\", {\n      x: \"2\",\n      y: \"6\",\n      width: \"9\",\n      height: \"2\",\n      fill: \"#ea8d1c\"\n    }), SVG$1.el(\"rect\", {\n      x: \"2\",\n      y: \"10\",\n      width: \"9\",\n      height: \"2\",\n      fill: \"#ea8d1c\"\n    }), SVG$1.el(\"rect\", {\n      x: \"11\",\n      y: \"0\",\n      width: \"1\",\n      height: \"1\",\n      fill: \"#ea8d1c\"\n    }), SVG$1.el(\"rect\", {\n      x: \"0\",\n      y: \"13\",\n      width: \"1\",\n      height: \"1\",\n      fill: \"#ea8d1c\"\n    })]), {\n      id: \"list\"\n    })];\n  }\n  static makeStyle() {\n    const style = SVG$1.el(\"style\");\n    style.appendChild(SVG$1.cdata(Style.cssContent));\n    return style;\n  }\n  static bevelFilter(id, inset) {\n    const f = new Filter(id);\n    const alpha = \"SourceAlpha\";\n    const s = inset ? -1 : 1;\n    const blur = f.blur(1, alpha);\n    f.merge([\"SourceGraphic\", f.comp(\"in\", f.flood(\"#fff\", 0.15), f.subtract(alpha, f.offset(+s, +s, blur))), f.comp(\"in\", f.flood(\"#000\", 0.7), f.subtract(alpha, f.offset(-s, -s, blur)))]);\n    return f.el;\n  }\n  static darkFilter(id) {\n    const f = new Filter(id);\n    f.merge([\"SourceGraphic\", f.comp(\"in\", f.flood(\"#000\", 0.2), \"SourceAlpha\")]);\n    return f.el;\n  }\n  static darkRect(w, h, category, el) {\n    return SVG$1.setProps(SVG$1.group([SVG$1.setProps(el, {\n      class: `sb-${category} sb-darker`\n    })]), {\n      width: w,\n      height: h\n    });\n  }\n  static get defaultFontFamily() {\n    return \"Lucida Grande, Verdana, Arial, DejaVu Sans, sans-serif\";\n  }\n};\nconst {\n  defaultFontFamily,\n  makeStyle: makeStyle$3,\n  makeIcons,\n  darkRect,\n  bevelFilter,\n  darkFilter\n} = Style$1;\nlet LabelView$1 = class LabelView {\n  constructor(label) {\n    Object.assign(this, label);\n    this.el = null;\n    this.height = 12;\n    this.metrics = null;\n    this.x = 0;\n  }\n  get isLabel() {\n    return true;\n  }\n  draw() {\n    return this.el;\n  }\n  get width() {\n    return this.metrics.width;\n  }\n  measure() {\n    const value = this.value;\n    const cls = `sb-${this.cls}`;\n    this.el = SVG$1.text(0, 10, value, {\n      class: `sb-label ${cls}`\n    });\n    let cache = LabelView.metricsCache[cls];\n    if (!cache) {\n      cache = LabelView.metricsCache[cls] = Object.create(null);\n    }\n    if (Object.hasOwnProperty.call(cache, value)) {\n      this.metrics = cache[value];\n    } else {\n      const font = /comment-label/.test(this.cls) ? \"bold 12px Helvetica, Arial, DejaVu Sans, sans-serif\" : /literal/.test(this.cls) ? `normal 9px ${defaultFontFamily}` : `bold 10px ${defaultFontFamily}`;\n      this.metrics = cache[value] = LabelView.measure(value, font);\n      // TODO: word-spacing? (fortunately it seems to have no effect!)\n    }\n  }\n  static measure(value, font) {\n    const context = LabelView.measuring;\n    context.font = font;\n    const textMetrics = context.measureText(value);\n    const width = textMetrics.width + 0.5 | 0;\n    return {\n      width: width\n    };\n  }\n};\nLabelView$1.metricsCache = {};\nLabelView$1.toMeasure = [];\nlet IconView$1 = class IconView {\n  constructor(icon) {\n    Object.assign(this, icon);\n    const info = IconView.icons[this.name];\n    if (!info) {\n      throw new Error(`no info for icon: ${this.name}`);\n    }\n    Object.assign(this, info);\n  }\n  get isIcon() {\n    return true;\n  }\n  draw() {\n    return SVG$1.symbol(`#${this.name}`, {\n      width: this.width,\n      height: this.height\n    });\n  }\n  static get icons() {\n    return {\n      greenFlag: {\n        width: 20,\n        height: 21,\n        dy: -2\n      },\n      stopSign: {\n        width: 20,\n        height: 20\n      },\n      turnLeft: {\n        width: 15,\n        height: 12,\n        dy: +1\n      },\n      turnRight: {\n        width: 15,\n        height: 12,\n        dy: +1\n      },\n      loopArrow: {\n        width: 14,\n        height: 11\n      },\n      addInput: {\n        width: 4,\n        height: 8\n      },\n      delInput: {\n        width: 4,\n        height: 8\n      },\n      list: {\n        width: 12,\n        height: 14\n      }\n    };\n  }\n};\nlet InputView$1 = class InputView {\n  constructor(input) {\n    Object.assign(this, input);\n    if (input.label) {\n      this.label = newView$1(input.label);\n    }\n    this.x = 0;\n  }\n  measure() {\n    if (this.hasLabel) {\n      this.label.measure();\n    }\n  }\n  static get shapes() {\n    return {\n      string: SVG$1.rect,\n      number: SVG$1.roundedRect,\n      \"number-dropdown\": SVG$1.roundedRect,\n      color: SVG$1.rect,\n      dropdown: SVG$1.rect,\n      boolean: SVG$1.pointedRect,\n      stack: SVG$1.stackRect,\n      reporter: SVG$1.roundedRect\n    };\n  }\n  draw(parent) {\n    let w;\n    let label;\n    if (this.hasLabel) {\n      label = this.label.draw();\n      w = Math.max(14, this.label.width + (this.shape === \"string\" || this.shape === \"number-dropdown\" ? 6 : 9));\n    } else {\n      w = this.isInset ? 30 : this.isColor ? 13 : null;\n    }\n    if (this.hasArrow) {\n      w += 10;\n    }\n    this.width = w;\n    const h = this.height = this.isRound || this.isColor ? 13 : 14;\n    let el = InputView.shapes[this.shape](w, h);\n    if (this.isColor) {\n      SVG$1.setProps(el, {\n        fill: this.value\n      });\n    } else if (this.isDarker) {\n      el = darkRect(w, h, parent.info.category, el);\n      if (parent.info.color) {\n        SVG$1.setProps(el, {\n          fill: parent.info.color\n        });\n      }\n    }\n    const result = SVG$1.group([SVG$1.setProps(el, {\n      class: `sb-input sb-input-${this.shape}`\n    })]);\n    if (this.hasLabel) {\n      const x = this.isRound ? 5 : 4;\n      result.appendChild(SVG$1.move(x, 0, label));\n    }\n    if (this.hasArrow) {\n      const y = this.shape === \"dropdown\" ? 5 : 4;\n      result.appendChild(SVG$1.move(w - 10, y, SVG$1.polygon({\n        points: [7, 0, 3.5, 4, 0, 0],\n        fill: \"#000\",\n        opacity: \"0.6\"\n      })));\n    }\n    return result;\n  }\n};\nlet BlockView$1 = class BlockView {\n  constructor(block) {\n    Object.assign(this, block);\n    this.children = block.children.map(newView$1);\n    this.comment = this.comment ? newView$1(this.comment) : null;\n    if (Object.prototype.hasOwnProperty.call(aliasExtensions, this.info.category)) {\n      // handle aliases first\n      this.info.category = aliasExtensions[this.info.category];\n    }\n    if (Object.prototype.hasOwnProperty.call(movedExtensions, this.info.category)) {\n      this.info.category = movedExtensions[this.info.category];\n    } else if (Object.prototype.hasOwnProperty.call(extensions, this.info.category)) {\n      this.info.category = \"extension\";\n    }\n    this.x = 0;\n    this.width = null;\n    this.height = null;\n    this.firstLine = null;\n    this.innerWidth = null;\n  }\n  get isBlock() {\n    return true;\n  }\n  measure() {\n    for (const child of this.children) {\n      if (child.measure) {\n        child.measure();\n      }\n    }\n    if (this.comment) {\n      this.comment.measure();\n    }\n  }\n  static get shapes() {\n    return {\n      stack: SVG$1.stackRect,\n      \"c-block\": SVG$1.stackRect,\n      \"if-block\": SVG$1.stackRect,\n      celse: SVG$1.stackRect,\n      cend: SVG$1.stackRect,\n      cap: SVG$1.capRect,\n      reporter: SVG$1.roundedRect,\n      boolean: SVG$1.pointedRect,\n      hat: SVG$1.hatRect,\n      cat: SVG$1.hatRect,\n      \"define-hat\": SVG$1.procHatRect,\n      ring: SVG$1.roundedRect\n    };\n  }\n  drawSelf(w, h, lines) {\n    // mouths\n    if (lines.length > 1) {\n      return SVG$1.mouthRect(w, h, this.isFinal, lines, {\n        class: `sb-${this.info.category} sb-bevel`\n      });\n    }\n\n    // outlines\n    if (this.info.shape === \"outline\") {\n      return SVG$1.setProps(SVG$1.stackRect(w, h), {\n        class: \"sb-outline\"\n      });\n    }\n\n    // rings\n    if (this.isRing) {\n      const child = this.children[0];\n      // We use isStack for InputView; isBlock for BlockView; isScript for ScriptView.\n      if (child && (child.isStack || child.isBlock || child.isScript)) {\n        const shape = child.isScript ? \"stack\" : child.isStack ? child.shape : child.info.shape;\n        return SVG$1.ringRect(w, h, child.y, child.width, child.height, shape, {\n          class: `sb-${this.info.category} sb-bevel`\n        });\n      }\n    }\n    const func = BlockView.shapes[this.info.shape];\n    if (!func) {\n      throw new Error(`no shape func: ${this.info.shape}`);\n    }\n    return func(w, h, {\n      class: `sb-${this.info.category} sb-bevel`\n    });\n  }\n  minDistance(child) {\n    if (this.isBoolean) {\n      return child.isReporter ? 4 + child.height / 4 | 0 : child.isLabel ? 5 + child.height / 2 | 0 : child.isBoolean || child.shape === \"boolean\" ? 5 : 2 + child.height / 2 | 0;\n    }\n    if (this.isReporter) {\n      return child.isInput && child.isRound || (child.isReporter || child.isBoolean) && !child.hasScript ? 0 : child.isLabel ? 2 + child.height / 2 | 0 : -2 + child.height / 2 | 0;\n    }\n    return 0;\n  }\n  static get padding() {\n    return {\n      hat: [15, 6, 2],\n      cat: [15, 6, 2],\n      \"define-hat\": [21, 8, 9],\n      reporter: [3, 4, 1],\n      boolean: [3, 4, 2],\n      cap: [6, 6, 2],\n      \"c-block\": [3, 6, 2],\n      \"if-block\": [3, 6, 2],\n      ring: [4, 4, 2],\n      null: [4, 6, 2]\n    };\n  }\n  draw() {\n    const isDefine = this.info.shape === \"define-hat\";\n    let children = this.children;\n    const padding = BlockView.padding[this.info.shape] || BlockView.padding.null;\n    let pt = padding[0];\n    const px = padding[1];\n    const pb = padding[2];\n    let y = 0;\n    const Line = function (y) {\n      this.y = y;\n      this.width = 0;\n      this.height = y ? 13 : 16;\n      this.children = [];\n    };\n    let innerWidth = 0;\n    let scriptWidth = 0;\n    let line = new Line(y);\n    const pushLine = isLast => {\n      if (lines.length === 0) {\n        line.height += pt + pb;\n      } else {\n        line.height += isLast ? 0 : +2;\n        line.y -= 1;\n      }\n      y += line.height;\n      lines.push(line);\n    };\n    if (this.info.isRTL) {\n      let start = 0;\n      const flip = () => {\n        children = children.slice(0, start).concat(children.slice(start, i).reverse()).concat(children.slice(i));\n      };\n      let i;\n      for (i = 0; i < children.length; i++) {\n        if (children[i].isScript) {\n          flip();\n          start = i + 1;\n        }\n      }\n      if (start < i) {\n        flip();\n      }\n    }\n    const lines = [];\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      child.el = child.draw(this);\n      if (child.isScript && this.isCommand) {\n        this.hasScript = true;\n        pushLine();\n        child.y = y;\n        lines.push(child);\n        scriptWidth = Math.max(scriptWidth, Math.max(1, child.width));\n        child.height = Math.max(12, child.height) + 3;\n        y += child.height;\n        line = new Line(y);\n      } else if (child.isArrow) {\n        line.children.push(child);\n      } else {\n        const cmw = i > 0 ? 30 : 0; // 27\n        const md = this.isCommand ? 0 : this.minDistance(child);\n        const mw = this.isCommand ? child.isBlock || child.isInput ? cmw : 0 : md;\n        if (mw && !lines.length && line.width < mw - px) {\n          line.width = mw - px;\n        }\n        child.x = line.width;\n        line.width += child.width;\n        innerWidth = Math.max(innerWidth, line.width + Math.max(0, md - px));\n        line.width += 4;\n        if (!child.isLabel) {\n          line.height = Math.max(line.height, child.height);\n        }\n        line.children.push(child);\n      }\n    }\n    pushLine(true);\n    innerWidth = Math.max(innerWidth + px * 2, this.isHat || this.hasScript ? 83 : this.isCommand || this.isOutline || this.isRing ? 39 : 20);\n    this.height = y;\n    this.width = scriptWidth ? Math.max(innerWidth, 15 + scriptWidth) : innerWidth;\n    if (isDefine) {\n      const p = Math.min(26, 3.5 + 0.13 * innerWidth | 0) - 18;\n      this.height += p;\n      pt += 2 * p;\n    }\n    this.firstLine = lines[0];\n    this.innerWidth = innerWidth;\n    const objects = [];\n    for (const line of lines) {\n      if (line.isScript) {\n        objects.push(SVG$1.move(15, line.y, line.el));\n        continue;\n      }\n      const h = line.height;\n      for (const child of line.children) {\n        if (child.isArrow) {\n          objects.push(SVG$1.move(innerWidth - 15, this.height - 3, child.el));\n          continue;\n        }\n        let y = pt + (h - child.height - pt - pb) / 2 - 1;\n        if (isDefine && child.isLabel) {\n          y += 3;\n        } else if (child.isIcon) {\n          y += child.dy | 0;\n        }\n        if (this.isRing) {\n          child.y = line.y + y | 0;\n          if (child.isInset) {\n            continue;\n          }\n        }\n        objects.push(SVG$1.move(px + child.x, line.y + y | 0, child.el));\n        if (child.diff === \"+\") {\n          const ellipse = SVG$1.insEllipse(child.width, child.height);\n          objects.push(SVG$1.move(px + child.x, line.y + y | 0, ellipse));\n        }\n      }\n    }\n    const el = this.drawSelf(innerWidth, this.height, lines);\n    objects.splice(0, 0, el);\n    if (this.info.color) {\n      SVG$1.setProps(el, {\n        fill: this.info.color\n      });\n    }\n    return SVG$1.group(objects);\n  }\n};\nlet CommentView$1 = class CommentView {\n  constructor(comment) {\n    Object.assign(this, comment);\n    this.label = newView$1(comment.label);\n    this.width = null;\n  }\n  get isComment() {\n    return true;\n  }\n  static get lineLength() {\n    return 12;\n  }\n  get height() {\n    return 20;\n  }\n  measure() {\n    this.label.measure();\n  }\n  draw() {\n    const labelEl = this.label.draw();\n    this.width = this.label.width + 16;\n    return SVG$1.group([SVG$1.commentLine(this.hasBlock ? CommentView.lineLength : 0, 6), SVG$1.commentRect(this.width, this.height, {\n      class: \"sb-comment\"\n    }), SVG$1.move(8, 4, labelEl)]);\n  }\n};\nlet GlowView$1 = class GlowView {\n  constructor(glow) {\n    Object.assign(this, glow);\n    this.child = newView$1(glow.child);\n    this.width = null;\n    this.height = null;\n    this.y = 0;\n  }\n  get isGlow() {\n    return true;\n  }\n  measure() {\n    this.child.measure();\n  }\n  drawSelf() {\n    const c = this.child;\n    let el;\n    const w = this.width;\n    const h = this.height - 1;\n    if (c.isScript) {\n      if (!c.isEmpty && c.blocks[0].isHat) {\n        el = SVG$1.hatRect(w, h);\n      } else if (c.isFinal) {\n        el = SVG$1.capRect(w, h);\n      } else {\n        el = SVG$1.stackRect(w, h);\n      }\n    } else {\n      el = c.drawSelf(w, h, []);\n    }\n    return SVG$1.setProps(el, {\n      class: \"sb-diff sb-diff-ins\"\n    });\n  }\n  // TODO how can we always raise Glows above their parents?\n\n  draw() {\n    const c = this.child;\n    const el = c.isScript ? c.draw(true) : c.draw();\n    this.width = c.width;\n    this.height = c.isBlock && c.firstLine.height || c.height;\n\n    // encircle\n    return SVG$1.group([el, this.drawSelf()]);\n  }\n};\nlet ScriptView$1 = class ScriptView {\n  constructor(script) {\n    Object.assign(this, script);\n    this.blocks = script.blocks.map(newView$1);\n    this.y = 0;\n  }\n  get isScript() {\n    return true;\n  }\n  measure() {\n    for (const block of this.blocks) {\n      block.measure();\n    }\n  }\n  draw(inside) {\n    const children = [];\n    let y = 0;\n    this.width = 0;\n    for (const block of this.blocks) {\n      const x = inside ? 0 : 2;\n      const child = block.draw();\n      children.push(SVG$1.move(x, y, child));\n      this.width = Math.max(this.width, block.width);\n      const diff = block.diff;\n      if (diff === \"-\") {\n        const dw = block.width;\n        const dh = block.firstLine.height || block.height;\n        children.push(SVG$1.move(x, y + dh / 2 + 1, SVG$1.strikethroughLine(dw)));\n        this.width = Math.max(this.width, block.width);\n      }\n      y += block.height;\n      const comment = block.comment;\n      if (comment) {\n        const line = block.firstLine;\n        const cx = block.innerWidth + 2 + CommentView$1.lineLength;\n        const cy = y - block.height + line.height / 2;\n        const el = comment.draw();\n        children.push(SVG$1.move(cx, cy - comment.height / 2, el));\n        this.width = Math.max(this.width, cx + comment.width);\n      }\n    }\n    this.height = y;\n    if (!inside && !this.isFinal) {\n      this.height += 3;\n    }\n    const lastBlock = this.blocks[this.blocks.length - 1];\n    if (!inside && lastBlock.isGlow) {\n      this.height += 2; // TODO unbreak this\n    }\n    return SVG$1.group(children);\n  }\n};\nlet DocumentView$1 = class DocumentView {\n  constructor(doc, options) {\n    Object.assign(this, doc);\n    this.scripts = doc.scripts.map(newView$1);\n    this.width = null;\n    this.height = null;\n    this.el = null;\n    this.defs = null;\n    this.scale = options.scale;\n  }\n  measure() {\n    this.scripts.forEach(script => script.measure());\n  }\n  render(cb) {\n    if (typeof cb === \"function\") {\n      throw new Error(\"render() no longer takes a callback\");\n    }\n\n    // measure strings\n    this.measure();\n\n    // TODO: separate layout + render steps.\n    // render each script\n    let width = 0;\n    let height = 0;\n    const elements = [];\n    for (const script of this.scripts) {\n      if (height) {\n        height += 10;\n      }\n      script.y = height;\n      elements.push(SVG$1.move(0, height, script.draw()));\n      height += script.height;\n      width = Math.max(width, script.width + 4);\n    }\n    this.width = width;\n    this.height = height;\n\n    // return SVG\n    const svg = SVG$1.newSVG(width, height, this.scale);\n    svg.appendChild(this.defs = SVG$1.withChildren(SVG$1.el(\"defs\"), [bevelFilter(\"bevelFilter\", false), bevelFilter(\"inputBevelFilter\", true), darkFilter(\"inputDarkFilter\"), ...makeIcons()]));\n    svg.appendChild(SVG$1.group(elements));\n    this.el = svg;\n    return svg;\n  }\n\n  /* Export SVG image as XML string */\n  exportSVGString() {\n    if (this.el == null) {\n      throw new Error(\"call draw() first\");\n    }\n    const style = makeStyle$3();\n    this.defs.appendChild(style);\n    const xml = new SVG$1.XMLSerializer().serializeToString(this.el);\n    this.defs.removeChild(style);\n    return xml;\n  }\n\n  /* Export SVG image as data URI */\n  exportSVG() {\n    const xml = this.exportSVGString();\n    return `data:image/svg+xml;utf8,${xml.replace(/[#]/g, encodeURIComponent)}`;\n  }\n  toCanvas(cb, exportScale) {\n    exportScale = exportScale || 1.0;\n    const canvas = SVG$1.makeCanvas();\n    canvas.width = Math.max(1, this.width * exportScale * this.scale);\n    canvas.height = Math.max(1, this.height * exportScale * this.scale);\n    const context = canvas.getContext(\"2d\");\n    const image = new Image();\n    image.src = this.exportSVG();\n    image.onload = () => {\n      context.save();\n      context.scale(exportScale, exportScale);\n      context.drawImage(image, 0, 0);\n      context.restore();\n      cb(canvas);\n    };\n  }\n  exportPNG(cb, scale) {\n    this.toCanvas(canvas => {\n      if (URL && URL.createObjectURL && Blob && canvas.toBlob) {\n        canvas.toBlob(blob => {\n          cb(URL.createObjectURL(blob));\n        }, \"image/png\");\n      } else {\n        cb(canvas.toDataURL(\"image/png\"));\n      }\n    }, scale);\n  }\n};\nconst viewFor$1 = node => {\n  switch (node.constructor) {\n    case Label:\n      return LabelView$1;\n    case Icon:\n      return IconView$1;\n    case Input:\n      return InputView$1;\n    case Block:\n      return BlockView$1;\n    case Comment:\n      return CommentView$1;\n    case Glow:\n      return GlowView$1;\n    case Script:\n      return ScriptView$1;\n    case Document:\n      return DocumentView$1;\n    default:\n      throw new Error(`no view for ${node.constructor.name}`);\n  }\n};\nconst newView$1 = (node, options) => new (viewFor$1(node))(node, options);\nfunction init$2(window) {\n  SVG$1.init(window);\n  LabelView$1.measuring = SVG$1.makeCanvas().getContext(\"2d\");\n}\nconst makeStyle$2 = Style$1.makeStyle;\n\n/* for constructing SVGs */\n\n// set by SVG.init\nlet document;\nlet xml;\nconst directProps = {\n  textContent: true\n};\nclass SVG {\n  static init(window) {\n    document = window.document;\n    const DOMParser = window.DOMParser;\n    xml = new DOMParser().parseFromString(\"<xml></xml>\", \"application/xml\");\n    SVG.XMLSerializer = window.XMLSerializer;\n  }\n  static makeCanvas() {\n    return document.createElement(\"canvas\");\n  }\n  static cdata(content) {\n    return xml.createCDATASection(content);\n  }\n  static el(name, props) {\n    const el = document.createElementNS(\"http://www.w3.org/2000/svg\", name);\n    return SVG.setProps(el, props);\n  }\n  static setProps(el, props) {\n    for (const key in props) {\n      const value = String(props[key]);\n      if (directProps[key]) {\n        el[key] = value;\n      } else if (props[key] != null && Object.prototype.hasOwnProperty.call(props, key)) {\n        el.setAttributeNS(null, key, value);\n      }\n    }\n    return el;\n  }\n  static withChildren(el, children) {\n    for (const child of children) {\n      el.appendChild(child);\n    }\n    return el;\n  }\n  static group(children) {\n    return SVG.withChildren(SVG.el(\"g\"), children);\n  }\n  static newSVG(width, height, scale) {\n    return SVG.el(\"svg\", {\n      version: \"1.1\",\n      width: width * scale,\n      height: height * scale,\n      viewBox: `0 0 ${width * scale} ${height * scale}`\n    });\n  }\n  static polygon(props) {\n    return SVG.el(\"polygon\", {\n      ...props,\n      points: props.points.join(\" \")\n    });\n  }\n  static path(props) {\n    return SVG.el(\"path\", {\n      ...props,\n      path: null,\n      d: props.path.join(\" \")\n    });\n  }\n  static text(x, y, content, props) {\n    const text = SVG.el(\"text\", {\n      ...props,\n      x: x,\n      y: y,\n      textContent: content\n    });\n    return text;\n  }\n  static symbol(href) {\n    return SVG.el(\"use\", {\n      href: href\n    });\n  }\n  static move(dx, dy, el) {\n    SVG.setProps(el, {\n      transform: `translate(${dx} ${dy})`\n    });\n    return el;\n  }\n\n  /* shapes */\n\n  static rect(w, h, props) {\n    return SVG.el(\"rect\", {\n      ...props,\n      x: 0,\n      y: 0,\n      width: w,\n      height: h\n    });\n  }\n  static roundRect(w, h, props) {\n    return SVG.rect(w, h, {\n      ...props,\n      rx: 4,\n      ry: 4\n    });\n  }\n  static pillRect(w, h, props) {\n    const r = h / 2;\n    return SVG.rect(w, h, {\n      ...props,\n      rx: r,\n      ry: r\n    });\n  }\n  static pointedPath(w, h) {\n    const r = h / 2;\n    return [`M ${r} 0`, `L ${w - r} 0 ${w} ${r}`, `L ${w} ${r} ${w - r} ${h}`, `L ${r} ${h} 0 ${r}`, `L 0 ${r} ${r} 0`, \"Z\"];\n  }\n  static pointedRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: SVG.pointedPath(w, h)\n    });\n  }\n  static topNotch(w, y) {\n    return `c 2 0 3 1 4 2\n      l 4 4\n      c 1 1 2 2 4 2\n      h 12\n      c 2 0 3 -1 4 -2\n      l 4 -4\n      c 1 -1 2 -2 4 -2\n      L ${w - 4} ${y}\n      a 4 4 0 0 1 4 4`;\n  }\n  static getTop(w) {\n    return `M 0 4\n      A 4 4 0 0 1 4 0\n      H 12 ${SVG.topNotch(w, 0)}`;\n  }\n  static getRingTop(w) {\n    return `M 0 3\n      L 3 0\n      L 7 0\n      L 10 3\n      L 16 3\n      L 19 0\n      L ${w - 3} 0\n      L ${w} 3`;\n  }\n  static getRightAndBottom(w, y, hasNotch, inset) {\n    if (typeof inset === \"undefined\") {\n      inset = 0;\n    }\n    let arr = [`L ${w} ${y - 4}`, `a 4 4 0 0 1 -4 4`];\n    if (hasNotch) {\n      arr = arr.concat([`L ${inset + 48} ${y}`, \"c -2 0 -3 1 -4 2\", \"l -4 4\", \"c -1 1 -2 2 -4 2\", \"h -12\", \"c -2 0 -3 -1 -4 -2\", \"l -4 -4\", \"c -1 -1 -2 -2 -4 -2\"]);\n    }\n    if (inset === 0) {\n      arr.push(\"L\", inset + 4, y);\n      arr.push(\"a 4 4 0 0 1 -4 -4\");\n    } else {\n      arr.push(\"L\", inset + 4, y);\n      arr.push(\"a 4 4 0 0 0 -4 4\");\n    }\n    return arr.join(\" \");\n  }\n  static getArm(w, armTop) {\n    return `L 16 ${armTop - 4}\n      a 4 4 0 0 0 4 4\n      L 28 ${armTop} ${SVG.topNotch(w, armTop)}`;\n  }\n  static getArmNoNotch(w, armTop) {\n    return `L 16 ${armTop - 4}\n      a 4 4 0 0 0 4 4\n      L 28 ${armTop} L ${w - 4} ${armTop}\n      a 4 4 0 0 1 4 4`;\n  }\n  static stackRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: [SVG.getTop(w), SVG.getRightAndBottom(w, h, true, 0), \"Z\"]\n    });\n  }\n  static capPath(w, h) {\n    return [SVG.getTop(w), SVG.getRightAndBottom(w, h, false, 0), \"Z\"];\n  }\n  static capRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: SVG.capPath(w, h)\n    });\n  }\n  static getHatTop(w) {\n    return `M 0 16 c 25,-22 71,-22 96,0 L ${w - 4} 16 a 4 4 0 0 1 4 4`;\n  }\n  static getCatTop(w) {\n    return `M 0 32\n      c2.6,-2.3 5.5,-4.3 8.5,-6.2c-1,-12.5 5.3,-23.3 8.4,-24.8c3.7,-1.8 16.5,13.1 18.4,15.4c8.4,-1.3 17,-1.3 25.4,0c1.9,-2.3 14.7,-17.2 18.4,-15.4c3.1,1.5 9.4,12.3 8.4,24.8c3,1.8 5.9,3.9 8.5,6.1\n      L ${w - 4} 32\n      a 4 4 0 0 1 4 4`;\n  }\n  static hatRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: [SVG.getHatTop(w), SVG.getRightAndBottom(w, h, true, 0), \"Z\"]\n    });\n  }\n  static catHat(w, h, props) {\n    return SVG.group([SVG.path({\n      ...props,\n      path: [SVG.getCatTop(w), SVG.getRightAndBottom(w, h, true, 0), \"Z\"]\n    }), SVG.move(0, 32, SVG.setProps(SVG.group([SVG.el(\"circle\", {\n      cx: 29.1,\n      cy: -3.3,\n      r: 3.4\n    }), SVG.el(\"circle\", {\n      cx: 59.2,\n      cy: -3.3,\n      r: 3.4\n    }), SVG.el(\"path\", {\n      d: \"M45.6,0.1c-0.9,0-1.7-0.3-2.3-0.9c-0.6,0.6-1.3,0.9-2.2,0.9c-0.9,0-1.8-0.3-2.3-0.9c-1-1.1-1.1-2.6-1.1-2.8c0-0.5,0.5-1,1-1l0,0c0.6,0,1,0.5,1,1c0,0.4,0.1,1.7,1.4,1.7c0.5,0,0.7-0.2,0.8-0.3c0.3-0.3,0.4-1,0.4-1.3c0-0.1,0-0.1,0-0.2c0-0.5,0.5-1,1-1l0,0c0.5,0,1,0.4,1,1c0,0,0,0.1,0,0.2c0,0.3,0.1,0.9,0.4,1.2C44.8-2.2,45-2,45.5-2s0.7-0.2,0.8-0.3c0.3-0.4,0.4-1.1,0.3-1.3c0-0.5,0.4-1,0.9-1.1c0.5,0,1,0.4,1.1,0.9c0,0.2,0.1,1.8-0.8,2.8C47.5-0.4,46.8,0.1,45.6,0.1z\"\n    })]), {\n      fill: \"#000\",\n      \"fill-opacity\": 0.6\n    })), SVG.move(0, 32, SVG.el(\"path\", {\n      d: \"M73.1-15.6c1.7-4.2,4.5-9.1,5.8-8.5c1.6,0.8,5.4,7.9,5,15.4c0,0.6-0.7,0.7-1.1,0.5c-3-1.6-6.4-2.8-8.6-3.6C72.8-12.3,72.4-13.7,73.1-15.6z\",\n      fill: \"#FFD5E6\",\n      transform: \"translate(0, 32)\"\n    })), SVG.move(0, 32, SVG.el(\"path\", {\n      d: \"M22.4-15.6c-1.7-4.2-4.5-9.1-5.8-8.5c-1.6,0.8-5.4,7.9-5,15.4c0,0.6,0.7,0.7,1.1,0.5c3-1.6,6.4-2.8,8.6-3.6C22.8-12.3,23.2-13.7,22.4-15.6z\",\n      fill: \"#FFD5E6\",\n      transform: \"translate(0, 32)\"\n    }))]);\n  }\n  static getProcHatTop(w) {\n    return `M 0 20 a 20 20 0 0 1 20 -20 L ${w - 20} 0 a 20,20 0 0,1 20,20`;\n  }\n  static procHatRect(w, h, props) {\n    return SVG.path({\n      ...props,\n      path: [SVG.getProcHatTop(w), SVG.getRightAndBottom(w, h, true, 0), \"Z\"]\n    });\n  }\n  static mouthRect(w, h, isFinal, lines, props) {\n    let y = lines[0].height;\n    const p = [SVG.getTop(w), SVG.getRightAndBottom(w, y, true, 16)];\n    for (let i = 1; i < lines.length; i += 2) {\n      const isLast = i + 2 === lines.length;\n      const line = lines[i];\n      y += line.height - 3;\n      if (line.isFinal) {\n        p.push(SVG.getArmNoNotch(w, y));\n      } else {\n        p.push(SVG.getArm(w, y));\n      }\n      const hasNotch = !(isLast && isFinal);\n      const inset = isLast ? 0 : 16;\n      y += lines[i + 1].height + 3;\n      p.push(SVG.getRightAndBottom(w, y, hasNotch, inset));\n    }\n    p.push(\"Z\");\n    return SVG.path({\n      ...props,\n      path: p\n    });\n  }\n  static commentRect(w, h, props) {\n    return SVG.roundRect(w, h, {\n      ...props,\n      class: \"sb3-comment\"\n    });\n  }\n  static commentLine(width, props) {\n    return SVG.move(-width, 9, SVG.rect(width, 2, {\n      ...props,\n      class: \"sb3-comment-line\"\n    }));\n  }\n  static strikethroughLine(w, props) {\n    return SVG.path({\n      ...props,\n      path: [\"M\", 0, 0, \"L\", w, 0],\n      class: \"sb3-diff sb3-diff-del\"\n    });\n  }\n}\nvar cssContent = \"\\n.sb3-label {\\n  font: 500 12pt Helvetica Neue, Helvetica, sans-serif;\\n  word-spacing: +1pt;\\n}\\n\\n.sb3-literal-number,\\n.sb3-literal-string,\\n.sb3-literal-number-dropdown,\\n.sb3-literal-dropdown {\\n  word-spacing: 0;\\n}\\n\\n/* Note: comment colors are different from Scratch. */\\n\\n.sb3-comment {\\n  fill: #ffffa5;\\n  stroke: #d0d1d2;\\n  stroke-width: 1;\\n}\\n.sb3-comment-line {\\n  fill: #ffff80;\\n}\\n.sb3-comment-label {\\n  font: 400 12pt Helvetica Neue, Helvetica, sans-serif;\\n  fill: #000;\\n  word-spacing: 0;\\n}\\n\\n.sb3-diff {\\n  fill: none;\\n  stroke: #000;\\n}\\n.sb3-diff-ins {\\n  stroke-width: 2px;\\n}\\n.sb3-diff-del {\\n  stroke-width: 3px;\\n}\\n\\n\\nsvg .sb3-motion {\\n  fill: #4c97ff;\\n  stroke: #3373cc;\\n}\\nsvg .sb3-motion-alt {\\n  fill: #4280d7;\\n}\\nsvg .sb3-motion-dark {\\n  fill: #3373cc;\\n}\\n\\n\\nsvg .sb3-looks {\\n  fill: #9966ff;\\n  stroke: #774dcb;\\n}\\nsvg .sb3-looks-alt {\\n  fill: #855cd6;\\n}\\nsvg .sb3-looks-dark {\\n  fill: #774dcb;\\n}\\n\\n\\nsvg .sb3-sound {\\n  fill: #cf63cf;\\n  stroke: #bd42bd;\\n}\\nsvg .sb3-sound-alt {\\n  fill: #c94fc9;\\n}\\nsvg .sb3-sound-dark {\\n  fill: #bd42bd;\\n}\\n\\n\\nsvg .sb3-control {\\n  fill: #ffab19;\\n  stroke: #cf8b17;\\n}\\nsvg .sb3-control-alt {\\n  fill: #ec9c13;\\n}\\nsvg .sb3-control-dark {\\n  fill: #cf8b17;\\n}\\n\\n\\nsvg .sb3-events {\\n  fill: #ffbf00;\\n  stroke: #cc9900;\\n}\\nsvg .sb3-events-alt {\\n  fill: #e6ac00;\\n}\\nsvg .sb3-events-dark {\\n  fill: #cc9900;\\n}\\n\\n\\nsvg .sb3-sensing {\\n  fill: #5cb1d6;\\n  stroke: #2e8eb8;\\n}\\nsvg .sb3-sensing-alt {\\n  fill: #47a8d1;\\n}\\nsvg .sb3-sensing-dark {\\n  fill: #2e8eb8;\\n}\\n\\n\\nsvg .sb3-operators {\\n  fill: #59c059;\\n  stroke: #389438;\\n}\\nsvg .sb3-operators-alt {\\n  fill: #46b946;\\n}\\nsvg .sb3-operators-dark {\\n  fill: #389438;\\n}\\n\\n\\nsvg .sb3-variables {\\n  fill: #ff8c1a;\\n  stroke: #db6e00;\\n}\\nsvg .sb3-variables-alt {\\n  fill: #ff8000;\\n}\\nsvg .sb3-variables-dark {\\n  fill: #db6e00;\\n}\\n\\n\\nsvg .sb3-list {\\n  fill: #ff661a;\\n  stroke: #e64d00;\\n}\\nsvg .sb3-list-alt {\\n  fill: #ff5500;\\n}\\nsvg .sb3-list-dark {\\n  fill: #e64d00;\\n}\\n\\n\\nsvg .sb3-custom {\\n  fill: #ff6680;\\n  stroke: #ff3355;\\n}\\nsvg .sb3-custom-alt {\\n  fill: #ff4d6a;\\n}\\nsvg .sb3-custom-dark {\\n  fill: #ff3355;\\n}\\n\\n\\nsvg .sb3-extension {\\n  fill: #0fbd8c;\\n  stroke: #0b8e69;\\n}\\nsvg .sb3-extension-alt {\\n  fill: #0da57a;\\n}\\nsvg .sb3-extension-dark {\\n  fill: #0b8e69;\\n}\\n\\n\\nsvg .sb3-obsolete {\\n  fill: #ed4242;\\n  stroke: #ca2b2b;\\n}\\nsvg .sb3-obsolete-alt {\\n  fill: #db3333;\\n}\\nsvg .sb3-obsolete-dark {\\n  fill: #ca2b2b;\\n}\\n\\n\\nsvg .sb3-grey {\\n  fill: #bfbfbf;\\n  stroke: #909090;\\n}\\nsvg .sb3-grey-alt {\\n  fill: #b2b2b2;\\n}\\nsvg .sb3-grey-dark {\\n  fill: #909090;\\n}\\n\\n\\nsvg .sb3-label {\\n  fill: #fff;\\n}\\n\\nsvg .sb3-input-color {\\n  stroke: #fff;\\n}\\n\\nsvg .sb3-input-number,\\nsvg .sb3-input-string {\\n  fill: #fff;\\n}\\nsvg .sb3-literal-number,\\nsvg .sb3-literal-string {\\n  fill: #575e75;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-motion {\\n  fill: #80b5ff;\\n  stroke: #3373cc;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-motion-alt {\\n  fill: #b3d2ff;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-motion-dark {\\n  fill: #3373cc;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-looks {\\n  fill: #ccb3ff;\\n  stroke: #774dcb;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-looks-alt {\\n  fill: #ddccff;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-looks-dark {\\n  fill: #774dcb;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-sound {\\n  fill: #e19de1;\\n  stroke: #bd42bd;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-sound-alt {\\n  fill: #ffb3ff;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-sound-dark {\\n  fill: #bd42bd;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-control {\\n  fill: #ffbe4c;\\n  stroke: #cf8b17;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-control-alt {\\n  fill: #ffda99;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-control-dark {\\n  fill: #cf8b17;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-events {\\n  fill: #ffd966;\\n  stroke: #cc9900;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-events-alt {\\n  fill: #ffecb3;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-events-dark {\\n  fill: #cc9900;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-sensing {\\n  fill: #85c4e0;\\n  stroke: #2e8eb8;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-sensing-alt {\\n  fill: #aed8ea;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-sensing-dark {\\n  fill: #2e8eb8;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-operators {\\n  fill: #7ece7e;\\n  stroke: #389438;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-operators-alt {\\n  fill: #b5e3b5;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-operators-dark {\\n  fill: #389438;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-variables {\\n  fill: #ffa54c;\\n  stroke: #db6e00;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-variables-alt {\\n  fill: #ffcc99;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-variables-dark {\\n  fill: #db6e00;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-list {\\n  fill: #ff9966;\\n  stroke: #e64d00;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-list-alt {\\n  fill: #ffcab0;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-list-dark {\\n  fill: #e64d00;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-custom {\\n  fill: #ff99aa;\\n  stroke: #e64d00;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-custom-alt {\\n  fill: #ffccd5;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-custom-dark {\\n  fill: #e64d00;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-extension {\\n  fill: #13ecaf;\\n  stroke: #0b8e69;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-extension-alt {\\n  fill: #75f0cd;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-extension-dark {\\n  fill: #0b8e69;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-obsolete {\\n  fill: #fc6666;\\n  stroke: #d32121;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-obsolete-alt {\\n  fill: #fcb0b0;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-obsolete-dark {\\n  fill: #d32121;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-grey {\\n  fill: #bfbfbf;\\n  stroke: #959595;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-grey-alt {\\n  fill: #b2b2b2;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-grey-dark {\\n  fill: #959595;\\n}\\n\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-label {\\n  fill: #000;\\n}\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-input-color {\\n  stroke: #fff;\\n}\\n\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-input-number,\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-input-string {\\n  fill: #fff;\\n}\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-literal-number,\\nsvg.scratchblocks-style-scratch3-high-contrast .sb3-literal-string {\\n  fill: #000;\\n}\\n\";\n\n// Need to define here, as we cannot reference Style#makeNewIcons\n// during JS loading phase.\nconst highContrastIcons = new Set([\"dropdownArrow\", \"turnRight\", \"turnLeft\", \"loopArrow\", \"musicBlock\", \"penBlock\", \"videoBlock\", \"ttsBlock\", \"translationBlock\"]);\nclass Style {\n  static get cssContent() {\n    return cssContent;\n  }\n  static makeCommonIcons() {\n    return [SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M20.8 3.7c-.4-.2-.9-.1-1.2.2-2 1.6-4.8 1.6-6.8 0-2.3-1.9-5.6-2.3-8.3-1v-.4c0-.6-.5-1-1-1s-1 .4-1 1v18.8c0 .5.5 1 1 1h.1c.5 0 1-.5 1-1v-6.4c1-.7 2.1-1.2 3.4-1.3 1.2 0 2.4.4 3.4 1.2 2.9 2.3 7 2.3 9.8 0 .3-.2.4-.5.4-.9V4.7c0-.5-.3-.9-.8-1zm-.3 10.2C18 16 14.4 16 11.9 14c-1.1-.9-2.5-1.4-4-1.4-1.2.1-2.3.5-3.4 1.1V4c2.5-1.4 5.5-1.1 7.7.6 2.4 1.9 5.7 1.9 8.1 0h.2l.1.1-.1 9.2z\",\n      fill: \"#45993d\"\n    }), SVG.el(\"path\", {\n      d: \"M20.6 4.8l-.1 9.1v.1c-2.5 2-6.1 2-8.6 0-1.1-.9-2.5-1.4-4-1.4-1.2.1-2.3.5-3.4 1.1V4c2.5-1.4 5.5-1.1 7.7.6 2.4 1.9 5.7 1.9 8.1 0h.2c0 .1.1.1.1.2z\",\n      fill: \"#4cbf56\"\n    })]), {\n      id: \"sb3-greenFlag\"\n    }), SVG.setProps(SVG.el(\"polygon\", {\n      points: \"6.6,0.5 13.12,0.5 19.5,6.6 19.5,13.12 13.12,19.5 6.6,19.5 0.5,13.12 0.5,6.6 \",\n      fill: \"#ec5959\",\n      stroke: \"#b84848\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-linecap\": \"round\"\n    }), {\n      id: \"sb3-stopSign\"\n    }), SVG.el(\"path\", {\n      d: \"M0 0L4 4L0 8Z\",\n      fill: \"#111\",\n      id: \"sb3-addInput\"\n    }), SVG.el(\"path\", {\n      d: \"M4 0L4 8L0 4Z\",\n      fill: \"#111\",\n      id: \"sb3-delInput\"\n    }), SVG.setProps(SVG.group([SVG.el(\"rect\", {\n      x: \"0\",\n      y: \"0\",\n      width: \"15\",\n      height: \"18\",\n      fill: \"#fff\"\n    }), SVG.el(\"rect\", {\n      x: \"1\",\n      y: \"1\",\n      width: \"13\",\n      height: \"4\",\n      fill: \"#ff920f\"\n    }), SVG.el(\"rect\", {\n      x: \"1\",\n      y: \"7\",\n      width: \"13\",\n      height: \"4\",\n      fill: \"#ff920f\"\n    }), SVG.el(\"rect\", {\n      x: \"1\",\n      y: \"13\",\n      width: \"13\",\n      height: \"4\",\n      fill: \"#ff920f\"\n    })]), {\n      id: \"sb3-list\"\n    }), SVG.el(\"image\", {\n      id: \"sb3-microbitBlock\",\n      width: \"40px\",\n      height: \"40px\",\n      href: \"data:image/png;base64,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\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M23.513 11.17h-.73c-.319 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M24.91 11.17h-.73c-.319 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M9.54 11.17h-.728c-.32 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.257-.479-.577-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M10.938 11.17h-.729c-.32 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.257-.479-.577-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M26.305 11.17h-.73c-.318 0-.574.213-.574.478v1.08h1.882v-1.08c0-.265-.26-.479-.578-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M27.702 11.17h-.73c-.318 0-.574.213-.574.478v1.08h1.882v-1.08c0-.265-.26-.479-.578-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M29.101 11.17h-.73c-.318 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M30.498 11.17h-.73c-.318 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M17.925 11.17h-.73c-.319 0-.577.213-.577.478v1.08h1.883v-1.08c0-.265-.258-.479-.576-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M19.322 11.17h-.73c-.319 0-.577.213-.577.478v1.08h1.883v-1.08c0-.265-.258-.479-.576-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M20.717 11.17h-.73c-.319 0-.575.213-.575.478v1.08h1.883v-1.08c0-.265-.26-.479-.578-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M22.114 11.17h-.73c-.319 0-.575.213-.575.478v1.08h1.883v-1.08c0-.265-.26-.479-.578-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M15.129 11.17H14.4c-.32 0-.576.213-.576.478v1.08h1.883v-1.08c0-.265-.258-.479-.578-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M16.526 11.17h-.729c-.32 0-.576.213-.576.478v1.08h1.883v-1.08c0-.265-.258-.479-.578-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M12.335 11.17h-.73c-.319 0-.575.213-.575.478v1.08h1.882v-1.08c0-.265-.26-.479-.577-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M13.732 11.17h-.73c-.319 0-.575.213-.575.478v1.08h1.883v-1.08c0-.265-.26-.479-.578-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M31.893 11.17h-.73c-.318 0-.574.213-.574.478v1.08h1.882v-1.08c0-.265-.26-.479-.578-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M33.29 11.17h-.73c-.318 0-.574.213-.574.478v1.08h1.882v-1.08c0-.265-.26-.479-.578-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M33.647 28.407H15.765V12.533h17.882c.52 0 .941.445.941.992v13.89c0 .547-.421.992-.94.992\",\n      fill: \"#FFF\"\n    }), SVG.el(\"path\", {\n      d: \"M33.647 28.407H15.765V12.533h17.882c.52 0 .941.445.941.992v13.89c0 .547-.421.992-.94.992z\",\n      stroke: \"#7C87A5\",\n      \"stroke-width\": \".893\"\n    }), SVG.el(\"path\", {\n      d: \"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V16.502c0-2.19 1.686-3.969 3.764-3.969h15.06-3.766c-2.078 0-3.764 1.778-3.764 3.969v11.905z\",\n      fill: \"#FFF\"\n    }), SVG.el(\"path\", {\n      d: \"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V16.502c0-2.19 1.686-3.969 3.764-3.969h15.06-3.766c-2.078 0-3.764 1.778-3.764 3.969v11.905z\",\n      stroke: \"#7C87A5\",\n      \"stroke-width\": \".893\"\n    }), SVG.el(\"path\", {\n      d: \"M12.941 12.533H11.06c-1.559 0-2.824 1.334-2.824 2.977v1.986c0 .547.422.992.941.992H12c.52 0 .941-.445.941-.992V15.51c0-1.643 1.265-2.977 2.824-2.977h.94-3.764z\",\n      fill: \"#4C97FF\"\n    }), SVG.el(\"path\", {\n      d: \"M12.941 12.533H11.06c-1.559 0-2.824 1.334-2.824 2.977v1.986c0 .547.422.992.941.992H12c.52 0 .941-.445.941-.992V15.51c0-1.643 1.265-2.977 2.824-2.977h.94-3.764z\",\n      stroke: \"#3D79CC\",\n      \"stroke-width\": \".893\"\n    }), SVG.el(\"path\", {\n      stroke: \"#7C87A5\",\n      \"stroke-width\": \".893\",\n      d: \"M4.47 20.474h27.961l2.157 2.974\"\n    }), SVG.el(\"path\", {\n      d: \"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V16.502c0-2.19 1.686-3.969 3.764-3.969h15.06-3.766c-2.078 0-3.764 1.778-3.764 3.969v11.905z\",\n      stroke: \"#7C87A5\",\n      \"stroke-width\": \".893\"\n    }), SVG.el(\"path\", {\n      d: \"M21.307 18.964h-.73c-.319 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M21.307 18.964h-.73c-.319 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M24.178 18.964h-.728c-.32 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.258-.479-.578-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M24.178 18.964h-.728c-.32 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.258-.479-.578-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M27.051 18.964h-.73c-.318 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.257-.479-.576-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M27.051 18.964h-.73c-.318 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.257-.479-.576-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M29.923 18.964h-.729c-.32 0-.576.214-.576.479v1.08h1.883v-1.08c0-.265-.258-.479-.578-.479\",\n      fill: \"#7C87A5\"\n    }), SVG.el(\"path\", {\n      d: \"M29.923 18.964h-.729c-.32 0-.576.214-.576.479v1.08h1.883v-1.08c0-.265-.258-.479-.578-.479z\"\n    }), SVG.el(\"path\", {\n      d: \"M33.647 28.407H15.765V20.47H32.43l2.157 2.978v3.966c0 .548-.421.993-.94.993\",\n      fill: \"#E6E7E8\"\n    }), SVG.el(\"path\", {\n      d: \"M33.647 28.407H15.765V20.47H32.43l2.157 2.978v3.966c0 .548-.421.993-.94.993z\",\n      stroke: \"#7C87A5\",\n      \"stroke-width\": \".893\"\n    }), SVG.el(\"path\", {\n      d: \"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V20.47h11.294v7.937z\",\n      fill: \"#E6E7E8\"\n    }), SVG.el(\"path\", {\n      d: \"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V20.47h11.294v7.937z\",\n      stroke: \"#7C87A5\",\n      \"stroke-width\": \".893\"\n    }), SVG.el(\"path\", {\n      fill: \"#E6E7E8\",\n      d: \"M19.53 24.438h11.294V20.47H19.529z\"\n    }), SVG.el(\"path\", {\n      stroke: \"#7C87A5\",\n      \"stroke-width\": \".893\",\n      d: \"M19.53 24.438h11.294V20.47H19.529zm12.902-3.964l2.157-2.794\"\n    })]), {\n      id: \"sb3-wedoBlock\",\n      fill: \"none\"\n    }), SVG.setProps(SVG.group([SVG.el(\"rect\", {\n      stroke: \"#7C87A5\",\n      fill: \"#FFF\",\n      x: \".5\",\n      y: \"3.59\",\n      width: \"28\",\n      height: \"25.81\",\n      rx: \"1\"\n    }), SVG.el(\"rect\", {\n      stroke: \"#7C87A5\",\n      fill: \"#E6E7E8\",\n      x: \"2.5\",\n      y: \".5\",\n      width: \"24\",\n      height: \"32\",\n      rx: \"1\"\n    }), SVG.el(\"path\", {\n      stroke: \"#7C87A5\",\n      fill: \"#FFF\",\n      d: \"M2.5 14.5h24v13h-24z\"\n    }), SVG.el(\"path\", {\n      d: \"M14.5 10.5v4\",\n      stroke: \"#7C87A5\",\n      fill: \"#E6E7E8\"\n    }), SVG.el(\"rect\", {\n      fill: \"#414757\",\n      x: \"4.5\",\n      y: \"2.5\",\n      width: \"20\",\n      height: \"10\",\n      rx: \"1\"\n    }), SVG.el(\"rect\", {\n      fill: \"#7C87A5\",\n      opacity: \".5\",\n      x: \"13.5\",\n      y: \"20.13\",\n      width: \"2\",\n      height: \"2\",\n      rx: \".5\"\n    }), SVG.el(\"path\", {\n      d: \"M9.06 20.13h1.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1.5a1 1 0 0 1 0-2zM19.93 22.13h-1.51a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h1.5a1 1 0 0 1 .01 2zM8.23 17.5H5a.5.5 0 0 1-.5-.5v-2.5h6l-1.85 2.78a.51.51 0 0 1-.42.22zM18.15 18.85l-.5.5a.49.49 0 0 0-.15.36V20a.5.5 0 0 1-.5.5h-.5a.5.5 0 0 1-.5-.5.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5.5.5 0 0 1-.5.5H12a.5.5 0 0 1-.5-.5v-.29a.49.49 0 0 0-.15-.36l-.5-.5a.51.51 0 0 1 0-.71l1.51-1.49a.47.47 0 0 1 .35-.15h3.58a.47.47 0 0 1 .35.15l1.51 1.49a.51.51 0 0 1 0 .71zM10.85 23.45l.5-.5a.49.49 0 0 0 .15-.36v-.29a.5.5 0 0 1 .5-.5h.5a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5h.5a.5.5 0 0 1 .5.5v.29a.49.49 0 0 0 .15.36l.5.5a.5.5 0 0 1 0 .7l-1.51 1.5a.47.47 0 0 1-.35.15h-3.58a.47.47 0 0 1-.35-.15l-1.51-1.5a.5.5 0 0 1 0-.7z\",\n      fill: \"#7C87A5\",\n      opacity: \".5\"\n    }), SVG.el(\"path\", {\n      d: \"M21.5 27.5h5v4a1 1 0 0 1-1 1h-4v-5z\",\n      stroke: \"#CC4C23\",\n      fill: \"#F15A29\"\n    })]), {\n      transform: \"translate(5.5 3.5)\",\n      id: \"sb3-ev3Block\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M35 28H5a1 1 0 0 1-1-1V12c0-.6.4-1 1-1h30c.5 0 1 .4 1 1v15c0 .5-.5 1-1 1z\",\n      fill: \"#fff\"\n    }), SVG.el(\"path\", {\n      fill: \"red\",\n      d: \"M4 25h32v2.7H4zm9-1h-2.2a1 1 0 0 1-1-1v-9.7c0-.6.4-1 1-1H13c.6 0 1 .4 1 1V23c0 .6-.5 1-1 1z\"\n    }), SVG.el(\"path\", {\n      fill: \"red\",\n      d: \"M6.1 19.3v-2.2c0-.5.4-1 1-1h9.7c.5 0 1 .5 1 1v2.2c0 .5-.5 1-1 1H7.1a1 1 0 0 1-1-1z\"\n    }), SVG.el(\"circle\", {\n      fill: \"red\",\n      cx: \"22.8\",\n      cy: \"18.2\",\n      r: \"3.4\"\n    }), SVG.el(\"circle\", {\n      fill: \"red\",\n      cx: \"30.6\",\n      cy: \"18.2\",\n      r: \"3.4\"\n    }), SVG.el(\"path\", {\n      fill: \"red\",\n      d: \"M4.2 27h31.9v.7H4.2z\"\n    }), SVG.el(\"circle\", {\n      fill: \"#e0e0e0\",\n      cx: \"22.8\",\n      cy: \"18.2\",\n      r: \"2.3\"\n    }), SVG.el(\"circle\", {\n      fill: \"#e0e0e0\",\n      cx: \"30.6\",\n      cy: \"18.2\",\n      r: \"2.3\"\n    }), SVG.el(\"path\", {\n      fill: \"#e0e0e0\",\n      d: \"M12.5 22.9h-1.2c-.3 0-.5-.2-.5-.5V14c0-.3.2-.5.5-.5h1.2c.3 0 .5.2.5.5v8.4c0 .3-.2.5-.5.5z\"\n    }), SVG.el(\"path\", {\n      fill: \"#e0e0e0\",\n      d: \"M7.2 18.7v-1.2c0-.3.2-.5.5-.5h8.4c.3 0 .5.2.5.5v1.2c0 .3-.2.5-.5.5H7.7c-.3 0-.5-.2-.5-.5zM4 26h32v2H4z\"\n    }), SVG.el(\"path\", {\n      stroke: \"#666\",\n      \"stroke-width\": \".5\",\n      d: \"M35.2 27.9H4.8a1 1 0 0 1-1-1V12.1c0-.6.5-1 1-1h30.5c.5 0 1 .4 1 1V27a1 1 0 0 1-1.1.9z\"\n    }), SVG.el(\"path\", {\n      stroke: \"#666\",\n      \"stroke-width\": \".5\",\n      d: \"M35.2 27.9H4.8a1 1 0 0 1-1-1V12.1c0-.6.5-1 1-1h30.5c.5 0 1 .4 1 1V27a1 1 0 0 1-1.1.9z\"\n    })]), {\n      id: \"sb3-makeymakeyBlock\",\n      fill: \"none\"\n    }), SVG.el(\"image\", {\n      id: \"sb3-gdxforBlock\",\n      width: \"40px\",\n      height: \"40px\",\n      href: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAABAlBMVEUAAAABAQEAAAB9h6YAAAAAAAAAAAB8iKZ7iKaAjKvm5+h+iqhcXFxGR0d8iKbj5OV9iKZ8h6be3+Db3d19h6acnJ0AAAB7nrDh4uPh4uN9iabZ2tt9iKbX19nJycnExsZ8iKe+wMC7vL2Eka/g4ePU1dV8iKZ9iKZ9iKd+iKitra2RkZGLjo5wcHCLi7l0oqJV//9csdZ8h6WFkq//vwDm5+iEka79vgJ6iql9iaaHk6tgq9Btm71+iadmo8dzk7OCj6yAjKp/iqhiqc1qnsB4jKtgrNFwl7d1tLTgtCxpocN0krJ2j65ossWNtZSbt4LAulHWsDnasTTuvhXzvg9zk7TzqAfaAAAAMXRSTlMAJiLoFBwI8q4a+0c4M/nr3tnQwKxYDAnk2726tbGMh4J9dinXq56ddG9nT01ACwsDk/+seAAAAidJREFUWMPt2Olu2kAUhuE5NvuaBAhZm7TpvufgMXaBbmAghOzp/d9KD7RW6yaqPeL7YVV9/471aBgfCXnUH7ULNhtkF96qv1dgwwoxoM08cDsJcwfMdgwonoiJPRFjQXkscQM3Adhxk4NuJwkoDx0nSp5NDTiae958NEaBwzkvC4YYcOxx7fCoeJhnrwcBv7H9TklFm08R4JD5SEkiMg8B4IjXwsV1HgHAPu+EizsQcMbr2B0OufZz7X0NcIZSwC9+rD3nADI2/fCtrHEfAvZ8Liqp6PuIwZZO+ZmSnspcY8AZ55WU5xkElDwuK1Vm7xgFTjhfLud5AgPHAUvBGARKvYnnTXpp/gvAg9PLyykSPLt1nNszIHjuSOdAcNp1nO4UeYYXNzcX0UH62P+0AnjH8lgCgL8s/+uXzwZgrOV2JAMwxpIMwRjLHIyxzMEYyxyMWgAwYiHAzm99iLQ6eOJEul4d7Ea6WhG8W7rAE+fertHgVXp+clpB9Oet64M/wH2TKwI/FrRFTH6JIZ6NvmZpxoDtptlFULOtzGPWy+4/r//gvwKGgcC90NtTqIg2dIuyClaWDvTjKlDMLba4UaUMcIuVbd0gyiGwjGVlFuKWfkQZhEfSQnypd8mCvOHGvkA5quo6EQSs6yrlNumN3obs0KKGHJ70QD+hLOQMW7r0sFI5KJVeY+bGkr1JopKlEG0StXbrW/uvQGMookXLLPFAZYTMJju/7z6rRW1MZcnIAAAAAElFTkSuQmCC\"\n    }), SVG.el(\"image\", {\n      id: \"sb3-boostBlock\",\n      width: \"40px\",\n      height: \"40px\",\n      href: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAKlBMVEUAAAD///98h6Xm5+iVnrb/Zhq+w9L5hk73+Pnf4eSQmbLr7Ozo39vp184hSCf6AAAAAXRSTlMAQObYZgAAAOFJREFUSMftlDEOgjAUhonhAi1sLvIk7NDJDTYu0LhzBzcXruHoDTyFB/BCNi30KU3InzioSb++hAS+vPfKa5pEIpHvk7a8gpf8ISWINtlg4i7ZFOKVTBlqsUR+ItYZJG7VzQQgMqGYd7zWRArpULEAe5Q/J9JMj4rluC7uleNw7TFRXcoREDnlinjX57eUsvRTn8+AE0/6OKV0g5buYTTyWFFr/XAp3aDzed4yFJWnKbhPbtaXXohDNYlDJWz4zSxEokkkEjb496AiVtqAbIYgYNGWBmhgES+NX6SRSORfeAJMWajr95DdqQAAAABJRU5ErkJggg==\"\n    })];\n  }\n  static makeOriginalIcons() {\n    return [...Style.makeCommonIcons(), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M12.71 2.44A2.41 2.41 0 0 1 12 4.16L8.08 8.08a2.45 2.45 0 0 1-3.45 0L.72 4.16A2.42 2.42 0 0 1 0 2.44 2.48 2.48 0 0 1 .71.71C1 .47 1.43 0 6.36 0s5.39.46 5.64.71a2.44 2.44 0 0 1 .71 1.73z\",\n      fill: \"#231f20\",\n      opacity: \".1\"\n    }), SVG.el(\"path\", {\n      d: \"M6.36 7.79a1.43 1.43 0 0 1-1-.42L1.42 3.45a1.44 1.44 0 0 1 0-2c.56-.56 9.31-.56 9.87 0a1.44 1.44 0 0 1 0 2L7.37 7.37a1.43 1.43 0 0 1-1.01.42z\",\n      fill: \"#fff\"\n    })]), {\n      id: \"sb3-dropdownArrow\",\n      transform: \"scale(0.944)\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M22.68 12.2a1.6 1.6 0 0 1-1.27.63h-7.69a1.59 1.59 0 0 1-1.16-2.58l1.12-1.41a4.82 4.82 0 0 0-3.14-.77 4.31 4.31 0 0 0-2 .8A4.25 4.25 0 0 0 7.2 10.6a5.06 5.06 0 0 0 .54 4.62A5.58 5.58 0 0 0 12 17.74a2.26 2.26 0 0 1-.16 4.52A10.25 10.25 0 0 1 3.74 18a10.14 10.14 0 0 1-1.49-9.22 9.7 9.7 0 0 1 2.83-4.14A9.92 9.92 0 0 1 9.66 2.5a10.66 10.66 0 0 1 7.72 1.68l1.08-1.35a1.57 1.57 0 0 1 1.24-.6 1.6 1.6 0 0 1 1.54 1.21l1.7 7.37a1.57 1.57 0 0 1-.26 1.39z\",\n      fill: \"#3d79cc\"\n    }), SVG.el(\"path\", {\n      d: \"M21.38 11.83h-7.61a.59.59 0 0 1-.43-1l1.75-2.19a5.9 5.9 0 0 0-4.7-1.58 5.07 5.07 0 0 0-4.11 3.17A6 6 0 0 0 7 15.77a6.51 6.51 0 0 0 5 2.92 1.31 1.31 0 0 1-.08 2.62 9.3 9.3 0 0 1-7.35-3.82 9.16 9.16 0 0 1-1.4-8.37A8.51 8.51 0 0 1 5.71 5.4a8.76 8.76 0 0 1 4.11-1.92 9.71 9.71 0 0 1 7.75 2.07l1.67-2.1a.59.59 0 0 1 1 .21L22 11.08a.59.59 0 0 1-.62.75z\",\n      fill: \"#fff\"\n    })]), {\n      id: \"sb3-turnRight\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M20.34 18.21a10.24 10.24 0 0 1-8.1 4.22 2.26 2.26 0 0 1-.16-4.52 5.58 5.58 0 0 0 4.25-2.53 5.06 5.06 0 0 0 .54-4.62A4.25 4.25 0 0 0 15.55 9a4.31 4.31 0 0 0-2-.8 4.82 4.82 0 0 0-3.15.8l1.12 1.41A1.59 1.59 0 0 1 10.36 13H2.67a1.56 1.56 0 0 1-1.26-.63A1.54 1.54 0 0 1 1.13 11l1.72-7.43A1.59 1.59 0 0 1 4.38 2.4a1.57 1.57 0 0 1 1.24.6L6.7 4.35a10.66 10.66 0 0 1 7.72-1.68A9.88 9.88 0 0 1 19 4.81 9.61 9.61 0 0 1 21.83 9a10.08 10.08 0 0 1-1.49 9.21z\",\n      fill: \"#3d79cc\"\n    }), SVG.el(\"path\", {\n      d: \"M19.56 17.65a9.29 9.29 0 0 1-7.35 3.83 1.31 1.31 0 0 1-.08-2.62 6.53 6.53 0 0 0 5-2.92 6.05 6.05 0 0 0 .67-5.51 5.32 5.32 0 0 0-1.64-2.16 5.21 5.21 0 0 0-2.48-1A5.86 5.86 0 0 0 9 8.84L10.74 11a.59.59 0 0 1-.43 1H2.7a.6.6 0 0 1-.6-.75l1.71-7.42a.59.59 0 0 1 1-.21l1.67 2.1a9.71 9.71 0 0 1 7.75-2.07 8.84 8.84 0 0 1 4.12 1.92 8.68 8.68 0 0 1 2.54 3.72 9.14 9.14 0 0 1-1.33 8.36z\",\n      fill: \"#fff\"\n    })]), {\n      id: \"sb3-turnLeft\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M23.3 11c-.3.6-.9 1-1.5 1h-1.6c-.1 1.3-.5 2.5-1.1 3.6-.9 1.7-2.3 3.2-4.1 4.1-1.7.9-3.6 1.2-5.5.9-1.8-.3-3.5-1.1-4.9-2.3-.7-.7-.7-1.9 0-2.6.6-.6 1.6-.7 2.3-.2H7c.9.6 1.9.9 2.9.9s1.9-.3 2.7-.9c1.1-.8 1.8-2.1 1.8-3.5h-1.5c-.9 0-1.7-.7-1.7-1.7 0-.4.2-.9.5-1.2l4.4-4.4c.7-.6 1.7-.6 2.4 0L23 9.2c.5.5.6 1.2.3 1.8z\",\n      fill: \"#cf8b17\"\n    }), SVG.el(\"path\", {\n      d: \"M21.8 11h-2.6c0 1.5-.3 2.9-1 4.2-.8 1.6-2.1 2.8-3.7 3.6-1.5.8-3.3 1.1-4.9.8-1.6-.2-3.2-1-4.4-2.1-.4-.3-.4-.9-.1-1.2.3-.4.9-.4 1.2-.1 1 .7 2.2 1.1 3.4 1.1s2.3-.3 3.3-1c.9-.6 1.6-1.5 2-2.6.3-.9.4-1.8.2-2.8h-2.4c-.4 0-.7-.3-.7-.7 0-.2.1-.3.2-.4l4.4-4.4c.3-.3.7-.3.9 0L22 9.8c.3.3.4.6.3.9s-.3.3-.5.3z\",\n      fill: \"#fff\"\n    })]), {\n      id: \"sb3-loopArrow\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M28.456 21.675c-.009-.312-.087-.825-.256-1.702-.096-.495-.612-3.022-.753-3.73-.395-1.98-.76-3.92-1.142-6.113-.732-4.223-.693-6.05.344-6.527.502-.23 1.06-.081 1.842.35.413.227 2.181 1.365 2.07 1.296 1.993 1.243 3.463 1.775 4.928 1.549 1.527-.237 2.505-.06 2.877.618.348.635.015 1.416-.729 2.18-1.473 1.516-3.976 2.514-5.849 2.023-.822-.218-1.238-.464-2.38-1.266a9.737 9.737 0 0 0-.095-.066c.047.593.264 1.74.717 3.803.294 1.336 2.079 9.187 2.637 11.674l.002.012c.529 2.637-1.872 4.724-5.235 4.724-3.29 0-6.363-1.988-6.862-4.528-.53-2.64 1.873-4.734 5.233-4.734a8.411 8.411 0 0 1 2.65.437zM11.46 27.666c-.01-.319-.091-.84-.266-1.738-.09-.46-.595-2.937-.753-3.727-.39-1.96-.752-3.892-1.131-6.07-.732-4.224-.692-6.052.344-6.527.502-.23 1.06-.082 1.841.349.414.228 2.181 1.365 2.07 1.296 1.992 1.243 3.461 1.775 4.925 1.549 1.525-.24 2.504-.064 2.876.614.348.635.015 1.415-.728 2.18-1.474 1.517-3.977 2.513-5.847 2.017-.822-.218-1.237-.463-2.38-1.266a9.729 9.729 0 0 0-.094-.065c.047.593.264 1.74.717 3.802.294 1.337 2.078 9.19 2.636 11.675l.003.013c.517 2.638-1.884 4.732-5.234 4.732-3.286 0-6.359-1.993-6.87-4.54-.518-2.639 1.885-4.73 5.242-4.73.904 0 1.802.15 2.65.436z\",\n      stroke: \"#000\",\n      \"stroke-opacity\": \".1\"\n    }), SVG.el(\"path\", {\n      d: \"M32.18 25.874C32.636 28.157 30.512 30 27.433 30c-3.07 0-5.923-1.843-6.372-4.126-.458-2.285 1.665-4.136 4.743-4.136.647 0 1.283.084 1.89.234a7 7 0 0 1 .938.302c.87-.02-.104-2.294-1.835-12.229-2.134-12.303 3.06-1.87 8.768-2.753 5.708-.885.076 4.82-3.65 3.844-3.724-.987-4.65-7.153.263 14.738zm-16.998 5.99C15.63 34.148 13.507 36 10.439 36c-3.068 0-5.92-1.852-6.379-4.136-.448-2.284 1.674-4.135 4.751-4.135 1.002 0 1.974.197 2.854.544.822-.055-.15-2.377-1.862-12.228-2.133-12.303 3.059-1.87 8.764-2.753 5.706-.894.076 4.821-3.648 3.834-3.723-.987-4.648-7.152.263 14.738z\",\n      fill: \"#FFF\"\n    })]), {\n      id: \"sb3-musicBlock\",\n      fill: \"none\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M8.753 34.602l-4.251 1.779 1.784-4.236c1.218-2.892 2.907-5.423 5.03-7.538L31.066 4.93c.846-.842 2.65-.41 4.032.967 1.38 1.375 1.816 3.173.97 4.015L16.318 29.59c-2.123 2.116-4.664 3.799-7.565 5.012\",\n      fill: \"#FFF\"\n    }), SVG.el(\"path\", {\n      d: \"M29.41 6.111s-4.45-2.379-8.202 5.771c-1.734 3.766-4.35 1.546-4.35 1.546\"\n    }), SVG.el(\"path\", {\n      d: \"M36.42 8.825c0 .463-.14.873-.432 1.164l-9.335 9.301c.282-.29.41-.668.41-1.12 0-.874-.507-1.963-1.406-2.868-1.362-1.358-3.147-1.8-4.002-.99L30.99 5.01c.844-.84 2.65-.41 4.035.96.898.904 1.396 1.982 1.396 2.855M10.515 33.774a23.74 23.74 0 0 1-1.764.83L4.5 36.382l1.786-4.235c.258-.604.529-1.186.833-1.757.69.183 1.449.625 2.109 1.282.659.658 1.102 1.412 1.287 2.102\",\n      fill: \"#4C97FF\"\n    }), SVG.el(\"path\", {\n      d: \"M36.498 8.748c0 .464-.141.874-.433 1.165l-19.742 19.68c-2.131 2.111-4.673 3.793-7.572 5.01L4.5 36.381l.974-2.317 1.925-.808c2.899-1.218 5.441-2.899 7.572-5.01l19.742-19.68c.292-.292.432-.702.432-1.165 0-.647-.27-1.4-.779-2.123.249.172.498.377.736.614.898.905 1.396 1.983 1.396 2.856\",\n      fill: \"#575E75\",\n      opacity: \".15\"\n    }), SVG.el(\"path\", {\n      d: \"M18.45 12.831a.904.904 0 1 1-1.807 0 .904.904 0 0 1 1.807 0z\",\n      fill: \"#575E75\"\n    })]), {\n      id: \"sb3-penBlock\",\n      stroke: \"#575E75\",\n      fill: \"none\",\n      \"stroke-linejoin\": \"round\"\n    }), SVG.setProps(SVG.group([SVG.el(\"circle\", {\n      opacity: 0.25,\n      cx: 32,\n      cy: 16,\n      r: 4.5\n    }), SVG.el(\"circle\", {\n      opacity: 0.5,\n      cx: 32,\n      cy: 12,\n      r: 4.5\n    }), SVG.el(\"circle\", {\n      opacity: 0.75,\n      cx: 32,\n      cy: 8,\n      r: 4.5\n    }), SVG.el(\"circle\", {\n      cx: 32,\n      cy: 4,\n      r: 4.5\n    }), SVG.el(\"path\", {\n      d: \"M22.672 4.42l-6.172 4V6.1c0-2.01-1.563-3.6-3.5-3.6H4.1C2.076 2.5.5 4.076.5 6.1V14c0 1.927 1.584 3.512 3.6 3.6H13c1.902 0 3.5-1.653 3.5-3.6v-2.283l6.257 3.754.097.075c.02.02.098.054.146.054.267 0 .5-.217.5-.5V4.8c0 .037-.056-.094-.129-.243-.145-.242-.43-.299-.7-.137z\",\n      fill: \"#4D4D4D\",\n      \"stroke-linejoin\": \"round\"\n    })]), {\n      id: \"sb3-videoBlock\",\n      stroke: \"#000\",\n      fill: \"#FFF\",\n      \"stroke-opacity\": 0.15\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M25.644 20.5c-1.667 1.937-4.539 3.429-5.977 3.429a1.25 1.25 0 0 1-.557-.137c-.372-.186-.61-.542-.61-1.03 0-.105.017-.207.05-.308.076-.236.624-.986.727-1.173.27-.484.462-1.075.566-1.865A8.5 8.5 0 0 1 24 3.5h4a8.5 8.5 0 1 1 0 17h-2.356z\",\n      fill: \"#FFF\"\n    }), SVG.el(\"path\", {\n      d: \"M15.5 21.67c0-1.016-1.494-1.586-2.387-.782l-2.7 2.163A5.958 5.958 0 0 1 6.7 24.33h-.4c-1.035 0-1.8.69-1.8 1.573v4.235c0 .883.765 1.572 1.8 1.572h.4c1.458 0 2.754.423 3.82 1.287l2.598 2.161c.908.75 2.382.188 2.382-.876V21.67z\",\n      fill: \"#4D4D4D\"\n    })]), {\n      id: \"sb3-ttsBlock\",\n      stroke: \"#000\",\n      \"stroke-opacity\": 0.15\n    }), SVG.el(\"image\", {\n      id: \"sb3-translateBlock\",\n      width: \"40px\",\n      height: \"40px\",\n      href: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAA21BMVEUAAAAAAAAAAAAAAADS0tIAAABHR0cAAADX19cAAAAAAACkpKRqamq2traurq6WlpbV1dWEhITHx8fPz8/Ly8vDw8O9vb0AAABMTEz////Z2dlXXnVMl//g4ODu7u7m5ub4+PhPmf/x8fH09PT6+vri4uNRmv/r6+1uqv/0+P9Ynv/p8v+rrrphZ33S5f+51v9ho/+1uMKBhpfH3v+Wmqhrcoacxf+Pvv/KzNSgpLGLkKDd6/+rzf9npv/AwsuDtv98s/90rv9jpP9GieeOrtm5ubl2fI7Z4u56otk5hEFfAAAAGXRSTlMAJhgM1wYyHvIkEWpBhXhc5U+uybyhk0YvleQYgwAABDpJREFUWMPtmNl6mzAQhQMCBAYbvLX1GIwxi7e2TtosTdKk+/L+T1QBVoQtJHDby5yLROYTPzOagSM4e9az6oVUrDgKxh39//Bwb+QBkTZ2VL3hypYilKWicpY6gmWcTCbxIoSh0xHjOkZXA4m0rlGcrcBsslcSmrYq4qm2GczmE6Hms6A8W4GQHZ1BTxXweuTCErGz1TEEaTpLymML6HVq87VhIWPRs21yNu679guNXn9hOnWVMUwanzxG0yCTdYQQts195umwJmnUDSatFHQRPaVvljkl4CAuRlWrCfD9uiZEbR+ObrnjfRDhwHUtdAi0gK/vLtts+VqDVfIMjZSmLEycBuD1D4kK8MHc+Ju3/FFQaHdXc4rBU/8NiCE+OJyAIQKuz32qjA7O1xzwqMtiUETAXeRzinZcyoPgsPpDcco3q9WD729WhTI/e1itbriUzwwtqPI0Q5et4ZoA6SDj1pCWOeB44qJ88aOiIB8j/xMH5IiUJwG+jfyHPMCNH20FQEpkPGnbnBeFuI78Fd82VWJCeTyQCzHb3pMCb8VAQhxBCkPKkzf2Z9J9mR9dCxqb3tBO17EoTw4ky0f0VXSnUCGE6LDp1tvlwK0cyNQMJA1DlL3Px8TenvTjpcAN5cD7VVSsoR992c4oS+aGcuDbzxFBfVqvv5L/375DCzeUAXfnOW5TJHudffvdzg3FwPdZvnbX6/LXr+9t3ZCzAAaMNh/X9BdAWzcUm9T2vnrpk91QbqOhLEDeDZuNHkBSX94Nm7ciAJOWAkW8WZIDl1MikAD57ZwceJsDL0VAfsPJwgzzO5cHvsmBb2IJkAlhB5InntlXlJcc8MO00GMzsHTbsMJDdU+hOxIeCfKuXYQu7ZJ5oDmExwPjfAEvyZ9lGyDW9tOWMH6l1z4nLwjrQ572RRugAvMS57mq4MH7czq9Kgpz1QZoDcI4DsHrWUjw4E1JbLeTSZ5z2gLYMTTwBnaOEwBvS1Ke86UUyF7isKpLrIHkSvVGBORdUQx8nFb0KAUy38aSCO8I510hMrhrBOrGEFIYGToPZM+Fn+XwiraiAMh2Uwnb+3DAC9Z/t3TIA2W7MwZkYbH+uZIC+f0jD3z9+vXF05hIAJTtcK3TLIDnMSLnhqeZlDo8eksYqH/3UskWPz7aCuDTX3urMiA5ejHCp7+YV4W9gxBnMFJP/XRwKNT3IEhLZpIGQMp86seNY6LlutRQgrFr6dLPLyELjm44eemIWt6C+JP0A1HffCIm4GDEw2jvpNTxbIwQ0kUTUYUYkgYTSXfMBU1Ee+G6fSwkOlpA/RFcJCR2erRHkllKSjNWhdd+NQbqkJrgunyPhKBIprpeiZyLZtEeCRNWQdlUZPU8yF1yYJ1J1HGGEC5iknS8pN0tRtoDDzTSNDLpqjMu2s4b9fBZg/TcJVHjrA7GSl/JZz7rWbX6A0ZzUfwVEqfrAAAAAElFTkSuQmCC\"\n    })];\n  }\n  static makeHighContrastIcons() {\n    // Make sure to update the highContrastIcons set above!\n    return [...Style.makeCommonIcons(),\n    // https://github.com/scratchfoundation/scratch-gui/tree/beta/src/lib/themes/high-contrast/blocks-media\n    SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M12.71 2.44A2.41 2.41 0 0 1 12 4.16L8.08 8.08a2.45 2.45 0 0 1-3.45 0L.72 4.16A2.42 2.42 0 0 1 0 2.44 2.48 2.48 0 0 1 .71.71C1 .47 1.43 0 6.36 0s5.39.46 5.64.71a2.44 2.44 0 0 1 .71 1.73z\",\n      fill: \"#231f20\",\n      opacity: \".1\"\n    }), SVG.el(\"path\", {\n      d: \"M6.36 7.79a1.43 1.43 0 0 1-1-.42L1.42 3.45a1.44 1.44 0 0 1 0-2c.56-.56 9.31-.56 9.87 0a1.44 1.44 0 0 1 0 2L7.37 7.37a1.43 1.43 0 0 1-1.01.42z\",\n      fill: \"#000\"\n    })]), {\n      id: \"sb3-dropdownArrow-high-contrast\",\n      transform: \"scale(0.944)\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M22.68 12.2a1.6 1.6 0 0 1-1.27.63h-7.69a1.59 1.59 0 0 1-1.16-2.58l1.12-1.41a4.82 4.82 0 0 0-3.14-.77 4.31 4.31 0 0 0-2 .8A4.25 4.25 0 0 0 7.2 10.6a5.06 5.06 0 0 0 .54 4.62A5.58 5.58 0 0 0 12 17.74a2.26 2.26 0 0 1-.16 4.52A10.25 10.25 0 0 1 3.74 18a10.14 10.14 0 0 1-1.49-9.22 9.7 9.7 0 0 1 2.83-4.14A9.92 9.92 0 0 1 9.66 2.5a10.66 10.66 0 0 1 7.72 1.68l1.08-1.35a1.57 1.57 0 0 1 1.24-.6 1.6 1.6 0 0 1 1.54 1.21l1.7 7.37a1.57 1.57 0 0 1-.26 1.39z\",\n      fill: \"#000\"\n    }), SVG.el(\"path\", {\n      d: \"M21.38 11.83h-7.61a.59.59 0 0 1-.43-1l1.75-2.19a5.9 5.9 0 0 0-4.7-1.58 5.07 5.07 0 0 0-4.11 3.17A6 6 0 0 0 7 15.77a6.51 6.51 0 0 0 5 2.92 1.31 1.31 0 0 1-.08 2.62 9.3 9.3 0 0 1-7.35-3.82 9.16 9.16 0 0 1-1.4-8.37A8.51 8.51 0 0 1 5.71 5.4a8.76 8.76 0 0 1 4.11-1.92 9.71 9.71 0 0 1 7.75 2.07l1.67-2.1a.59.59 0 0 1 1 .21L22 11.08a.59.59 0 0 1-.62.75z\",\n      fill: \"#000\"\n    })]), {\n      id: \"sb3-turnRight-high-contrast\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M20.34 18.21a10.24 10.24 0 0 1-8.1 4.22 2.26 2.26 0 0 1-.16-4.52 5.58 5.58 0 0 0 4.25-2.53 5.06 5.06 0 0 0 .54-4.62A4.25 4.25 0 0 0 15.55 9a4.31 4.31 0 0 0-2-.8 4.82 4.82 0 0 0-3.15.8l1.12 1.41A1.59 1.59 0 0 1 10.36 13H2.67a1.56 1.56 0 0 1-1.26-.63A1.54 1.54 0 0 1 1.13 11l1.72-7.43A1.59 1.59 0 0 1 4.38 2.4a1.57 1.57 0 0 1 1.24.6L6.7 4.35a10.66 10.66 0 0 1 7.72-1.68A9.88 9.88 0 0 1 19 4.81 9.61 9.61 0 0 1 21.83 9a10.08 10.08 0 0 1-1.49 9.21z\",\n      fill: \"#000\"\n    }), SVG.el(\"path\", {\n      d: \"M19.56 17.65a9.29 9.29 0 0 1-7.35 3.83 1.31 1.31 0 0 1-.08-2.62 6.53 6.53 0 0 0 5-2.92 6.05 6.05 0 0 0 .67-5.51 5.32 5.32 0 0 0-1.64-2.16 5.21 5.21 0 0 0-2.48-1A5.86 5.86 0 0 0 9 8.84L10.74 11a.59.59 0 0 1-.43 1H2.7a.6.6 0 0 1-.6-.75l1.71-7.42a.59.59 0 0 1 1-.21l1.67 2.1a9.71 9.71 0 0 1 7.75-2.07 8.84 8.84 0 0 1 4.12 1.92 8.68 8.68 0 0 1 2.54 3.72 9.14 9.14 0 0 1-1.33 8.36z\",\n      fill: \"#000\"\n    })]), {\n      id: \"sb3-turnLeft-high-contrast\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M23.3 11c-.3.6-.9 1-1.5 1h-1.6c-.1 1.3-.5 2.5-1.1 3.6-.9 1.7-2.3 3.2-4.1 4.1-1.7.9-3.6 1.2-5.5.9-1.8-.3-3.5-1.1-4.9-2.3-.7-.7-.7-1.9 0-2.6.6-.6 1.6-.7 2.3-.2H7c.9.6 1.9.9 2.9.9s1.9-.3 2.7-.9c1.1-.8 1.8-2.1 1.8-3.5h-1.5c-.9 0-1.7-.7-1.7-1.7 0-.4.2-.9.5-1.2l4.4-4.4c.7-.6 1.7-.6 2.4 0L23 9.2c.5.5.6 1.2.3 1.8z\",\n      fill: \"#000\"\n    }), SVG.el(\"path\", {\n      d: \"M21.8 11h-2.6c0 1.5-.3 2.9-1 4.2-.8 1.6-2.1 2.8-3.7 3.6-1.5.8-3.3 1.1-4.9.8-1.6-.2-3.2-1-4.4-2.1-.4-.3-.4-.9-.1-1.2.3-.4.9-.4 1.2-.1 1 .7 2.2 1.1 3.4 1.1s2.3-.3 3.3-1c.9-.6 1.6-1.5 2-2.6.3-.9.4-1.8.2-2.8h-2.4c-.4 0-.7-.3-.7-.7 0-.2.1-.3.2-.4l4.4-4.4c.3-.3.7-.3.9 0L22 9.8c.3.3.4.6.3.9s-.3.3-.5.3z\",\n      fill: \"#000\"\n    })]), {\n      id: \"sb3-loopArrow-high-contrast\"\n    }),\n    // https://github.com/scratchfoundation/scratch-gui/tree/beta/src/lib/themes/high-contrast/extensions\n    SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M28.456 21.675c-.009-.312-.087-.825-.256-1.702-.096-.495-.612-3.022-.753-3.73-.395-1.98-.76-3.92-1.142-6.113-.732-4.223-.693-6.05.344-6.527.502-.23 1.06-.081 1.842.35.413.227 2.181 1.365 2.07 1.296 1.993 1.243 3.463 1.775 4.928 1.549 1.527-.237 2.505-.06 2.877.618.348.635.015 1.416-.729 2.18-1.473 1.516-3.976 2.514-5.849 2.023-.822-.218-1.238-.464-2.38-1.266a9.737 9.737 0 0 0-.095-.066c.047.593.264 1.74.717 3.803.294 1.336 2.079 9.187 2.637 11.674l.002.012c.529 2.637-1.872 4.724-5.235 4.724-3.29 0-6.363-1.988-6.862-4.528-.53-2.64 1.873-4.734 5.233-4.734a8.411 8.411 0 0 1 2.65.437zM11.46 27.666c-.01-.319-.091-.84-.266-1.738-.09-.46-.595-2.937-.753-3.727-.39-1.96-.752-3.892-1.131-6.07-.732-4.224-.692-6.052.344-6.527.502-.23 1.06-.082 1.841.349.414.228 2.181 1.365 2.07 1.296 1.992 1.243 3.461 1.775 4.925 1.549 1.525-.24 2.504-.064 2.876.614.348.635.015 1.415-.728 2.18-1.474 1.517-3.977 2.513-5.847 2.017-.822-.218-1.237-.463-2.38-1.266a9.729 9.729 0 0 0-.094-.065c.047.593.264 1.74.717 3.802.294 1.337 2.078 9.19 2.636 11.675l.003.013c.517 2.638-1.884 4.732-5.234 4.732-3.286 0-6.359-1.993-6.87-4.54-.518-2.639 1.885-4.73 5.242-4.73.904 0 1.802.15 2.65.436z\",\n      stroke: \"#000\"\n    }), SVG.el(\"path\", {\n      d: \"M32.18 25.874C32.636 28.157 30.512 30 27.433 30c-3.07 0-5.923-1.843-6.372-4.126-.458-2.285 1.665-4.136 4.743-4.136.647 0 1.283.084 1.89.234a7 7 0 0 1 .938.302c.87-.02-.104-2.294-1.835-12.229-2.134-12.303 3.06-1.87 8.768-2.753 5.708-.885.076 4.82-3.65 3.844-3.724-.987-4.65-7.153.263 14.738zm-16.998 5.99C15.63 34.148 13.507 36 10.439 36c-3.068 0-5.92-1.852-6.379-4.136-.448-2.284 1.674-4.135 4.751-4.135 1.002 0 1.974.197 2.854.544.822-.055-.15-2.377-1.862-12.228-2.133-12.303 3.059-1.87 8.764-2.753 5.706-.894.076 4.821-3.648 3.834-3.723-.987-4.648-7.152.263 14.738z\",\n      fill: \"#000\"\n    })]), {\n      id: \"sb3-musicBlock-high-contrast\",\n      fill: \"none\"\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M8.753 34.602l-4.251 1.779 1.784-4.236c1.218-2.892 2.907-5.423 5.03-7.538L31.066 4.93c.846-.842 2.65-.41 4.032.967 1.38 1.375 1.816 3.173.97 4.015L16.318 29.59c-2.123 2.116-4.664 3.799-7.565 5.012\",\n      fill: \"#FFF\"\n    }), SVG.el(\"path\", {\n      d: \"M29.41 6.111s-4.45-2.379-8.202 5.771c-1.734 3.766-4.35 1.546-4.35 1.546\"\n    }), SVG.el(\"path\", {\n      d: \"M36.42 8.825c0 .463-.14.873-.432 1.164l-9.335 9.301c.282-.29.41-.668.41-1.12 0-.874-.507-1.963-1.406-2.868-1.362-1.358-3.147-1.8-4.002-.99L30.99 5.01c.844-.84 2.65-.41 4.035.96.898.904 1.396 1.982 1.396 2.855M10.515 33.774a23.74 23.74 0 0 1-1.764.83L4.5 36.382l1.786-4.235c.258-.604.529-1.186.833-1.757.69.183 1.449.625 2.109 1.282.659.658 1.102 1.412 1.287 2.102\",\n      fill: \"#4C97FF\"\n    }), SVG.el(\"path\", {\n      d: \"M36.498 8.748c0 .464-.141.874-.433 1.165l-19.742 19.68c-2.131 2.111-4.673 3.793-7.572 5.01L4.5 36.381l.974-2.317 1.925-.808c2.899-1.218 5.441-2.899 7.572-5.01l19.742-19.68c.292-.292.432-.702.432-1.165 0-.647-.27-1.4-.779-2.123.249.172.498.377.736.614.898.905 1.396 1.983 1.396 2.856\",\n      fill: \"#0b8e69\",\n      opacity: \".15\"\n    }), SVG.el(\"path\", {\n      d: \"M18.45 12.831a.904.904 0 1 1-1.807 0 .904.904 0 0 1 1.807 0z\",\n      fill: \"#0b8e69\"\n    })]), {\n      id: \"sb3-penBlock-high-contrast\",\n      stroke: \"#0b8e69\",\n      fill: \"none\",\n      \"stroke-linejoin\": \"round\"\n    }), SVG.setProps(SVG.group([SVG.el(\"circle\", {\n      opacity: 0.25,\n      cx: 32,\n      cy: 16,\n      r: 4.5\n    }), SVG.el(\"circle\", {\n      opacity: 0.5,\n      cx: 32,\n      cy: 12,\n      r: 4.5\n    }), SVG.el(\"circle\", {\n      opacity: 0.75,\n      cx: 32,\n      cy: 8,\n      r: 4.5\n    }), SVG.el(\"circle\", {\n      cx: 32,\n      cy: 4,\n      r: 4.5\n    }), SVG.el(\"path\", {\n      d: \"M22.672 4.42l-6.172 4V6.1c0-2.01-1.563-3.6-3.5-3.6H4.1C2.076 2.5.5 4.076.5 6.1V14c0 1.927 1.584 3.512 3.6 3.6H13c1.902 0 3.5-1.653 3.5-3.6v-2.283l6.257 3.754.097.075c.02.02.098.054.146.054.267 0 .5-.217.5-.5V4.8c0 .037-.056-.094-.129-.243-.145-.242-.43-.299-.7-.137z\",\n      fill: \"#000\",\n      \"stroke-linejoin\": \"round\"\n    })]), {\n      id: \"sb3-videoBlock-high-contrast\",\n      stroke: \"#0b8e69\",\n      fill: \"#FFF\",\n      \"stroke-opacity\": 0.15\n    }), SVG.setProps(SVG.group([SVG.el(\"path\", {\n      d: \"M25.644 20.5c-1.667 1.937-4.539 3.429-5.977 3.429a1.25 1.25 0 0 1-.557-.137c-.372-.186-.61-.542-.61-1.03 0-.105.017-.207.05-.308.076-.236.624-.986.727-1.173.27-.484.462-1.075.566-1.865A8.5 8.5 0 0 1 24 3.5h4a8.5 8.5 0 1 1 0 17h-2.356z\",\n      fill: \"#FFF\",\n      stroke: \"#0b8e69\"\n    }), SVG.el(\"path\", {\n      d: \"M15.5 21.67c0-1.016-1.494-1.586-2.387-.782l-2.7 2.163A5.958 5.958 0 0 1 6.7 24.33h-.4c-1.035 0-1.8.69-1.8 1.573v4.235c0 .883.765 1.572 1.8 1.572h.4c1.458 0 2.754.423 3.82 1.287l2.598 2.161c.908.75 2.382.188 2.382-.876V21.67z\",\n      fill: \"#000\"\n    })]), {\n      id: \"sb3-ttsBlock-high-contrast\",\n      \"stroke-opacity\": 0.15\n    }),\n    // The original icon is in PNG, but the high contrast version uses SVG.\n    // For consistency we use PNG in both places.\n    // https://github.com/scratchfoundation/scratch-gui/blob/beta/src/lib/themes/high-contrast/extensions/translateIcon.svg\n    // Exported via Inkscape and compressed\n    SVG.el(\"image\", {\n      id: \"sb3-translateBlock-high-contrast\",\n      width: \"40px\",\n      height: \"40px\",\n      href: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAxoAAARjCAMAAADfFKLnAAABhlBMVEUAAAALjWkOj2oLjmkAAAAQj2wkmnkYlHILj2kLjmkAAAAAAABsu6VouaIJjmgimncAAAAAAAALjml0v6kAAAAAAAAAAAAATzhjt6A9pogVk28XlHAVk28ZlHEAAAAAAAAAAAANj2oAAAAJj2oAAAAAAAByvahsu6VVsZcqnXwAAAAAAAAAAAAMj2oQkWsAAAAPkGwAAABHqo4AAAAclnMcl3MKj2kXlHIXk3EAAAALj2gAAAD///8AAAB9w6+ExrONyrmHyLWrzv/3+/r8/v6Fx7VpqP/0+fh7s/9Ml//4/PvK59/4+//u9f/l8P/V5v9vrP9an/9Smv/o6OjMzMwrKysDAwPp8//e7P+w0f+axf9xrf9kpf9jpP9ho/9Nl//e3t7E5Nu+4dfT09OUzb2QzLuZmZlMrJKGhoYpnHxlZWVgYGBCQkINDQ30+P/J4P/D3P+11P+Nvf90rv9Jlvby8vLc3Nyl1cik1ce+vr6DxrKlpaWfn58xnJZBpJWJiYl+fn4fHx9PedmHAAAAPHRSTlMAd4OAxg/0wohyDv78+Tj16Ik6+ux+WAb79e7mvbCemW1rZDYXC/n39PTw39u8t7RVNvX11NLDm5qOWx0x5AFdAAAGd0lEQVR42uzbV3faQBCG4XGChMEU4wLujntv6WXXIUAwxd3Gvfea3nv+eQaBcgS5ztV8zwWMfsB7js7uiAAAAAAAAP6fgKfCwRMg1l49OBzqJgC5DLfZO+nQa7oNovq2Ia2rJwhArFZ/QpVI+Fspr57b8BKAUAEzrgpmXhSHjBmgvDGtQwQglKdWFaU27KnWQ0TekEvruvYwAYh08ym3ML0ei8V2NvlnfZofn98gorC2DBKASFYaq8md9MLW1kJ6O7lqp9Hj0qzqFgGIxGlYtjeUepPkwU6D20AZIJidRmxhZnbxtTMN8rpQBshlpzGdTL2dTzjSYJEnBCCVnYaaS++uqb9pAEhnpzGXXFycn1PZo2g0ejpiL410EYBQhTRepnZTs2vz776f+yYd/EG3QQAiWVd+s+nNV/yX+NEQVyXiDS0EIFKNmeAEZlRe9jyuysSDNQQgkrsvo4qOfOofvgoCEMloNWs/cgNTx9FT+7RqaUV/KI7PcFoFYgVG+7iMxpbK+19UwU+tfyENEC/SvK+yAw8cdxy5XO53AmmAdI8bD/qbxh13HMv67Ex/RhogXVfzvQ6DHGlc6L09fYk0AJgjjalrza7fIw2QrjtSksZXfXFycqm/IQ0QrrPK5XWmcbWylD+/vUIaIFtnldaFNjx+lbd8qNjhMq78QDQug7l6eAwE46pMxsSiCAhVpy1hYu7y9cKM300AMoXbOQ5XyEvMaAn6opbjKQ7jkw9L6SBZSOsxe66pqLSMNnIb/hG8TYFk3mqt66nMw4Gs2m+OEIBgE9zGcFtZHeNN/Qe3OwhAsu5HQ3fq2qiU0XG3Cd+GAwAAAAD8YQ8OBAAAAACA/F8bQVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVYQ8OBAAAAACA/F8bQVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV2IMDAQAAAAAg/9dGUFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUV9uBAAAAAAADI/7URVFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWFPTgQAAAAAADyf20EVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVhDw4EAAAAAID8XxtBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVXYgwMBAAAAACD/10ZQVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVRX24EAAAAAAAMj/tRFUVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVYU9OBAAAAAAAPJ/bQRVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWEPDgQAAAAAgPxfG0FVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVdiDAwEAAAAAIP/XRlBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVFfbgQAAAAAAAyP+1EVRVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVhT04EAAAAAAA8n9tBFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVYQ8OBAAAAACA/F8bQVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV2oNDAgAAAABB/1/7wgQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMArKwCvdMdAc1YAAAAASUVORK5CYII=\"\n    })];\n  }\n\n  /**\n   * @return the icon name with suffix, if a high contrast icon is defined\n   */\n  static iconName(name, iconStyle) {\n    if (iconStyle === \"high-contrast\" && highContrastIcons.has(name)) {\n      return `${name}-high-contrast`;\n    }\n    return name;\n  }\n  static makeStyle() {\n    const style = SVG.el(\"style\");\n    style.appendChild(SVG.cdata(Style.cssContent));\n    return style;\n  }\n  static get defaultFont() {\n    return \"500 12pt Helvetica Neue, Helvetica, sans-serif\";\n  }\n  static get commentFont() {\n    return \"400 12pt Helvetica Neue, Helvetica, sans-serif\";\n  }\n}\nconst {\n  defaultFont,\n  commentFont,\n  makeStyle: makeStyle$1,\n  makeOriginalIcons,\n  makeHighContrastIcons,\n  iconName\n} = Style;\nclass LabelView {\n  constructor(label) {\n    Object.assign(this, label);\n    this.el = null;\n    this.height = 12;\n    this.metrics = null;\n    this.x = 0;\n  }\n  get isLabel() {\n    return true;\n  }\n  draw(_iconStyle) {\n    return this.el;\n  }\n  get width() {\n    return this.metrics.width;\n  }\n  measure() {\n    const value = this.value;\n    const cls = `sb3-${this.cls}`;\n    this.el = SVG.text(0, 13, value, {\n      class: `sb3-label ${cls}`\n    });\n    let cache = LabelView.metricsCache[cls];\n    if (!cache) {\n      cache = LabelView.metricsCache[cls] = Object.create(null);\n    }\n    if (Object.hasOwnProperty.call(cache, value)) {\n      this.metrics = cache[value];\n    } else {\n      const font = /comment-label/.test(this.cls) ? commentFont : defaultFont;\n      this.metrics = cache[value] = LabelView.measure(value, font);\n      // TODO: word-spacing? (fortunately it seems to have no effect!)\n    }\n  }\n  static measure(value, font) {\n    const context = LabelView.measuring;\n    context.font = font;\n    const textMetrics = context.measureText(value);\n    const width = textMetrics.width + 0.5 | 0;\n    return {\n      width: width\n    };\n  }\n}\nLabelView.metricsCache = {};\nLabelView.toMeasure = [];\nclass IconView {\n  constructor(icon) {\n    Object.assign(this, icon);\n    const info = IconView.icons[this.name];\n    if (!info) {\n      throw new Error(`no info for icon: ${this.name}`);\n    }\n    Object.assign(this, info);\n  }\n  get isIcon() {\n    return true;\n  }\n  draw(iconStyle) {\n    return SVG.symbol(`#sb3-${iconName(this.name, iconStyle)}`, {\n      width: this.width,\n      height: this.height\n    });\n  }\n  static get icons() {\n    return {\n      greenFlag: {\n        width: 20,\n        height: 21,\n        dy: -2\n      },\n      stopSign: {\n        width: 20,\n        height: 20\n      },\n      turnLeft: {\n        width: 24,\n        height: 24\n      },\n      turnRight: {\n        width: 24,\n        height: 24\n      },\n      loopArrow: {\n        width: 24,\n        height: 24\n      },\n      addInput: {\n        width: 4,\n        height: 8\n      },\n      delInput: {\n        width: 4,\n        height: 8\n      },\n      list: {\n        width: 15,\n        height: 18\n      },\n      musicBlock: {\n        width: 40,\n        height: 40\n      },\n      penBlock: {\n        width: 40,\n        height: 40\n      },\n      videoBlock: {\n        width: 40,\n        height: 40,\n        dy: 10\n      },\n      ttsBlock: {\n        width: 40,\n        height: 40\n      },\n      translateBlock: {\n        width: 40,\n        height: 40\n      },\n      wedoBlock: {\n        width: 40,\n        height: 40\n      },\n      ev3Block: {\n        width: 40,\n        height: 40\n      },\n      microbitBlock: {\n        width: 40,\n        height: 40\n      },\n      makeymakeyBlock: {\n        width: 40,\n        height: 40\n      },\n      gdxforBlock: {\n        width: 40,\n        height: 40\n      },\n      boostBlock: {\n        width: 40,\n        height: 40\n      }\n    };\n  }\n}\nclass LineView {\n  constructor() {\n    this.width = 1;\n    this.height = 40;\n    this.x = 0;\n  }\n  get isLine() {\n    return true;\n  }\n  measure() {}\n  draw(_iconStyle, parent) {\n    const category = parent.info.category;\n    return SVG.el(\"line\", {\n      class: `sb3-${category}-line`,\n      \"stroke-linecap\": \"round\",\n      x1: 0,\n      y1: 0,\n      x2: 0,\n      y2: 40\n    });\n  }\n}\nclass InputView {\n  constructor(input) {\n    Object.assign(this, input);\n    if (input.label) {\n      this.label = newView(input.label);\n    }\n    this.isBoolean = this.shape === \"boolean\";\n    this.isDropdown = this.shape === \"dropdown\";\n    this.isRound = !(this.isBoolean || this.isDropdown);\n    this.x = 0;\n  }\n  get isInput() {\n    return true;\n  }\n  measure() {\n    if (this.hasLabel) {\n      this.label.measure();\n    }\n  }\n  static get shapes() {\n    return {\n      string: SVG.pillRect,\n      number: SVG.pillRect,\n      \"number-dropdown\": SVG.pillRect,\n      color: SVG.pillRect,\n      dropdown: SVG.roundRect,\n      boolean: SVG.pointedRect,\n      stack: SVG.stackRect,\n      reporter: SVG.pillRect\n    };\n  }\n  draw(iconStyle, parent) {\n    let w;\n    let label;\n    if (this.isBoolean) {\n      w = 48;\n    } else if (this.isColor) {\n      w = 40;\n    } else if (this.hasLabel) {\n      label = this.label.draw(iconStyle);\n      // Minimum padding of 11\n      // Minimum width of 40, at which point we center the label\n      const px = this.label.width >= 18 ? 11 : (40 - this.label.width) / 2;\n      w = this.label.width + 2 * px;\n      label = SVG.move(px, 9, label);\n    } else {\n      w = this.isInset ? 30 : null;\n    }\n    if (this.hasArrow) {\n      w += 20;\n    }\n    this.width = w;\n    const h = this.height = 32;\n    const el = InputView.shapes[this.shape](w, h);\n    SVG.setProps(el, {\n      class: `${this.isColor ? \"\" : `sb3-${parent.info.category}`} sb3-input sb3-input-${this.shape}`\n    });\n    if (this.isColor) {\n      SVG.setProps(el, {\n        fill: this.value\n      });\n    } else if (this.shape === \"dropdown\") {\n      // custom colors\n      if (parent.info.color) {\n        SVG.setProps(el, {\n          fill: parent.info.color,\n          stroke: \"rgba(0, 0, 0, 0.2)\"\n        });\n      }\n    } else if (this.shape === \"number-dropdown\") {\n      el.classList.add(`sb3-${parent.info.category}-alt`);\n\n      // custom colors\n      if (parent.info.color) {\n        SVG.setProps(el, {\n          fill: \"rgba(0, 0, 0, 0.1)\",\n          stroke: \"rgba(0, 0, 0, 0.15)\" // combines with fill...\n        });\n      }\n    } else if (this.shape === \"boolean\") {\n      el.classList.remove(`sb3-${parent.info.category}`);\n      el.classList.add(`sb3-${parent.info.category}-dark`);\n\n      // custom colors\n      if (parent.info.color) {\n        SVG.setProps(el, {\n          fill: \"rgba(0, 0, 0, 0.15)\"\n        });\n      }\n    }\n    const result = SVG.group([el]);\n    if (this.hasLabel) {\n      result.appendChild(label);\n    }\n    if (this.hasArrow) {\n      result.appendChild(SVG.move(w - 24, 13, SVG.symbol(iconStyle === \"high-contrast\" ? \"#sb3-dropdownArrow-high-contrast\" : \"#sb3-dropdownArrow\", {})));\n    }\n    return result;\n  }\n}\nclass BlockView {\n  constructor(block) {\n    Object.assign(this, block);\n    this.children = block.children.map(newView);\n    this.comment = this.comment ? newView(this.comment) : null;\n    this.isRound = this.isReporter;\n\n    // Avoid accidental mutation\n    this.info = {\n      ...block.info\n    };\n    if (Object.prototype.hasOwnProperty.call(aliasExtensions, this.info.category)) {\n      this.info.category = aliasExtensions[this.info.category];\n    }\n    if (Object.prototype.hasOwnProperty.call(extensions, this.info.category)) {\n      this.children.unshift(new LineView());\n      this.children.unshift(new IconView({\n        name: this.info.category + \"Block\"\n      }));\n      this.info.category = \"extension\";\n    }\n    this.x = 0;\n    this.width = null;\n    this.height = null;\n    this.firstLine = null;\n    this.innerWidth = null;\n  }\n  get isBlock() {\n    return true;\n  }\n  measure() {\n    for (const child of this.children) {\n      if (child.measure) {\n        child.measure();\n      }\n    }\n    if (this.comment) {\n      this.comment.measure();\n    }\n  }\n  static get shapes() {\n    return {\n      stack: SVG.stackRect,\n      \"c-block\": SVG.stackRect,\n      \"if-block\": SVG.stackRect,\n      celse: SVG.stackRect,\n      cend: SVG.stackRect,\n      cap: SVG.capRect,\n      reporter: SVG.pillRect,\n      boolean: SVG.pointedRect,\n      hat: SVG.hatRect,\n      cat: SVG.catHat,\n      \"define-hat\": SVG.procHatRect,\n      ring: SVG.pillRect\n    };\n  }\n  drawSelf(iconStyle, w, h, lines) {\n    // mouths\n    if (lines.length > 1) {\n      return SVG.mouthRect(w, h, this.isFinal, lines, {\n        class: `sb3-${this.info.category}`\n      });\n    }\n\n    // outlines\n    if (this.info.shape === \"outline\") {\n      return SVG.setProps(SVG.stackRect(w, h), {\n        class: `sb3-${this.info.category} sb3-${this.info.category}-alt`\n      });\n    }\n\n    // rings\n    if (this.isRing) {\n      const child = this.children[0];\n      if (child && (child.isInput || child.isBlock || child.isScript)) {\n        return SVG.roundRect(w, h, {\n          class: `sb3-${this.info.category}`\n        });\n      }\n    }\n    const func = BlockView.shapes[this.info.shape];\n    if (!func) {\n      throw new Error(`no shape func: ${this.info.shape}`);\n    }\n    return func(w, h, {\n      class: `sb3-${this.info.category}`\n    });\n  }\n  static get padding() {\n    return {\n      hat: [24, 8],\n      cat: [24, 8],\n      \"define-hat\": [20, 16],\n      null: [4, 4]\n    };\n  }\n  horizontalPadding(child) {\n    if (this.isRound) {\n      if (child.isIcon) {\n        return 16;\n      } else if (child.isLabel) {\n        return 12; // text in circle: 3 units\n      } else if (child.isDropdown) {\n        return 12; // square in circle: 3 units\n      } else if (child.isBoolean) {\n        return 12; // hexagon in circle: 3 units\n      } else if (child.isRound) {\n        return 4; // circle in circle: 1 unit\n      }\n    } else if (this.isBoolean) {\n      if (child.isIcon) {\n        return 24; // icon in hexagon: ???\n      } else if (child.isLabel) {\n        return 20; // text in hexagon: 5 units\n      } else if (child.isDropdown) {\n        return 20; // square in hexagon: 5 units\n      } else if (child.isRound && child.isBlock) {\n        return 24; // circle in hexagon: 5 + 1 units\n      } else if (child.isRound) {\n        return 20; // circle in hexagon: 5 units\n      } else if (child.isBoolean) {\n        return 8; // hexagon in hexagon: 2 units\n      }\n    }\n    return 8; // default: 2 units\n  }\n  marginBetween(a, b) {\n    // Consecutive labels should be rendered as a single text element.\n    // For now, approximate the size of one space\n    if (a.isLabel && b.isLabel) {\n      return 5;\n    }\n    return 8; // default: 2 units\n  }\n  draw(iconStyle) {\n    const isDefine = this.info.shape === \"define-hat\";\n    let children = this.children;\n    const isCommand = this.isCommand;\n    const padding = BlockView.padding[this.info.shape] || BlockView.padding.null;\n    const pt = padding[0],\n      pb = padding[1];\n    let y = this.info.shape === \"cat\" ? 16 : 0;\n    const Line = function (y) {\n      this.y = y;\n      this.width = 0;\n      this.height = isCommand ? 40 : 32;\n      this.children = [];\n    };\n    let innerWidth = 0;\n    let scriptWidth = 0;\n    let line = new Line(y);\n    const pushLine = () => {\n      if (lines.length === 0) {\n        line.height += pt + pb;\n      } else {\n        line.height -= 11;\n        line.y -= 2;\n      }\n      y += line.height;\n      lines.push(line);\n    };\n    if (this.info.isRTL) {\n      let start = 0;\n      const flip = () => {\n        children = children.slice(0, start).concat(children.slice(start, i).reverse()).concat(children.slice(i));\n      };\n      let i;\n      for (i = 0; i < children.length; i++) {\n        if (children[i].isScript) {\n          flip();\n          start = i + 1;\n        }\n      }\n      if (start < i) {\n        flip();\n      }\n    }\n    const lines = [];\n    let previousChild;\n    let lastChild;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      child.el = child.draw(iconStyle, this);\n      if (child.isScript && this.isCommand) {\n        this.hasScript = true;\n        pushLine();\n        child.y = y - 1;\n        lines.push(child);\n        scriptWidth = Math.max(scriptWidth, Math.max(1, child.width));\n        child.height = Math.max(29, child.height + 3) - 2;\n        y += child.height;\n        line = new Line(y);\n        previousChild = null;\n      } else if (child.isArrow) {\n        line.children.push(child);\n        previousChild = child;\n      } else {\n        // Remember the last child on the first line\n        if (!lines.length) {\n          lastChild = child;\n        }\n\n        // Leave space between inputs\n        if (previousChild) {\n          line.width += this.marginBetween(previousChild, child);\n        }\n\n        // Align first input with right of notch\n        if (children[0] != null) {\n          const cmw = 48 - this.horizontalPadding(children[0]);\n          if ((this.isCommand || this.isOutline) && !child.isLabel && !child.isIcon && line.width < cmw) {\n            line.width = cmw;\n          }\n        }\n\n        // Align extension category icons below notch\n        if (child.isIcon && i === 0 && this.isCommand) {\n          line.height = Math.max(line.height, child.height + 8);\n        }\n        child.x = line.width;\n        line.width += child.width;\n        innerWidth = Math.max(innerWidth, line.width);\n        if (!child.isLabel) {\n          line.height = Math.max(line.height, child.height);\n        }\n        line.children.push(child);\n        previousChild = child;\n      }\n    }\n    pushLine();\n    let padLeft = children.length ? this.horizontalPadding(children[0]) : 0;\n    const padRight = children.length ? this.horizontalPadding(lastChild) : 0;\n    innerWidth += padLeft + padRight;\n\n    // Commands have a minimum width\n    // The hat min-width is arbitrary (not sure of Scratch 3 value)\n    // Outline min-width is deliberately higher (because Scratch 3 looks silly)\n    const originalInnerWidth = innerWidth;\n    innerWidth = Math.max(this.hasScript ? 160 : this.isHat ? 108 : this.isCommand || this.isOutline ? 64 : this.isReporter ? 48 : 0, innerWidth);\n\n    // Center the label text inside small reporters.\n    if (this.isReporter) {\n      padLeft += (innerWidth - originalInnerWidth) / 2;\n    }\n    this.height = y;\n    this.width = scriptWidth ? Math.max(innerWidth, 15 + scriptWidth) : innerWidth;\n    this.firstLine = lines[0];\n    this.innerWidth = innerWidth;\n    const objects = [];\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      if (line.isScript) {\n        objects.push(SVG.move(16, line.y, line.el));\n        continue;\n      }\n      const h = line.height;\n      for (let j = 0; j < line.children.length; j++) {\n        const child = line.children[j];\n        if (child.isArrow) {\n          objects.push(SVG.move(innerWidth - 32, this.height - 28, child.el));\n          continue;\n        }\n        let y = pt + (h - child.height - pt - pb) / 2;\n        if (child.isLabel && i === 0) {\n          // We only do this for the first line so that the `else` label is\n          // correctly aligned\n          y -= 1;\n        } else if (isDefine && child.isLabel) {\n          y += 3;\n        } else if (child.isIcon) {\n          y += child.dy | 0;\n          if (this.isCommand && i === 0 && j === 0) {\n            y += 4;\n          }\n        }\n        let x = padLeft + child.x;\n        if (child.dx) {\n          x += child.dx;\n        }\n        objects.push(SVG.move(x, line.y + y | 0, child.el));\n      }\n    }\n    const el = this.drawSelf(iconStyle, innerWidth, this.height, lines);\n    objects.splice(0, 0, el);\n    if (this.info.color) {\n      SVG.setProps(el, {\n        fill: this.info.color,\n        stroke: \"rgba(0, 0, 0, 0.2)\"\n      });\n    }\n    return SVG.group(objects);\n  }\n}\nclass CommentView {\n  constructor(comment) {\n    Object.assign(this, comment);\n    this.label = newView(comment.label);\n    this.width = null;\n  }\n  get isComment() {\n    return true;\n  }\n  static get lineLength() {\n    return 12;\n  }\n  get height() {\n    return 20;\n  }\n  measure() {\n    this.label.measure();\n  }\n  draw(iconStyle) {\n    const labelEl = this.label.draw(iconStyle);\n    this.width = this.label.width + 16;\n    return SVG.group([SVG.commentLine(this.hasBlock ? CommentView.lineLength : 0, 6), SVG.commentRect(this.width, this.height, {\n      class: \"sb3-comment\"\n    }), SVG.move(8, 4, labelEl)]);\n  }\n}\nclass GlowView {\n  constructor(glow) {\n    Object.assign(this, glow);\n    this.child = newView(glow.child);\n    this.width = null;\n    this.height = null;\n    this.y = 0;\n  }\n  get isGlow() {\n    return true;\n  }\n  measure() {\n    this.child.measure();\n  }\n  drawSelf() {\n    const c = this.child;\n    let el;\n    const w = this.width;\n    const h = this.height - 1;\n    if (c.isScript) {\n      if (!c.isEmpty && c.blocks[0].isHat) {\n        el = SVG.hatRect(w, h);\n      } else if (c.isFinal) {\n        el = SVG.capRect(w, h);\n      } else {\n        el = SVG.stackRect(w, h);\n      }\n    } else {\n      el = c.drawSelf(w, h, []);\n    }\n    return SVG.setProps(el, {\n      class: \"sb3-diff sb3-diff-ins\"\n    });\n  }\n  // TODO how can we always raise Glows above their parents?\n\n  draw(iconStyle) {\n    const c = this.child;\n    const el = c.isScript ? c.draw(iconStyle, true) : c.draw(iconStyle);\n    this.width = c.width;\n    this.height = c.isBlock && c.firstLine.height || c.height;\n\n    // encircle\n    return SVG.group([el, this.drawSelf()]);\n  }\n}\nclass ScriptView {\n  constructor(script) {\n    Object.assign(this, script);\n    this.blocks = script.blocks.map(newView);\n    this.y = 0;\n  }\n  get isScript() {\n    return true;\n  }\n  measure() {\n    for (const block of this.blocks) {\n      block.measure();\n    }\n  }\n  draw(iconStyle, inside) {\n    const children = [];\n    let y = 1;\n    this.width = 0;\n    for (const block of this.blocks) {\n      const x = inside ? 0 : 2;\n      const child = block.draw(iconStyle);\n      children.push(SVG.move(x, y, child));\n      this.width = Math.max(this.width, block.width);\n      const diff = block.diff;\n      if (diff === \"-\") {\n        const dw = block.width;\n        const dh = block.firstLine.height || block.height;\n        children.push(SVG.move(x, y + dh / 2 + 1, SVG.strikethroughLine(dw)));\n        this.width = Math.max(this.width, block.width);\n      }\n      y += block.height;\n      const comment = block.comment;\n      if (comment) {\n        const line = block.firstLine;\n        const cx = block.innerWidth + 2 + CommentView.lineLength;\n        const cy = y - block.height + line.height / 2;\n        const el = comment.draw(iconStyle);\n        children.push(SVG.move(cx, cy - comment.height / 2, el));\n        this.width = Math.max(this.width, cx + comment.width);\n      }\n    }\n    const lastBlock = this.blocks[this.blocks.length - 1];\n    this.height = y + 1;\n    if (!inside && !this.isFinal) {\n      this.height += lastBlock.hasPuzzle ? 8 : 0;\n    }\n    if (!inside && lastBlock.isGlow) {\n      this.height += 7; // TODO unbreak this\n    }\n    return SVG.group(children);\n  }\n}\nclass DocumentView {\n  constructor(doc, options) {\n    Object.assign(this, doc);\n    this.scripts = doc.scripts.map(newView);\n    this.width = null;\n    this.height = null;\n    this.el = null;\n    this.defs = null;\n    this.scale = options.scale;\n    this.iconStyle = options.style.replace(\"scratch3-\", \"\");\n  }\n  measure() {\n    this.scripts.forEach(script => {\n      script.measure();\n    });\n  }\n  render(cb) {\n    if (typeof cb === \"function\") {\n      throw new Error(\"render() no longer takes a callback\");\n    }\n\n    // measure strings\n    this.measure();\n\n    // TODO: separate layout + render steps.\n    // render each script\n    let width = 0;\n    let height = 0;\n    const elements = [];\n    for (let i = 0; i < this.scripts.length; i++) {\n      const script = this.scripts[i];\n      if (height) {\n        height += 10;\n      }\n      script.y = height;\n      elements.push(SVG.move(0, height, script.draw(this.iconStyle)));\n      height += script.height;\n      if (i !== this.scripts.length - 1) {\n        height += 36;\n      }\n      width = Math.max(width, script.width + 4);\n    }\n    this.width = width;\n    this.height = height;\n\n    // return SVG\n    const svg = SVG.newSVG(width, height, this.scale);\n    const icons = this.iconStyle === \"high-contrast\" ? makeHighContrastIcons() : makeOriginalIcons();\n    svg.appendChild(this.defs = SVG.withChildren(SVG.el(\"defs\"), icons));\n    svg.appendChild(SVG.setProps(SVG.group(elements), {\n      style: `transform: scale(${this.scale})`\n    }));\n    this.el = svg;\n    return svg;\n  }\n\n  /* Export SVG image as XML string */\n  exportSVGString() {\n    if (this.el == null) {\n      throw new Error(\"call draw() first\");\n    }\n    const style = makeStyle$1();\n    this.defs.appendChild(style);\n    const xml = new SVG.XMLSerializer().serializeToString(this.el);\n    this.defs.removeChild(style);\n    return xml;\n  }\n\n  /* Export SVG image as data URI */\n  exportSVG() {\n    const xml = this.exportSVGString();\n    return `data:image/svg+xml;utf8,${xml.replace(/[#]/g, encodeURIComponent)}`;\n  }\n  toCanvas(cb, exportScale) {\n    exportScale = exportScale || 1.0;\n    const canvas = SVG.makeCanvas();\n    canvas.width = Math.max(1, this.width * exportScale * this.scale);\n    canvas.height = Math.max(1, this.height * exportScale * this.scale);\n    const context = canvas.getContext(\"2d\");\n    const image = new Image();\n    image.src = this.exportSVG();\n    image.onload = () => {\n      context.save();\n      context.scale(exportScale, exportScale);\n      context.drawImage(image, 0, 0);\n      context.restore();\n      cb(canvas);\n    };\n  }\n  exportPNG(cb, scale) {\n    this.toCanvas(canvas => {\n      if (URL && URL.createObjectURL && Blob && canvas.toBlob) {\n        canvas.toBlob(blob => {\n          cb(URL.createObjectURL(blob));\n        }, \"image/png\");\n      } else {\n        cb(canvas.toDataURL(\"image/png\"));\n      }\n    }, scale);\n  }\n}\nconst viewFor = node => {\n  switch (node.constructor) {\n    case Label:\n      return LabelView;\n    case Icon:\n      return IconView;\n    case Input:\n      return InputView;\n    case Block:\n      return BlockView;\n    case Comment:\n      return CommentView;\n    case Glow:\n      return GlowView;\n    case Script:\n      return ScriptView;\n    case Document:\n      return DocumentView;\n    default:\n      throw new Error(`no view for ${node.constructor.name}`);\n  }\n};\nconst newView = (node, options) => new (viewFor(node))(node, options);\nfunction init$1(window) {\n  SVG.init(window);\n  LabelView.measuring = SVG.makeCanvas().getContext(\"2d\");\n}\nconst makeStyle = Style.makeStyle;\n\n/*\n * scratchblocks\n * http://scratchblocks.github.io/\n *\n * Copyright 2013-2016, Tim Radvan\n * @license MIT\n * http://opensource.org/licenses/MIT\n */\n\nfunction init(window) {\n  const document = window.document;\n  init$2(window);\n  init$1(window);\n  function appendStyles() {\n    document.head.appendChild(makeStyle$2());\n    document.head.appendChild(makeStyle());\n  }\n  function newView$2(doc, options) {\n    options = {\n      style: \"scratch2\",\n      ...options\n    };\n    options.scale = options.scale || 1;\n    if (options.style === \"scratch2\") {\n      return newView$1(doc, options);\n    } else if (/^scratch3($|-)/.test(options.style)) {\n      return newView(doc, options);\n    }\n    throw new Error(`Unknown style: ${options.style}`);\n  }\n  function render(doc, options) {\n    if (typeof options === \"function\") {\n      throw new Error(\"render() no longer takes a callback\");\n    }\n    const view = newView$2(doc, options);\n    const svg = view.render();\n    // Used in high contrast theme\n    svg.classList.add(`scratchblocks-style-${options.style}`);\n    return svg;\n  }\n\n  /*****************************************************************************/\n\n  /*** Render ***/\n\n  // read code from a DOM element\n  function readCode(el, options) {\n    options = {\n      inline: false,\n      ...options\n    };\n    const html = el.innerHTML.replace(/<br>\\s?|\\n|\\r\\n|\\r/gi, \"\\n\");\n    const pre = document.createElement(\"pre\");\n    pre.innerHTML = html;\n    let code = pre.textContent;\n    if (options.inline) {\n      code = code.replace(\"\\n\", \"\");\n    }\n    return code;\n  }\n\n  // insert 'svg' into 'el', with appropriate wrapper elements\n  function replace(el, svg, doc, options) {\n    let container;\n    if (options.inline) {\n      container = document.createElement(\"span\");\n      let cls = \"scratchblocks scratchblocks-inline\";\n      if (doc.scripts[0] && !doc.scripts[0].isEmpty) {\n        cls += ` scratchblocks-inline-${doc.scripts[0].blocks[0].shape}`;\n      }\n      container.className = cls;\n      container.style.display = \"inline-block\";\n      container.style.verticalAlign = \"middle\";\n    } else {\n      container = document.createElement(\"div\");\n      container.className = \"scratchblocks\";\n    }\n    container.appendChild(svg);\n    el.innerHTML = \"\";\n    el.appendChild(container);\n  }\n\n  /* Render all matching elements in page to shiny scratch blocks.\n   * Accepts a CSS selector as an argument.\n   *\n   *  scratchblocks.renderMatching(\"pre.blocks\");\n   *\n   * Like the old 'scratchblocks2.parse().\n   */\n  const renderMatching = function (selector, options) {\n    selector = selector || \"pre.blocks\";\n    options = {\n      // Default values for the options\n      style: \"scratch2\",\n      inline: false,\n      languages: [\"en\"],\n      scale: 1,\n      read: readCode,\n      // function(el, options) => code\n      parse: parse,\n      // function(code, options) => doc\n      render: render,\n      // function(doc) => svg\n      replace: replace,\n      // function(el, svg, doc, options)\n\n      ...options\n    };\n\n    // find elements\n    const results = [].slice.apply(document.querySelectorAll(selector));\n    results.forEach(el => {\n      const code = options.read(el, options);\n      const doc = options.parse(code, options);\n      const svg = options.render(doc, options);\n      options.replace(el, svg, doc, options);\n    });\n  };\n  return {\n    allLanguages: allLanguages,\n    // read-only\n    loadLanguages: loadLanguages,\n    stringify: function (doc) {\n      return doc.stringify();\n    },\n    Label,\n    Icon,\n    Input,\n    Block,\n    Comment,\n    Script,\n    Document,\n    newView: newView$2,\n    read: readCode,\n    parse: parse,\n    replace: replace,\n    render: render,\n    renderMatching: renderMatching,\n    appendStyles: appendStyles\n  };\n}\nconst scratchblocks = init(window);\n\n// add our CSS to the page\nscratchblocks.appendStyles();\nexport { scratchblocks as default };"],"names":["movedExtensions","pen","video","music","extensions","tts","translate","microbit","wedo","makeymakey","ev3","boost","gdxfor","aliasExtensions","wedo2","text2speech","overrideCategories","Object","keys","overrideShapes","rtlLanguages","inputNumberPat","inputPat","inputPatGlobal","RegExp","source","iconPat","splitPat","hexColorPat","parseInputNumber","part","m","exec","parseSpec","spec","parts","split","filter","x","inputs","p","test","hash","hashSpec","minifyHash","replace","trim","toLowerCase","blocksById","allBlocks","id","selector","shape","category","hasLoopArrow","map","def","Error","info","unicodeIcons","allLanguages","loadLanguages","languages","forEach","code","language","blocksByHash","commands","blockId","nativeSpec","block","nativeHash","push","image","nativeAliases","aliases","alias","undefined","aliasHash","renamedBlocks","alt","english","nativeDropdowns","dropdowns","name","nativeName","loadLanguage","clear","definePrefix","defineSuffix","ignorelt","math","soundEffects","microbitWhen","osis","registerCheck","func","accepts","disambig","id1","id2","_","children","lang","blockName","words","child","isLabel","value","join","assert$2","bool","message","en","first","isInput","includes","effect","_lang","last","length","isColor","isBlock","specialCase","CONTROL_STOP","Label","constructor","cls","this","el","height","metrics","stringify","Icon","isArrow","icons","isIcon","greenFlag","stopSign","turnLeft","turnRight","loopArrow","addInput","delInput","list","Input","menu","isRound","isBoolean","isStack","isInset","hasArrow","isDarker","isSquare","hasLabel","label","text","String","Block","comment","diff","isHat","hasPuzzle","isFinal","isCommand","isOutline","isReporter","isRing","hasScript","isElse","isEnd","extras","firstInput","checkAlias","isScript","line","indent","overrides","categoryIsDefault","isShallow","outline","find","word","oldSpec","nativeInfo","rawArgs","oldInputOrder","highestNumber","args","number","Math","max","remainingArgs","slice","arg","index","CONTROL_ELSE","isRTL","Comment","hasBlock","width","isComment","Glow","isGlow","Script","blocks","isEmpty","Document","scripts","script","paintBlock","Array","isArray","pop","string","o","prototype","hasOwnProperty","call","collisions","type","lookupHash","isDefineBlock","outlineChildren","splice","argument","labels","color","applyOverrides","i","defineWord","parseLines","sawNL","tok","next","peek","peekNonWs","define","makeBlock","hasInputs","makeMenu","lookupDropdown","pParts","end","c","pString","pReporter","pPredicate","pEmbedded","pIcon","pOverrides","s","escapeV","pBlock","every","l","parseScripts","concat","assert$1","override","pLine","pComment","getLine","b","pMouth","pFile","eachBlock","cb","listBlocks","parse","options","inline","dialect","customBlocksByHash","create","listNames","Set","customArgs","names","boolean","add","has","argIndex","input","recogniseStuff","assert","document$1","xml$1","directProps$1","textContent","SVG$1","SVG","init","window","document","DOMParser","parseFromString","XMLSerializer","makeCanvas","createElement","cdata","content","createCDATASection","props","createElementNS","setProps","key","setAttributeNS","withChildren","appendChild","group","newSVG","scale","version","viewBox","polygon","points","path","d","y","symbol","href","move","dx","dy","transform","translatePath","isX","out","j","rect","w","h","ellipse","cx","cy","rx","ry","arc","p1x","p1y","p2x","p2y","arcw","roundedPath","r","roundedRect","pointedPath","pointedRect","getTop","getRingTop","getRightAndBottom","hasNotch","inset","arr","getArm","armTop","stackRect","capPath","capRect","hatRect","curve","roundness","midX","midY","round","procHatBase","archRoundness","min","procHatCap","class","procHatRect","mouthRect","lines","isLast","ringRect","cw","ch","commentRect","commentLine","strikethroughLine","Filter","x0","y0","highestId","fe","result","comp","op","in1","in2","operator","in","subtract","k2","k3","offset","flood","opacity","blur","dev","stdDeviation","colorMatrix","values","merge","Style$1","Style","cssContent","makeIcons","fill","makeStyle","style","bevelFilter","f","alpha","darkFilter","darkRect","defaultFontFamily","makeStyle$3","LabelView$1","LabelView","assign","draw","measure","cache","metricsCache","font","context","measuring","measureText","toMeasure","IconView$1","IconView","icon","InputView$1","InputView","newView$1","shapes","dropdown","stack","reporter","parent","BlockView$1","BlockView","firstLine","innerWidth","celse","cend","cap","hat","cat","ring","drawSelf","minDistance","padding","null","isDefine","pt","px","pb","Line","scriptWidth","pushLine","start","flip","reverse","cmw","md","mw","objects","insEllipse","CommentView$1","CommentView","lineLength","labelEl","GlowView$1","glow","ScriptView$1","inside","dw","dh","lastBlock","DocumentView$1","doc","defs","render","elements","svg","exportSVGString","xml","serializeToString","removeChild","exportSVG","encodeURIComponent","toCanvas","exportScale","canvas","getContext","Image","src","onload","save","drawImage","restore","exportPNG","URL","createObjectURL","Blob","toBlob","blob","toDataURL","node","makeStyle$2","directProps","roundRect","pillRect","topNotch","getArmNoNotch","getHatTop","getCatTop","catHat","getProcHatTop","highContrastIcons","makeCommonIcons","stroke","makeOriginalIcons","makeHighContrastIcons","iconName","iconStyle","defaultFont","commentFont","makeStyle$1","_iconStyle","musicBlock","penBlock","videoBlock","ttsBlock","translateBlock","wedoBlock","ev3Block","microbitBlock","makeymakeyBlock","gdxforBlock","boostBlock","LineView","isLine","x1","y1","x2","y2","newView","isDropdown","classList","remove","unshift","horizontalPadding","marginBetween","a","previousChild","lastChild","padLeft","originalInnerWidth","GlowView","ScriptView","DocumentView","scratchblocks","newView$2","readCode","html","innerHTML","pre","container","className","display","verticalAlign","init$2","init$1","read","renderMatching","apply","querySelectorAll","appendStyles","head"],"sourceRoot":""}